<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>RUM: rum_src/system.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
<h1>rum_src/system.h</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* Copyright (c) 2008  ATMEL Corporation</span>
<a name="l00002"></a>00002 <span class="comment">   All rights reserved.</span>
<a name="l00003"></a>00003 <span class="comment"></span>
<a name="l00004"></a>00004 <span class="comment">   Redistribution and use in source and binary forms, with or without</span>
<a name="l00005"></a>00005 <span class="comment">   modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment"></span>
<a name="l00007"></a>00007 <span class="comment">   * Redistributions of source code must retain the above copyright</span>
<a name="l00008"></a>00008 <span class="comment">     notice, this list of conditions and the following disclaimer.</span>
<a name="l00009"></a>00009 <span class="comment">   * Redistributions in binary form must reproduce the above copyright</span>
<a name="l00010"></a>00010 <span class="comment">     notice, this list of conditions and the following disclaimer in</span>
<a name="l00011"></a>00011 <span class="comment">     the documentation and/or other materials provided with the</span>
<a name="l00012"></a>00012 <span class="comment">     distribution.</span>
<a name="l00013"></a>00013 <span class="comment">   * Neither the name of the copyright holders nor the names of</span>
<a name="l00014"></a>00014 <span class="comment">     contributors may be used to endorse or promote products derived</span>
<a name="l00015"></a>00015 <span class="comment">     from this software without specific prior written permission.</span>
<a name="l00016"></a>00016 <span class="comment"></span>
<a name="l00017"></a>00017 <span class="comment">  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"</span>
<a name="l00018"></a>00018 <span class="comment">  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</span>
<a name="l00019"></a>00019 <span class="comment">  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE</span>
<a name="l00020"></a>00020 <span class="comment">  ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE</span>
<a name="l00021"></a>00021 <span class="comment">  LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR</span>
<a name="l00022"></a>00022 <span class="comment">  CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF</span>
<a name="l00023"></a>00023 <span class="comment">  SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS</span>
<a name="l00024"></a>00024 <span class="comment">  INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN</span>
<a name="l00025"></a>00025 <span class="comment">  CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)</span>
<a name="l00026"></a>00026 <span class="comment">  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE</span>
<a name="l00027"></a>00027 <span class="comment">  POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00028"></a>00028 <span class="comment">*/</span>
<a name="l00476"></a>00476 <span class="comment">/*</span>
<a name="l00477"></a>00477 <span class="comment">        @defgroup mac_event MAC event handler</span>
<a name="l00478"></a>00478 <span class="comment">        @defgroup mac_route MAC routing functions</span>
<a name="l00479"></a>00479 <span class="comment">        @defgroup mac_scan MAC channel scanning functions</span>
<a name="l00480"></a>00480 <span class="comment"></span>
<a name="l00481"></a>00481 <span class="comment"></span>
<a name="l00482"></a>00482 <span class="comment">*/</span>
<a name="l00483"></a>00483 
<a name="l00484"></a>00484 
<a name="l00485"></a>00485 <span class="preprocessor">#ifndef SYSX_H</span>
<a name="l00486"></a>00486 <span class="preprocessor"></span><span class="preprocessor">#define SYSX_H</span>
<a name="l00487"></a>00487 <span class="preprocessor"></span>
<a name="l00488"></a>00488 <span class="comment">// Definitions of data structures used.</span>
<a name="l00489"></a>00489 <span class="comment">// Definitions of called and "callback" function names in the entire application.</span>
<a name="l00490"></a>00490 <span class="comment">// These functions must be defined in each layer - even if the function is empty.</span>
<a name="l00491"></a>00491 
<a name="l00492"></a>00492 <span class="preprocessor">#include "mac.h"</span>
<a name="l00493"></a>00493 
<a name="l00494"></a>00494 <span class="comment">// Define some applications</span>
<a name="l00500"></a><a class="code" href="group__app.html#g84f1ead330bbcc83a63929c4726080d7">00500</a> <span class="comment"></span><span class="preprocessor">#define SENSOR     1</span>
<a name="l00501"></a>00501 <span class="preprocessor"></span><span class="preprocessor">#define IPSO       2</span>
<a name="l00502"></a>00502 <span class="preprocessor"></span><span class="preprocessor">#define DSKIPDEMO  3</span>
<a name="l00503"></a>00503 <span class="preprocessor"></span><span class="preprocessor">#ifndef APP</span>
<a name="l00504"></a>00504 <span class="preprocessor"></span>
<a name="l00512"></a><a class="code" href="group__app.html#gc4d049774203601b4c2d477b4f46dbe9">00512</a> <span class="preprocessor">#define APP SENSOR</span>
<a name="l00513"></a>00513 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00514"></a>00514 <span class="preprocessor"></span>
<a name="l00521"></a>00521 <span class="preprocessor">#ifndef RUMSLEEP</span>
<a name="l00522"></a><a class="code" href="group__app.html#g7a52419b3bc2a1c7763ace68f3f172fb">00522</a> <span class="preprocessor"></span><span class="preprocessor">#define RUMSLEEP 1</span>
<a name="l00523"></a>00523 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00524"></a>00524 <span class="preprocessor"></span>
<a name="l00531"></a>00531 <span class="preprocessor">#ifndef IPV6LOWPAN</span>
<a name="l00532"></a>00532 <span class="preprocessor"></span><span class="preprocessor"> #if __AVR__ &amp;&amp; NODETYPE == COORD</span>
<a name="l00533"></a><a class="code" href="group__app.html#gfb4e3c89d60cf32cc974d72af22f5425">00533</a> <span class="preprocessor"></span><span class="preprocessor">  #define IPV6LOWPAN 0      // No AVR 6LoWPAN coordinators allowed</span>
<a name="l00534"></a>00534 <span class="preprocessor"></span><span class="preprocessor">  #warning "IPV6LOWPAN set to zero for AVR target coordinator"</span>
<a name="l00535"></a>00535 <span class="preprocessor"></span><span class="preprocessor"> #else // __arm__</span>
<a name="l00536"></a>00536 <span class="preprocessor"></span><span class="preprocessor">  #define IPV6LOWPAN 1</span>
<a name="l00537"></a>00537 <span class="preprocessor"></span><span class="preprocessor"> #endif</span>
<a name="l00538"></a>00538 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00539"></a>00539 <span class="preprocessor"></span>
<a name="l00540"></a>00540 <span class="preprocessor">#if IPV6LOWPAN &amp;&amp; __AVR__ &amp;&amp; NODETYPE == COORD</span>
<a name="l00541"></a>00541 <span class="preprocessor"></span><span class="preprocessor">#error "You cannot build an AVR 6LoWPAN coordinator.  Sorry."</span>
<a name="l00542"></a>00542 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00543"></a>00543 <span class="preprocessor"></span>
<a name="l00544"></a>00544 <span class="comment">// App functions</span>
<a name="l00545"></a>00545 <span class="keywordtype">void</span> <a class="code" href="group__app.html#g47ed1e535fd6629e5366687dbf036d23" title="Sample application function, which initializes the application.">appInit</a>(<span class="keywordtype">void</span>);
<a name="l00546"></a>00546 
<a name="l00547"></a>00547 <span class="comment">// App layer callbacks</span>
<a name="l00548"></a>00548 <span class="keywordtype">void</span> <a class="code" href="group__app.html#g43fb16d48be1908e0a007eaccb6280c9" title="Callback function, called when the MAC has completed its channel scan.">appScanConfirm</a>(u8 success);
<a name="l00549"></a>00549 <span class="keywordtype">void</span> <a class="code" href="group__app.html#g8f71d0c0ed4dfe867f3cd0208a1299b6" title="Callback function, called when macFindClearChannel() completes.">appClearChanFound</a>(u8 channel);
<a name="l00550"></a>00550 <span class="keywordtype">void</span> <a class="code" href="group__app.html#g85919e96b4d8f3aee13a5eb3a10dfd03" title="Callback function, called when the MAC receives an association confirm packet addressed...">appAssociateConfirm</a>(u8 success);
<a name="l00551"></a>00551 <span class="keywordtype">void</span> <a class="code" href="group__app.html#g0686170052677b61bf884357e98354b6" title="Application callback function, called when the MAC fails to send a packet due to...">appPacketSendAccessFail</a>(<span class="keywordtype">void</span>);
<a name="l00552"></a>00552 <span class="keywordtype">void</span> <a class="code" href="group__app.html#gaab9f419d476077682bd9e42b06aad39" title="Application callback function, called when the MAC fails to receive an ACK packet...">appPacketSendFailed</a>(<span class="keywordtype">void</span>);
<a name="l00553"></a>00553 <span class="keywordtype">void</span> <a class="code" href="group__app.html#g165181964bf513258f8c195c36483774" title="Application callback function, called when the MAC receives an ACK packet from a...">appPacketSendSucceed</a>(<span class="keywordtype">void</span>);
<a name="l00554"></a>00554 <span class="keywordtype">void</span> <a class="code" href="group__app.html#g0b12d03da74adb585dc8600038837f15" title="Sample application task loop function.">appTask</a>(<span class="keywordtype">void</span>);
<a name="l00555"></a>00555 <span class="keywordtype">void</span> <a class="code" href="group__app.html#gb662b36ea9f9a0c67dbf1220b60edf32" title="Application callback function, called when the MAC receives a ping request packet...">appPingReq</a>(u16 addr);
<a name="l00556"></a>00556 <span class="keywordtype">void</span> <a class="code" href="group__app.html#ga5a5e465de3a633997c3e248ae1ab632" title="Application callback function, called when the MAC receives a ping response packet...">appPingRsp</a>(u16 addr);
<a name="l00557"></a>00557 <span class="keywordtype">void</span> <a class="code" href="group__app.html#gfeee90add49d6170d365da9329fa3a91" title="Application callback function.">appSixlowpanPingResponse</a>(<span class="keywordtype">void</span>);
<a name="l00558"></a>00558 <span class="keywordtype">void</span> <a class="code" href="group__app.html#g24a5a30fe61f32e1bd405f431bd46527" title="Callback function, called when the MAC receives a data packet for this node.">appDataIndication</a>(<span class="keywordtype">void</span>);
<a name="l00559"></a>00559 <span class="keywordtype">void</span> <a class="code" href="group__app.html#g8536fa62911e3b087d0811af3649b329" title="Callback function, called when the MAC has associated a child of this node to the...">appChildAssociated</a>(u16 shortAddress);
<a name="l00560"></a>00560 <span class="keywordtype">void</span> <a class="code" href="group__app.html#g65f0f14844e8b09a2d33a5b377c56b1b" title="Callback function, called when the MAC has associated a new node to a network.">appNodeAssociated</a>(u16 shortAddress);
<a name="l00561"></a>00561 
<a name="l00562"></a>00562 <span class="comment">// MAC layer functions</span>
<a name="l00563"></a>00563 <span class="keywordtype">void</span> <a class="code" href="group__mac.html#gaa0748a32ee5741afc6a5078d92158bb" title="Init the mac, which includes initializing the radio chip.">macInit</a>(u8 Channel);
<a name="l00564"></a>00564 <span class="keywordtype">void</span> <a class="code" href="group__mac.html#gd9b6aa9e3aa0f562f49354f26bbf56ba" title="This function will cause a device to become a PAN Coordinator.">macStartCoord</a>(<span class="keywordtype">void</span>);
<a name="l00565"></a>00565 <span class="keywordtype">void</span> <a class="code" href="group__mac__scan.html#g9b962c94bc13ed89a2d2a8590ed487f4" title="Scan channels for coordinators.">macScan</a>(<span class="keywordtype">void</span>);
<a name="l00566"></a>00566 u8 <a class="code" href="group__mac__scan.html#g92f5262200ca45d25313feb542d9c30b" title="Reports whether the MAC is currently scanning.">macIsScanning</a>(<span class="keywordtype">void</span>);
<a name="l00567"></a>00567 <span class="keywordtype">void</span> <a class="code" href="group__mac__associate.html#ge044ad02d7a264fe88176c4076809853" title="Associate this node with a network.">macAssociate</a>(u16 shortAddr, u8 channel);
<a name="l00568"></a>00568 <span class="keywordtype">void</span> <a class="code" href="group__mac__data.html#g57df637c21a2060c49e6e19c09b38d30" title="The macsixlowpanDataRequest function is used to send a frame over the air to another...">macDataRequest</a>(u16 addr, u8 len, u8 * data);
<a name="l00569"></a>00569 <span class="keywordtype">void</span> <a class="code" href="group__mac__data.html#g7e4c5d07ec7a2622dabbcf51b1fe4ba9" title="Send a ping packet (either request or response) to another node.">macPing</a>(u8 pingType, u16 addr);
<a name="l00570"></a>00570 
<a name="l00571"></a>00571 <span class="comment">// Radio/HAL callback functions (called from driver)</span>
<a name="l00572"></a>00572 <span class="keywordtype">void</span> <a class="code" href="group__radio.html#g828f6014dc84586176b1d8934e7bd5dd" title="Callback function, called when the radio receives an RX_START interrupt.">radioRxStartEvent</a>(u8 <span class="keyword">const</span> <a class="code" href="group__arm.html#ga3a07afe7144b962b3ed8bb0cbc0b892" title="This is the radio ISR handler.">frame_length</a>);
<a name="l00573"></a>00573 <span class="keywordtype">void</span> <a class="code" href="group__radio.html#ge03d5aceb33d29231cf12d1d3e0997ae" title="Callback function, called when the radio has received a TRX_END interrupt.">radioTrxEndEvent</a>(<span class="keywordtype">void</span>);
<a name="l00574"></a>00574 
<a name="l00575"></a>00575 <span class="preprocessor">#endif</span>
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Jun 8 18:38:19 2009 for RUM by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
