<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>RUM: rum_src/mac.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
<h1>rum_src/mac.h</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* Copyright (c) 2008  ATMEL Corporation</span>
<a name="l00002"></a>00002 <span class="comment">   All rights reserved.</span>
<a name="l00003"></a>00003 <span class="comment"></span>
<a name="l00004"></a>00004 <span class="comment">   Redistribution and use in source and binary forms, with or without</span>
<a name="l00005"></a>00005 <span class="comment">   modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment"></span>
<a name="l00007"></a>00007 <span class="comment">   * Redistributions of source code must retain the above copyright</span>
<a name="l00008"></a>00008 <span class="comment">     notice, this list of conditions and the following disclaimer.</span>
<a name="l00009"></a>00009 <span class="comment">   * Redistributions in binary form must reproduce the above copyright</span>
<a name="l00010"></a>00010 <span class="comment">     notice, this list of conditions and the following disclaimer in</span>
<a name="l00011"></a>00011 <span class="comment">     the documentation and/or other materials provided with the</span>
<a name="l00012"></a>00012 <span class="comment">     distribution.</span>
<a name="l00013"></a>00013 <span class="comment">   * Neither the name of the copyright holders nor the names of</span>
<a name="l00014"></a>00014 <span class="comment">     contributors may be used to endorse or promote products derived</span>
<a name="l00015"></a>00015 <span class="comment">     from this software without specific prior written permission.</span>
<a name="l00016"></a>00016 <span class="comment"></span>
<a name="l00017"></a>00017 <span class="comment">  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"</span>
<a name="l00018"></a>00018 <span class="comment">  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</span>
<a name="l00019"></a>00019 <span class="comment">  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE</span>
<a name="l00020"></a>00020 <span class="comment">  ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE</span>
<a name="l00021"></a>00021 <span class="comment">  LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR</span>
<a name="l00022"></a>00022 <span class="comment">  CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF</span>
<a name="l00023"></a>00023 <span class="comment">  SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS</span>
<a name="l00024"></a>00024 <span class="comment">  INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN</span>
<a name="l00025"></a>00025 <span class="comment">  CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)</span>
<a name="l00026"></a>00026 <span class="comment">  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE</span>
<a name="l00027"></a>00027 <span class="comment">  POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00028"></a>00028 <span class="comment">*/</span>
<a name="l00029"></a>00029 <span class="comment">/*</span>
<a name="l00030"></a>00030 <span class="comment">  $Id: mac.h,v 1.3 2009/05/28 19:45:34 bleverett Exp $</span>
<a name="l00031"></a>00031 <span class="comment">*/</span>
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 <span class="preprocessor">#ifndef MAC_H</span>
<a name="l00034"></a>00034 <span class="preprocessor"></span><span class="preprocessor">#define MAC_H</span>
<a name="l00035"></a>00035 <span class="preprocessor"></span>
<a name="l00151"></a>00151 <span class="comment">// Includes</span>
<a name="l00152"></a>00152 <span class="preprocessor">#include &lt;stdint.h&gt;</span>
<a name="l00153"></a>00153 <span class="preprocessor">#include "stdbool.h"</span>
<a name="l00154"></a>00154 <span class="preprocessor">#include "rum_types.h"</span>
<a name="l00155"></a>00155 
<a name="l00156"></a>00156 <span class="preprocessor">#define RUM_VERSION                    "V0.9"</span>
<a name="l00157"></a>00157 <span class="preprocessor"></span>
<a name="l00158"></a>00158 <span class="comment">// Define a debug mode (0 = no debug, minimal size, 1 = serial code and messages)</span>
<a name="l00159"></a>00159 <span class="comment">// This can be defined by make file.  For Makefile.linux, use "make DEBUG=0" to</span>
<a name="l00160"></a>00160 <span class="comment">// override this setting.</span>
<a name="l00161"></a>00161 <span class="preprocessor">#ifndef DEBUG</span>
<a name="l00162"></a>00162 <span class="preprocessor"></span>
<a name="l00168"></a>00168 <span class="preprocessor">#define DEBUG 1 // default value of debug is 1</span>
<a name="l00169"></a>00169 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00170"></a>00170 <span class="preprocessor"></span>
<a name="l00176"></a>00176 <span class="preprocessor">#ifndef SERIAL</span>
<a name="l00177"></a><a class="code" href="group__serial.html#gae3f0b4211ba45d265973d40ccbb5fd1">00177</a> <span class="preprocessor"></span><span class="preprocessor">#define SERIAL 1</span>
<a name="l00178"></a>00178 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00179"></a>00179 <span class="preprocessor"></span>
<a name="l00187"></a>00187 <span class="preprocessor">#ifndef OTA_DEBUG</span>
<a name="l00188"></a><a class="code" href="group__mac.html#g5c996598d7430c84fe375519b45dbcdf">00188</a> <span class="preprocessor"></span><span class="preprocessor">#define OTA_DEBUG 0</span>
<a name="l00189"></a>00189 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00190"></a>00190 <span class="preprocessor"></span>
<a name="l00191"></a>00191 <span class="comment">// If DEBUG is on, but neither SERIAL or OTA_DEBUG is set, then DEBUG can't work</span>
<a name="l00192"></a>00192 <span class="preprocessor">#if (DEBUG &amp;&amp; (SERIAL == 0) &amp;&amp; (OTA_DEBUG == 0))</span>
<a name="l00193"></a>00193 <span class="preprocessor"></span><span class="preprocessor">#error "If DEBUG is set, then either SERIAL or OTA_DEBUG must be set"</span>
<a name="l00194"></a>00194 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00195"></a>00195 <span class="preprocessor"></span>
<a name="l00205"></a>00205 <span class="preprocessor">#ifndef VLP</span>
<a name="l00206"></a><a class="code" href="group__mac.html#g129500a5752ba8bc8abba3844efe45f6">00206</a> <span class="preprocessor"></span><span class="preprocessor">#define VLP 0</span>
<a name="l00207"></a>00207 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00208"></a>00208 <span class="preprocessor"></span>
<a name="l00209"></a>00209 <span class="comment">// Demo mode -</span>
<a name="l00210"></a>00210 <span class="preprocessor">#ifndef DEMO</span>
<a name="l00211"></a>00211 <span class="preprocessor"></span>
<a name="l00219"></a><a class="code" href="group__app.html#gd5c46706b38c7dc7ebb32e964a24fd13">00219</a> <span class="preprocessor">  #define DEMO 0</span>
<a name="l00220"></a>00220 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00221"></a>00221 <span class="preprocessor"></span>
<a name="l00222"></a>00222 
<a name="l00223"></a>00223 <span class="preprocessor">#define CHANNEL255 0xff</span>
<a name="l00224"></a>00224 <span class="preprocessor"></span>
<a name="l00232"></a>00232 <span class="preprocessor">#ifndef PAN_CHANNEL</span>
<a name="l00233"></a><a class="code" href="group__mac__associate.html#g339b747fe4e5bb7e7f252ba56727e3f5">00233</a> <span class="preprocessor"></span><span class="preprocessor">  #define PAN_CHANNEL (CHANNEL255)</span>
<a name="l00234"></a>00234 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00235"></a>00235 <span class="preprocessor"></span>
<a name="l00242"></a>00242 <span class="preprocessor">#ifndef CHINA_MODE</span>
<a name="l00243"></a><a class="code" href="group__mac.html#g036a88551664cfe893bc3f51a64ba179">00243</a> <span class="preprocessor"></span><span class="preprocessor">  #define CHINA_MODE 0</span>
<a name="l00244"></a>00244 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00245"></a>00245 <span class="preprocessor"></span>
<a name="l00246"></a>00246 
<a name="l00254"></a>00254 <span class="preprocessor">#ifndef PAN_ID</span>
<a name="l00255"></a><a class="code" href="group__mac__associate.html#g30931c9744e3a05a13e7c0f36ef20255">00255</a> <span class="preprocessor"></span><span class="preprocessor">  #define PAN_ID BROADCASTPANID</span>
<a name="l00256"></a>00256 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00257"></a>00257 <span class="preprocessor"></span>
<a name="l00263"></a><a class="code" href="group__radio.html#g14778f0fb49f9a586ceffa5feb1d19b9">00263</a> <span class="preprocessor">#define DATA_RATE_212    BPSK_40</span>
<a name="l00264"></a>00264 <span class="preprocessor"></span>
<a name="l00265"></a>00265 
<a name="l00266"></a>00266 <span class="preprocessor">#include "hal.h"</span>
<a name="l00267"></a>00267 <span class="preprocessor">#if __AVR__</span>
<a name="l00268"></a>00268 <span class="preprocessor"></span><span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00269"></a>00269 <span class="preprocessor">#endif</span>
<a name="l00270"></a>00270 <span class="preprocessor"></span><span class="comment">// Some platforms have no serial port</span>
<a name="l00271"></a>00271 <span class="preprocessor">#if PLATFORM == SPITFIRE</span>
<a name="l00272"></a>00272 <span class="preprocessor"></span><span class="preprocessor">#undef  DEBUG</span>
<a name="l00273"></a><a class="code" href="group__app.html#gd72dbcf6d0153db1b8d8a58001feed83">00273</a> <span class="preprocessor"></span><span class="preprocessor">#define DEBUG 0</span>
<a name="l00274"></a>00274 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00275"></a>00275 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="keywordtype">char</span> <a class="code" href="group__mac.html#gb3ca21105369e45c8e772516bc8f1c27" title="Debugging temporary string, only used if DEBUG is non-zero.">debugStr</a>[<a class="code" href="group__app.html#gd72dbcf6d0153db1b8d8a58001feed83" title="The global debugging flag.">DEBUG</a> * 40];
<a name="l00276"></a>00276 
<a name="l00277"></a>00277 
<a name="l00285"></a><a class="code" href="group__mac.html#g146ff2075038ea93bc2d81bba8df519e">00285</a> <span class="preprocessor">#define COORD     1  </span>
<a name="l00286"></a><a class="code" href="group__mac.html#g5794c1a5f0eedfe85aea59330c25848a">00286</a> <span class="preprocessor">#define ROUTER    2  </span>
<a name="l00287"></a><a class="code" href="group__mac.html#gfa11cf93bface598cd7a0fa88a71285c">00287</a> <span class="preprocessor">#define ENDDEVICE 3  </span>
<a name="l00288"></a>00288 <span class="preprocessor"></span>
<a name="l00295"></a><a class="code" href="group__mac.html#gd24d249b0f426b8bd98a2180564531dc">00295</a> <span class="preprocessor">#define DEFAULT_COORD_ADDR      0x0000</span>
<a name="l00296"></a>00296 <span class="preprocessor"></span><span class="preprocessor">#define DEFAULT_ARM_COORD_LONG  0xAABBCCDDEEFF1122ll</span>
<a name="l00297"></a>00297 <span class="preprocessor"></span>
<a name="l00298"></a>00298 <span class="comment">// Define whether we are a coordinator or not.</span>
<a name="l00299"></a>00299 <span class="comment">// This affects compilation</span>
<a name="l00327"></a>00327 <span class="comment"></span><span class="preprocessor">#ifdef DOXYGEN</span>
<a name="l00328"></a><a class="code" href="group__mac.html#g59569ff056c7f0f124222ca0013728d5">00328</a> <span class="preprocessor"></span><span class="preprocessor">#define NODETYPE COORD</span>
<a name="l00329"></a>00329 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00330"></a>00330 <span class="preprocessor"></span><span class="preprocessor">#ifdef COORDNODE</span>
<a name="l00331"></a>00331 <span class="preprocessor"></span><span class="preprocessor">  #define NODETYPE COORD</span>
<a name="l00332"></a>00332 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00333"></a>00333 <span class="preprocessor"></span><span class="preprocessor">#ifdef ENDNODE</span>
<a name="l00334"></a>00334 <span class="preprocessor"></span><span class="preprocessor">  #define NODETYPE ENDDEVICE</span>
<a name="l00335"></a>00335 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00336"></a>00336 <span class="preprocessor"></span><span class="preprocessor">#ifdef ROUTERNODE</span>
<a name="l00337"></a>00337 <span class="preprocessor"></span><span class="preprocessor">  #define NODETYPE ROUTER</span>
<a name="l00338"></a>00338 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00339"></a>00339 <span class="preprocessor"></span>
<a name="l00340"></a>00340 
<a name="l00341"></a>00341 <span class="preprocessor">#ifndef NODETYPE</span>
<a name="l00342"></a>00342 <span class="preprocessor"></span><span class="comment">// Warning - NODETYPE must be defined</span>
<a name="l00343"></a>00343 <span class="preprocessor">#error "You must define one of COORDNODE, ROUTERNODE, or ENDNODE to specify which"</span>
<a name="l00344"></a>00344 <span class="preprocessor"></span><span class="preprocessor">#error "target you are compiling for.  With AVR Studio, make sure you"</span>
<a name="l00345"></a>00345 <span class="preprocessor"></span><span class="preprocessor">#error "have -DCOORDNODE listed under '[All Files]', on custom options"</span>
<a name="l00346"></a>00346 <span class="preprocessor"></span><span class="preprocessor">#error "tab of the project options dialog."</span>
<a name="l00347"></a>00347 <span class="preprocessor"></span><span class="preprocessor">#error "With the Makefile for Linux, specify a node type like this:"</span>
<a name="l00348"></a>00348 <span class="preprocessor"></span><span class="preprocessor">#error "make TYPE=COORD"</span>
<a name="l00349"></a>00349 <span class="preprocessor"></span><span class="preprocessor">#error "make TYPE=END"</span>
<a name="l00350"></a>00350 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00351"></a>00351 <span class="preprocessor"></span>
<a name="l00352"></a>00352 <span class="preprocessor">#define HAL_MIN_FRAME_LENGTH   ( 0x03 ) </span>
<a name="l00353"></a>00353 <span class="preprocessor">#define HAL_MAX_FRAME_LENGTH   ( 0x7F ) </span>
<a name="l00354"></a>00354 <span class="preprocessor"></span>
<a name="l00355"></a>00355 <span class="preprocessor"></span>
<a name="l00362"></a>00362 <span class="preprocessor">#if (__AVR__)</span>
<a name="l00363"></a>00363 <span class="preprocessor"></span><span class="preprocessor">#include "sensors.h"</span>
<a name="l00364"></a><a class="code" href="structtEepromContents.html">00364</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00365"></a><a class="code" href="structtEepromContents.html#034560502098939ee0b140d21aa9ca80">00365</a>     u8 eepromMacAddress[8];      
<a name="l00366"></a><a class="code" href="structtEepromContents.html#6ae189d5ce318e261d63a282a11fbd97">00366</a>     <a class="code" href="structtCalFactors.html" title="Calibration data, stored in EEPROM.">tCalFactors</a> calFactors;      
<a name="l00367"></a><a class="code" href="structtEepromContents.html#759acbe99eed5ae40c82404c5bbafb94">00367</a>     u16 dataSeconds;             
<a name="l00368"></a>00368 } <a class="code" href="structtEepromContents.html" title="Locations in EEPROM of the stored data.">tEepromContents</a>;
<a name="l00369"></a>00369 <span class="preprocessor">#endif // __AVR__</span>
<a name="l00370"></a>00370 <span class="preprocessor"></span><span class="comment">// Macros &amp; Defines</span>
<a name="l00371"></a>00371 <span class="preprocessor">#define SUCCESS                         (0)</span>
<a name="l00372"></a>00372 <span class="preprocessor"></span><span class="preprocessor">#define CHANNEL_PAGE_0                  (0)     // This represents the 2.4GHz RF230/231.</span>
<a name="l00373"></a>00373 <span class="preprocessor"></span>
<a name="l00378"></a><a class="code" href="group__mac.html#g6717875b0df9fdee5523c2f251f73810">00378</a> <span class="preprocessor">#define BROADCASTADDR   (0xFFFF) </span>
<a name="l00379"></a><a class="code" href="group__mac.html#g968a141e8303757f3d30b6dcb02052bf">00379</a> <span class="preprocessor">#define BROADCASTPANID (0xFFFF)  </span>
<a name="l00380"></a>00380 <span class="preprocessor"></span>
<a name="l00381"></a>00381 <span class="preprocessor"></span>
<a name="l00387"></a><a class="code" href="structrx__frame__t.html">00387</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>{
<a name="l00388"></a><a class="code" href="structrx__frame__t.html#012c6405974bc274d65a61d46780fbf4">00388</a>     u8 length;                       
<a name="l00389"></a><a class="code" href="structrx__frame__t.html#e65778583d2a02fc3e962243f6d0e238">00389</a>     u8 data[ HAL_MAX_FRAME_LENGTH ]; 
<a name="l00390"></a><a class="code" href="structrx__frame__t.html#fd7e0543d592d77ba0cb2ad164c1458e">00390</a>     u8 lqi;                          
<a name="l00391"></a><a class="code" href="structrx__frame__t.html#caec6b7c665d55f0b30d9ef1c3870733">00391</a>     <span class="keywordtype">bool</span> crc;                        
<a name="l00392"></a>00392 } __attribute__((packed)) <a class="code" href="structrx__frame__t.html" title="This struct defines the rx data container.">rx_frame_t</a>;
<a name="l00393"></a>00393 
<a name="l00394"></a>00394 
<a name="l00395"></a>00395 
<a name="l00396"></a>00396 
<a name="l00401"></a><a class="code" href="group__mac.html#gf98b7750709737ead9ddde34b4ae4633">00401</a> <span class="preprocessor">#define ASSOCIATION_REQUEST              (0x01)  </span>
<a name="l00402"></a><a class="code" href="group__mac.html#g5e527382f4db88d62ce9aba61fe0b75b">00402</a> <span class="preprocessor">#define ASSOCIATION_RESPONSE             (0x02)  </span>
<a name="l00403"></a>00403 <span class="preprocessor">#define DISSASOCIATION_NOTIFICATION      (0x03)</span>
<a name="l00404"></a>00404 <span class="preprocessor"></span><span class="preprocessor">#define DATA_REQUEST                     (0x04)</span>
<a name="l00405"></a>00405 <span class="preprocessor"></span><span class="preprocessor">#define PAN_ID_CONFLICT_NOTIFICATION     (0x05)</span>
<a name="l00406"></a>00406 <span class="preprocessor"></span><span class="preprocessor">#define ORPHAN_NOTIFICATION              (0x06)</span>
<a name="l00407"></a><a class="code" href="group__mac.html#ge347f8ccf54462acfcd2f0cd92c8bf60">00407</a> <span class="preprocessor"></span><span class="preprocessor">#define BEACON_REQUEST                   (0x07)  </span>
<a name="l00408"></a>00408 <span class="preprocessor">#define COORDINATOR_REALIGNMENT          (0x08)</span>
<a name="l00409"></a>00409 <span class="preprocessor"></span><span class="preprocessor">#define GTS_REQUEST                      (0x09)</span>
<a name="l00410"></a><a class="code" href="group__mac.html#g1bad177d49cd2ab85b180af9e34fe24a">00410</a> <span class="preprocessor"></span><span class="preprocessor">#define ROUTING_PACKET                   (0xbb)  </span>
<a name="l00411"></a>00411 <span class="preprocessor"></span>
<a name="l00414"></a>00414 <span class="preprocessor">#define ACK_USED 1</span>
<a name="l00415"></a>00415 <span class="preprocessor"></span>
<a name="l00425"></a>00425 <span class="preprocessor">#if ACK_USED</span>
<a name="l00426"></a><a class="code" href="group__mac.html#gdb8686066c076d5d45024d1375535b1f">00426</a> <span class="preprocessor"></span><span class="preprocessor">#define FCF_BEACONREQ         0x0803  </span>
<a name="l00427"></a><a class="code" href="group__mac.html#g8554c6f65951e156a8385590d36debfd">00427</a> <span class="preprocessor">#define FCF_ASSOC_REQ_DIRECT  0xC863  </span>
<a name="l00428"></a><a class="code" href="group__mac.html#gbfcf8997304dde4b9ecfc9e58b3cb950">00428</a> <span class="preprocessor">#define FCF_ASSOC_REQ_IND     0x8863  </span>
<a name="l00429"></a><a class="code" href="group__mac.html#gd77e5ed839d20939420f3d50a121cb61">00429</a> <span class="preprocessor">#define FCF_ASSOC_RESP_IND    0x8863  </span>
<a name="l00430"></a><a class="code" href="group__mac.html#g58b9c080c01f495671fb859eb86217cd">00430</a> <span class="preprocessor">#define FCF_ASSOC_RESP_DIRECT 0x8C63  </span>
<a name="l00431"></a><a class="code" href="group__mac.html#gf9ba84abf7a2b6c682027c7ab28d1b90">00431</a> <span class="preprocessor">#define FCF_ROUTE             0x8863  </span>
<a name="l00432"></a><a class="code" href="group__mac.html#g2426412ac83111d869c05a8314542dda">00432</a> <span class="preprocessor">#define FCF_BEACON            0x8000  </span>
<a name="l00433"></a><a class="code" href="group__mac.html#gfa03324c606f9efe4838b4d2b95fb798">00433</a> <span class="preprocessor">#define FCF_DATA              0x8861  </span>
<a name="l00434"></a><a class="code" href="group__mac.html#g1ca7c0002a9db25b651693af6a9ef938">00434</a> <span class="preprocessor">#define FCF_MAC_CMD           0x8863  </span>
<a name="l00435"></a>00435 <span class="preprocessor">#else</span>
<a name="l00436"></a>00436 <span class="preprocessor"></span><span class="preprocessor">#define FCF_BEACONREQ         0x0803  </span>
<a name="l00437"></a>00437 <span class="preprocessor">#define FCF_ASSOC_REQ_DIRECT  0xC843  </span>
<a name="l00438"></a>00438 <span class="preprocessor">#define FCF_ASSOC_REQ_IND     0x8843  </span>
<a name="l00439"></a>00439 <span class="preprocessor">#define FCF_ASSOC_RESP_IND    0x8843  </span>
<a name="l00440"></a>00440 <span class="preprocessor">#define FCF_ASSOC_RESP_DIRECT 0x8C43  </span>
<a name="l00441"></a>00441 <span class="preprocessor">#define FCF_ROUTE             0x8843  </span>
<a name="l00442"></a>00442 <span class="preprocessor">#define FCF_BEACON            0x8000  </span>
<a name="l00443"></a>00443 <span class="preprocessor">#define FCF_DATA              0x8841  </span>
<a name="l00444"></a>00444 <span class="preprocessor">#define FCF_MAC_CMD           0x8843  </span>
<a name="l00445"></a>00445 <span class="preprocessor">#endif</span>
<a name="l00446"></a>00446 <span class="preprocessor"></span>
<a name="l00464"></a><a class="code" href="group__mac.html#g021f896b0d93ef2ac8162dbfad736805">00464</a> <span class="preprocessor">#define DATA_FRAME             1   </span>
<a name="l00465"></a><a class="code" href="group__mac.html#g85ba6c45557eb0369e606452f9d902e6">00465</a> <span class="preprocessor">#define PING_REQ_FRAME         2   </span>
<a name="l00466"></a><a class="code" href="group__mac.html#g54b3bc6f08ede227e3a0180fc5665425">00466</a> <span class="preprocessor">#define PING_RSP_FRAME         3   </span>
<a name="l00467"></a><a class="code" href="group__mac.html#g344fef5e64766495e4cb4565a642ebdc">00467</a> <span class="preprocessor">#define DROP_CHILD_FRAME       4   </span>
<a name="l00468"></a><a class="code" href="group__mac.html#g5e13d1c48a9c4d5a724c1862c8b2d533">00468</a> <span class="preprocessor">#define DATA_FRAME_6LOWPAN     5   </span>
<a name="l00469"></a><a class="code" href="group__mac.html#gc96bd473487d16bbd6c12326bd904c90">00469</a> <span class="preprocessor">#define WAKE_NODE              6   </span>
<a name="l00470"></a><a class="code" href="group__mac.html#g508aab4d544da1a2b31131080945d63c">00470</a> <span class="preprocessor">#define DEBUG_FRAME            7   </span>
<a name="l00471"></a>00471 <span class="preprocessor"></span>
<a name="l00480"></a><a class="code" href="group__mac.html#g7de5208e89c5ce81355147b68de60963">00480</a> <span class="preprocessor">#define ASSOCIATION_TIMEOUT  1000  </span>
<a name="l00481"></a><a class="code" href="group__mac.html#gcba298b503d8f965ac02682ef80d92f1">00481</a> <span class="preprocessor">#define MAC_RP_DELAY         5     </span>
<a name="l00482"></a><a class="code" href="group__mac.html#ga8874ef18103487f59c19eb242a88288">00482</a> <span class="preprocessor">#define MAC_DATA_DELAY       7     </span>
<a name="l00483"></a><a class="code" href="group__mac.html#gfbce8a37e9f293eac184e5da71b90b37">00483</a> <span class="preprocessor">#define MAC_NOTIFY_DELAY     160   </span>
<a name="l00484"></a><a class="code" href="group__mac.html#g12a46d6ff86950784521c2446d84b2fc">00484</a> <span class="preprocessor">#define LED_DELAY            10    </span>
<a name="l00485"></a><a class="code" href="group__mac.html#ge7c487aa96655c764d288fc7ce4d2cb0">00485</a> <span class="preprocessor">#define LED_PING_DELAY       400   </span>
<a name="l00486"></a>00486 <span class="preprocessor"></span>
<a name="l00491"></a><a class="code" href="group__mac.html#gd39dd2f3eb8acad9fa1c008bc4bafbbf">00491</a> <span class="preprocessor">typedef u16 fcf_t;</span>
<a name="l00492"></a>00492 <span class="preprocessor"></span>
<a name="l00493"></a>00493 
<a name="l00498"></a><a class="code" href="structsuperframe__spec__t.html">00498</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00499"></a>00499 {
<a name="l00500"></a>00500     u8   beacon_order : 4;
<a name="l00501"></a>00501     u8   superframe_order : 4;
<a name="l00502"></a>00502     u8   final_cap_slot : 4;
<a name="l00503"></a>00503     <span class="keywordtype">bool</span> batt_life_extension : 1;
<a name="l00504"></a>00504     <span class="keywordtype">bool</span> reserved : 1;
<a name="l00505"></a>00505     <span class="keywordtype">bool</span> pan_coord : 1;
<a name="l00506"></a>00506     <span class="keywordtype">bool</span> association_permit : 1;
<a name="l00507"></a>00507 } __attribute__((packed)) <a class="code" href="structsuperframe__spec__t.html" title="Superframe specification frame type.">superframe_spec_t</a>;
<a name="l00508"></a>00508 
<a name="l00511"></a><a class="code" href="unionsuperframe__t.html">00511</a> typedef union
<a name="l00512"></a>00512 {
<a name="l00513"></a>00513     superframe_spec_t superframe_struct;
<a name="l00514"></a>00514     u16 superframe_data;
<a name="l00515"></a>00515 } __attribute__((packed)) <a class="code" href="unionsuperframe__t.html" title="This union allows access to the superframe specification field as a structure or...">superframe_t</a>;
<a name="l00516"></a>00516 
<a name="l00519"></a><a class="code" href="structpanDescriptor__t.html">00519</a> typedef struct
<a name="l00520"></a>00520 {
<a name="l00521"></a><a class="code" href="structpanDescriptor__t.html#ee31ca1aa3d106325774d35f33bf11bb">00521</a>     u8 coorAddrMode;             
<a name="l00522"></a><a class="code" href="structpanDescriptor__t.html#e5e6733835d7a7422dba04e8aed655cc">00522</a>     u16 coorPANId;               
<a name="l00523"></a><a class="code" href="structpanDescriptor__t.html#ef9073f37c69898f538332fba8052d03">00523</a>     u16  coordAddr;              
<a name="l00524"></a><a class="code" href="structpanDescriptor__t.html#b88b47c58d2b004636b25fb75557b32a">00524</a>     u8 logicalChannel;           
<a name="l00525"></a><a class="code" href="structpanDescriptor__t.html#2f55c3c8baa4e0af0950fd434830b108">00525</a>     u8 channelPage;              
<a name="l00526"></a><a class="code" href="structpanDescriptor__t.html#eb2c678646a5ecdae6df991641f1df8d">00526</a>     superframe_t superFrameSpec; 
<a name="l00527"></a><a class="code" href="structpanDescriptor__t.html#8ceeebc221ca893c3a7e322c84f8f19b">00527</a>     u8 hopsToCoord;              
<a name="l00528"></a><a class="code" href="structpanDescriptor__t.html#90b5b071347b891ad39a795a060020c4">00528</a>     u8 lqi;                      
<a name="l00529"></a><a class="code" href="structpanDescriptor__t.html#499cf9b0ccf26b3d655f8730530f2740">00529</a>     u8 rssi;                     
<a name="l00530"></a>00530     u32 timeStamp;
<a name="l00531"></a>00531     u8 securityFailure;
<a name="l00532"></a>00532     u8 securityLevel;
<a name="l00533"></a>00533      u8 keyIdMode;
<a name="l00534"></a>00534     u8 *keySource;
<a name="l00535"></a>00535     u8 keyIndex;
<a name="l00536"></a>00536 } __attribute__((packed)) <a class="code" href="structpanDescriptor__t.html" title="Defines the PAN descriptor for a received beacon frame.">panDescriptor_t</a>;
<a name="l00537"></a>00537 
<a name="l00538"></a>00538 
<a name="l00540"></a>00540 <span class="comment">// Beacon Request, FCF=0x0803, CMD=7</span>
<a name="l00541"></a><a class="code" href="structftBeaconReq.html">00541</a> typedef struct{
<a name="l00542"></a><a class="code" href="structftBeaconReq.html#dc5f63e693c95e3a127e9adc20b01657">00542</a>     <a class="code" href="group__mac.html#gd39dd2f3eb8acad9fa1c008bc4bafbbf" title="The FCF type, which is just a 16-bit integer.">fcf_t</a> fcf;           
<a name="l00543"></a><a class="code" href="structftBeaconReq.html#0865bfb5f3724ff31234a5c76e384ae4">00543</a>     u8    seq;           
<a name="l00544"></a><a class="code" href="structftBeaconReq.html#8ac4542260fb4da516144217e4fdb755">00544</a>     u16   panid;         
<a name="l00545"></a><a class="code" href="structftBeaconReq.html#e76fc3eab9ff62a94519fb457019aad7">00545</a>     u16   broadcastAddr; 
<a name="l00546"></a><a class="code" href="structftBeaconReq.html#b3ab68e015b74b9373fd6da7b7abe772">00546</a>     u8    cmd;           
<a name="l00547"></a>00547 } __attribute__((packed)) <a class="code" href="structftBeaconReq.html" title="Beacon request frame, sent from new node into the ether.">ftBeaconReq</a>;
<a name="l00550"></a>00550 <span class="comment">// Beacon, FCF=0x8000</span>
<a name="l00551"></a><a class="code" href="structftBeacon.html">00551</a> typedef struct{
<a name="l00552"></a><a class="code" href="structftBeacon.html#ef8b20bba70707de7874201ecda08d6e">00552</a>     <a class="code" href="group__mac.html#gd39dd2f3eb8acad9fa1c008bc4bafbbf" title="The FCF type, which is just a 16-bit integer.">fcf_t</a> fcf;           
<a name="l00553"></a><a class="code" href="structftBeacon.html#419a11cd48d9d658ac537482e99d2d44">00553</a>     u8    seq;           
<a name="l00554"></a><a class="code" href="structftBeacon.html#ef2e8dac9de6ba0950450a1a99392064">00554</a>     u16   panid;         
<a name="l00555"></a><a class="code" href="structftBeacon.html#ad6de87143635dd7de5428e667e75a91">00555</a>     u16   addr;          
<a name="l00556"></a><a class="code" href="structftBeacon.html#0d64606f31ef108ccc3989f8e07eec37">00556</a>     u16   superFrame;    
<a name="l00557"></a><a class="code" href="structftBeacon.html#9fd71b54153ac6374efb22b1dfd0e425">00557</a>     u8    netID;         
<a name="l00558"></a>00558     u8    hops;
<a name="l00559"></a>00559 }  __attribute__((packed)) <a class="code" href="structftBeacon.html" title="Beacon frame, sent by coordinator/router in response to a beacon request.">ftBeacon</a>;
<a name="l00563"></a>00563 <span class="comment">// Association request, direct</span>
<a name="l00564"></a><a class="code" href="structftAssocReqDirect.html">00564</a> typedef struct{
<a name="l00565"></a><a class="code" href="structftAssocReqDirect.html#a8c5e33bb4753b9a2518acd6a7050c16">00565</a>     <a class="code" href="group__mac.html#gd39dd2f3eb8acad9fa1c008bc4bafbbf" title="The FCF type, which is just a 16-bit integer.">fcf_t</a> fcf;           
<a name="l00566"></a><a class="code" href="structftAssocReqDirect.html#b57313e565100812a6483547b7aac2ee">00566</a>     u8    seq;           
<a name="l00567"></a><a class="code" href="structftAssocReqDirect.html#af26be60f96b5913ad502740a7843f23">00567</a>     u16   panid;         
<a name="l00568"></a><a class="code" href="structftAssocReqDirect.html#e5efc730743c1947ebe5c85ab710e369">00568</a>     u16   destAddr;      
<a name="l00569"></a><a class="code" href="structftAssocReqDirect.html#12c77c6a8478010354e46b5759ce2461">00569</a>     u64   srcAddr;       
<a name="l00570"></a><a class="code" href="structftAssocReqDirect.html#98257325d82abecc719147e913cefa1d">00570</a>     u8    cmd;           
<a name="l00571"></a><a class="code" href="structftAssocReqDirect.html#3f1fb16110e3a78586a8890d28313cec">00571</a>     u16   parentAddr;    
<a name="l00572"></a><a class="code" href="structftAssocReqDirect.html#6d47e8e9b43d159828bb8bad40f6c949">00572</a>     u8    type;          
<a name="l00573"></a>00573 } __attribute__((packed)) <a class="code" href="structftAssocReqDirect.html" title="Direct association request frame, sent by a new node trying to join the nework, to...">ftAssocReqDirect</a>;
<a name="l00576"></a>00576 <span class="comment">// Association request, indirect</span>
<a name="l00577"></a><a class="code" href="structftAssocReqIndirect.html">00577</a> typedef struct{
<a name="l00578"></a><a class="code" href="structftAssocReqIndirect.html#097195f2f03bea89ff0785c6cd9f26bf">00578</a>     <a class="code" href="group__mac.html#gd39dd2f3eb8acad9fa1c008bc4bafbbf" title="The FCF type, which is just a 16-bit integer.">fcf_t</a> fcf;           
<a name="l00579"></a><a class="code" href="structftAssocReqIndirect.html#f32bb1cea4000279198cb562d1b83a8a">00579</a>     u8    seq;           
<a name="l00580"></a><a class="code" href="structftAssocReqIndirect.html#60d8cba8404e5ed8928a7c15ddbcba0d">00580</a>     u16   panid;         
<a name="l00581"></a><a class="code" href="structftAssocReqIndirect.html#47187631bba691eeea075b496f3247c5">00581</a>     u16   destAddr;      
<a name="l00582"></a><a class="code" href="structftAssocReqIndirect.html#f719bf328252d626edd11841015c6b08">00582</a>     u16   srcAddr;       
<a name="l00583"></a><a class="code" href="structftAssocReqIndirect.html#19bdcf798f335040b59a06661dc70006">00583</a>     u8    cmd;           
<a name="l00584"></a><a class="code" href="structftAssocReqIndirect.html#ddb8cdf1327bec57d9ccf168048f638d">00584</a>     u16   parentAddr;    
<a name="l00585"></a><a class="code" href="structftAssocReqIndirect.html#aff17d1efc753cba4145e7a03b08c09e">00585</a>     u64   macAddr;       
<a name="l00586"></a><a class="code" href="structftAssocReqIndirect.html#0ade59e671fb4d9c28470b2b977d1d9a">00586</a>     u8    type;          
<a name="l00587"></a>00587 } __attribute__((packed)) <a class="code" href="structftAssocReqIndirect.html" title="Indirect association request frame, forwarded from a router on up to the coordinator...">ftAssocReqIndirect</a>;
<a name="l00590"></a>00590 <span class="comment">// Association response, direct</span>
<a name="l00591"></a><a class="code" href="structftAssocRespDirect.html">00591</a> typedef struct{
<a name="l00592"></a><a class="code" href="structftAssocRespDirect.html#9828594de45905f57a0fb207b8513a23">00592</a>     <a class="code" href="group__mac.html#gd39dd2f3eb8acad9fa1c008bc4bafbbf" title="The FCF type, which is just a 16-bit integer.">fcf_t</a> fcf;           
<a name="l00593"></a><a class="code" href="structftAssocRespDirect.html#78289360ff2be58f18c957702788f69c">00593</a>     u8    seq;           
<a name="l00594"></a><a class="code" href="structftAssocRespDirect.html#91a85ae39b82cde37382a94c15560b8d">00594</a>     u16   panid;         
<a name="l00595"></a><a class="code" href="structftAssocRespDirect.html#e41ca473a0e1149621592a7c5945af7a">00595</a>     u64   dstAddr;       
<a name="l00596"></a><a class="code" href="structftAssocRespDirect.html#427f736866eb04591dcc02f17d8b5019">00596</a>     u16   srcAddr;       
<a name="l00597"></a><a class="code" href="structftAssocRespDirect.html#7ae3d32b036eeab65a266f7689b57459">00597</a>     u8    cmd;           
<a name="l00598"></a><a class="code" href="structftAssocRespDirect.html#de48bef764b8c3455bf7395ba46f58ce">00598</a>     u16   shortAddr;     
<a name="l00599"></a>00599 } __attribute__((packed)) <a class="code" href="structftAssocRespDirect.html" title="Direct association response frame, sent from the new parent (coordinator or router)...">ftAssocRespDirect</a>;
<a name="l00602"></a>00602 <span class="comment">// Association response, indirect</span>
<a name="l00603"></a><a class="code" href="structftAssocRespIndirect.html">00603</a> typedef struct{
<a name="l00604"></a><a class="code" href="structftAssocRespIndirect.html#aa524651f8abf5c757c249ffa5f4ab37">00604</a>     <a class="code" href="group__mac.html#gd39dd2f3eb8acad9fa1c008bc4bafbbf" title="The FCF type, which is just a 16-bit integer.">fcf_t</a> fcf;           
<a name="l00605"></a><a class="code" href="structftAssocRespIndirect.html#c179af5daf5e38bd37331975e0a4c499">00605</a>     u8    seq;           
<a name="l00606"></a><a class="code" href="structftAssocRespIndirect.html#4a8bb1afc4cb1de8f2347b6877672168">00606</a>     u16   panid;         
<a name="l00607"></a><a class="code" href="structftAssocRespIndirect.html#3f281f5e5b57c09f916681268e865421">00607</a>     u16   dstAddr;       
<a name="l00608"></a><a class="code" href="structftAssocRespIndirect.html#1eee9a8688e3581084a31a0324bf4448">00608</a>     u16   srcAddr;       
<a name="l00609"></a><a class="code" href="structftAssocRespIndirect.html#2d6ff97398e601906a7bb7d7bb774a10">00609</a>     u8    cmd;           
<a name="l00610"></a><a class="code" href="structftAssocRespIndirect.html#b35d58f7cf8feb99c21d1931eaf2e202">00610</a>     u16   parentAddr;    
<a name="l00611"></a><a class="code" href="structftAssocRespIndirect.html#305207d2a4da60c59125150788c0863d">00611</a>     u64   macAddr;       
<a name="l00612"></a><a class="code" href="structftAssocRespIndirect.html#31fce7df621f2703f50367fec4ea07b7">00612</a>     u16   shortAddr;     
<a name="l00613"></a>00613 } __attribute__((packed)) <a class="code" href="structftAssocRespIndirect.html" title="Indirect association response frame, sent from the coordinator and (possibly) forwarded...">ftAssocRespIndirect</a>;
<a name="l00616"></a>00616 <span class="comment">// Routing packet</span>
<a name="l00617"></a><a class="code" href="structftRouting.html">00617</a> typedef struct{
<a name="l00618"></a><a class="code" href="structftRouting.html#327cea1b90eb5b8a4b87d740b7b0d133">00618</a>     <a class="code" href="group__mac.html#gd39dd2f3eb8acad9fa1c008bc4bafbbf" title="The FCF type, which is just a 16-bit integer.">fcf_t</a> fcf;           
<a name="l00619"></a><a class="code" href="structftRouting.html#49bd4f680bc2960eda8eec459fb70467">00619</a>     u8    seq;           
<a name="l00620"></a><a class="code" href="structftRouting.html#9f215bd4212fe269473dfd16d57a78fc">00620</a>     u16   panid;         
<a name="l00621"></a><a class="code" href="structftRouting.html#22158de9096a1a35361e33d6ab6685b6">00621</a>     u16   destAddr;      
<a name="l00622"></a><a class="code" href="structftRouting.html#178b8337f5bf13af0e2fa8df398ccc34">00622</a>     u16   srcAddr;       
<a name="l00623"></a><a class="code" href="structftRouting.html#573b8f21b52ef3e6b045c389a9e8904a">00623</a>     u8    cmd;           
<a name="l00624"></a><a class="code" href="structftRouting.html#cb69197a8e661b50d8c4681972b13f90">00624</a>     u16   shortAddr;     
<a name="l00625"></a>00625 } __attribute__((packed))<a class="code" href="structftRouting.html" title="Routing packet, sent by the coordinator and forwarded down a single path of routers...">ftRouting</a>;
<a name="l00628"></a>00628 <span class="comment">// Data packet</span>
<a name="l00629"></a><a class="code" href="structftData.html">00629</a> typedef struct{
<a name="l00630"></a><a class="code" href="structftData.html#0a2bcd887bd17c00b474df1e2d0ac9ae">00630</a>     <a class="code" href="group__mac.html#gd39dd2f3eb8acad9fa1c008bc4bafbbf" title="The FCF type, which is just a 16-bit integer.">fcf_t</a> fcf;           
<a name="l00631"></a><a class="code" href="structftData.html#49dea86dab7c99aacbfd89cb8b7a271c">00631</a>     u8    seq;           
<a name="l00632"></a><a class="code" href="structftData.html#c5d58a8af2b11491cdb90457fbb4169d">00632</a>     u16   panid;         
<a name="l00633"></a><a class="code" href="structftData.html#5e15ea770e8c891e8cf64c7f2bb307b9">00633</a>     u16   destAddr;      
<a name="l00634"></a><a class="code" href="structftData.html#5c7461f9411b7fa5e9389c1de167ea38">00634</a>     u16   srcAddr;       
<a name="l00635"></a><a class="code" href="structftData.html#d47ec2a56c800526476b1c2dfd89954d">00635</a>     u16   finalDestAddr; 
<a name="l00636"></a><a class="code" href="structftData.html#f5fcb364554d2473ca8f7e1d241ed09a">00636</a>     u16   originAddr;    
<a name="l00637"></a><a class="code" href="structftData.html#df2871ec6a3e63416a808a43875a5aba">00637</a>     u8    type;          
<a name="l00638"></a><a class="code" href="structftData.html#69fa938da0dcef059d9f37f396bd1440">00638</a>     u8    payload[113];  
<a name="l00639"></a>00639 } __attribute__((packed)) <a class="code" href="structftData.html" title="Data packet, used for data and some MAC functions (see type element).">ftData</a>;
<a name="l00643"></a>00643 <span class="comment">// Drop child notification packet</span>
<a name="l00644"></a><a class="code" href="structftDropChild.html">00644</a> typedef struct{
<a name="l00645"></a><a class="code" href="structftDropChild.html#a1354bbe845fbb0243fac234ef2ec049">00645</a>     <a class="code" href="group__mac.html#gd39dd2f3eb8acad9fa1c008bc4bafbbf" title="The FCF type, which is just a 16-bit integer.">fcf_t</a> fcf;           
<a name="l00646"></a><a class="code" href="structftDropChild.html#bb2f9536fe3af7add9f6c0e3ab35b612">00646</a>     u8    seq;           
<a name="l00647"></a><a class="code" href="structftDropChild.html#dd770e75f81a82231494669bb1b9cde1">00647</a>     u16   panid;         
<a name="l00648"></a><a class="code" href="structftDropChild.html#077f4373cfb3b95ae70a73e2449bf72b">00648</a>     u16   destAddr;      
<a name="l00649"></a><a class="code" href="structftDropChild.html#466e40259ae38fc5adf0ffa40f96cef3">00649</a>     u16   srcAddr;       
<a name="l00650"></a><a class="code" href="structftDropChild.html#f958a1c4562a028f73ea5b0104a363ff">00650</a>     u16   finalDestAddr; 
<a name="l00651"></a><a class="code" href="structftDropChild.html#ea8451c00578c983265fb4118489fdfb">00651</a>     u16   originAddr;    
<a name="l00652"></a><a class="code" href="structftDropChild.html#811705ee0a131c0165200d20708a436d">00652</a>     u8    type;          
<a name="l00653"></a><a class="code" href="structftDropChild.html#8711f1e3fe80d3fea7e0f106153345c2">00653</a>     u16   childAddr;     
<a name="l00654"></a>00654 } __attribute__((packed)) <a class="code" href="structftDropChild.html" title="Frame used to notify a router that one of its children has re-associated with a new...">ftDropChild</a>;
<a name="l00658"></a>00658 <span class="comment">// Ping packet</span>
<a name="l00659"></a><a class="code" href="structftPing.html">00659</a> typedef struct{
<a name="l00660"></a><a class="code" href="structftPing.html#b9035ccb51f177500b528717c16b147c">00660</a>     <a class="code" href="group__mac.html#gd39dd2f3eb8acad9fa1c008bc4bafbbf" title="The FCF type, which is just a 16-bit integer.">fcf_t</a> fcf;           
<a name="l00661"></a><a class="code" href="structftPing.html#9cbb0d45033c6fc7400d45317785229f">00661</a>     u8    seq;           
<a name="l00662"></a><a class="code" href="structftPing.html#1938f00a855c76732521adddb5853ed9">00662</a>     u16   panid;         
<a name="l00663"></a><a class="code" href="structftPing.html#5365abe99a2faf07360bb39e8d338fb0">00663</a>     u16   destAddr;      
<a name="l00664"></a><a class="code" href="structftPing.html#d994e240a3f38afe021c1a007a5c01c2">00664</a>     u16   srcAddr;       
<a name="l00665"></a><a class="code" href="structftPing.html#e742c2eba3c6c391faec29d78adbf9d6">00665</a>     u16   finalDestAddr; 
<a name="l00666"></a><a class="code" href="structftPing.html#74fbf3d545f846fe611906c6ca8f004f">00666</a>     u16   originAddr;    
<a name="l00667"></a><a class="code" href="structftPing.html#ccf61068ebb7332d8b22869e0a10851e">00667</a>     u8    type;          
<a name="l00668"></a>00668     u8    rssi;
<a name="l00669"></a>00669     u8    lqi;
<a name="l00670"></a>00670 } __attribute__((packed)) <a class="code" href="structftPing.html" title="Frame used to ping one node from another node.">ftPing</a>;
<a name="l00674"></a><a class="code" href="structftWake.html">00674</a> typedef struct{
<a name="l00675"></a><a class="code" href="structftWake.html#85760060d74acebba7af850242fe3ba7">00675</a>     <a class="code" href="group__mac.html#gd39dd2f3eb8acad9fa1c008bc4bafbbf" title="The FCF type, which is just a 16-bit integer.">fcf_t</a> fcf;           
<a name="l00676"></a><a class="code" href="structftWake.html#9262730b6b877591cb01a0e19941db6e">00676</a>     u8    seq;           
<a name="l00677"></a><a class="code" href="structftWake.html#fcacbcef4667c6d3825b8cd4fcb7f2a6">00677</a>     u16   panid;         
<a name="l00678"></a><a class="code" href="structftWake.html#ab4285c7fef84e55c712ad27e7e7a233">00678</a>     u16   destAddr;      
<a name="l00679"></a><a class="code" href="structftWake.html#50a4523bcb6a933fa8618297e83f9816">00679</a>     u16   srcAddr;       
<a name="l00680"></a><a class="code" href="structftWake.html#bd185beac9a372d0874961123bee10e5">00680</a>     u16   finalDestAddr; 
<a name="l00681"></a><a class="code" href="structftWake.html#857e5ee26758b840ef35e70edad3d00d">00681</a>     u16   originAddr;    
<a name="l00682"></a><a class="code" href="structftWake.html#734fa91dd878a88d7074b51b98658348">00682</a>     u8    type;          
<a name="l00683"></a><a class="code" href="structftWake.html#d6a7d8a599e903fd7414c9c9d9f6c418">00683</a>     u16   addr;          
<a name="l00684"></a>00684 } __attribute__((packed)) <a class="code" href="structftWake.html" title="Wake a child node.">ftWake</a>;
<a name="l00685"></a>00685 
<a name="l00686"></a>00686 
<a name="l00687"></a>00687 <span class="comment">// MAC configuration stuff</span>
<a name="l00688"></a>00688 
<a name="l00693"></a><a class="code" href="structmacConfig__t.html">00693</a> typedef struct{
<a name="l00694"></a><a class="code" href="structmacConfig__t.html#7d51df5f7f61e72d42e006e9ca6cf8ce">00694</a>     u64 longAddr;           
<a name="l00695"></a><a class="code" href="structmacConfig__t.html#b90d9d43eb3ae9d98e9cd556272bf464">00695</a>     <span class="keywordtype">bool</span> associated;        
<a name="l00696"></a><a class="code" href="structmacConfig__t.html#9750cc2733253feb73398e68dd1fa0cb">00696</a>     uint8_t bsn;            
<a name="l00697"></a><a class="code" href="structmacConfig__t.html#fb9014afdb5667d061457b1720a4d512">00697</a>     u8 dsn;                 
<a name="l00698"></a><a class="code" href="structmacConfig__t.html#0661aa4bcc924815144446db68168a1f">00698</a>     u16 panId;              
<a name="l00699"></a><a class="code" href="structmacConfig__t.html#410a3539e6e06a2192ef87dfe7ae7424">00699</a>     u16 shortAddress;       
<a name="l00700"></a><a class="code" href="structmacConfig__t.html#8746018dfd92c5ea8b5dcd12e89dd767">00700</a>     u16 parentShortAddress; 
<a name="l00701"></a><a class="code" href="structmacConfig__t.html#ec94dfe288c1f08ea35cdfb34cc518a0">00701</a>     u16 lastRoute;          
<a name="l00702"></a><a class="code" href="structmacConfig__t.html#33aa707181985abbf83a6bcaa8537009">00702</a>     u8 hopsToCoord;         
<a name="l00703"></a><a class="code" href="structmacConfig__t.html#b18607f3692130bb3da0510749eaeb78">00703</a>     u8 currentChannel;      
<a name="l00704"></a><a class="code" href="structmacConfig__t.html#76d4f685b3d22a842626cb2a1542d912">00704</a>     u16 lastDestAddr;       
<a name="l00705"></a><a class="code" href="structmacConfig__t.html#41e5b4ad93b57a3da564efa92e72a909">00705</a>     u8 busy;                
<a name="l00706"></a><a class="code" href="structmacConfig__t.html#819485fcff6bed40db9350e584b3fa15">00706</a>     u8 sleeping;            
<a name="l00707"></a>00707 } __attribute__((packed)) <a class="code" href="structmacConfig__t.html" title="Structure to hold config information for the MAC and for this node.">macConfig_t</a>;
<a name="l00708"></a>00708  <span class="comment">// ingroup mac</span>
<a name="l00710"></a>00710 
<a name="l00711"></a>00711 <span class="comment">// Globals</span>
<a name="l00712"></a>00712 extern macConfig_t <a class="code" href="group__mac.html#g495ae4288ec139138c9ca2b8de136245" title="MAC config struct, contains state info for the MAC.">macConfig</a>;
<a name="l00713"></a>00713 extern u8 <a class="code" href="group__mac.html#g1773cb730c85757b4c51da29304072e1" title="A global buffer to hold frames.">mac_buffer_tx</a>[sizeof(rx_frame_t)];  <span class="comment">// Main global MAC buffer (transmit)</span>
<a name="l00714"></a>00714 extern u8 <a class="code" href="group__mac.html#gfeaf8ffad6487abe7551f66403cf4bae" title="Global MAC buffer (receive).">mac_buffer_rx</a>[sizeof(rx_frame_t)];  <span class="comment">// Main global MAC buffer (receive)</span>
<a name="l00715"></a>00715 
<a name="l00716"></a>00716 <span class="preprocessor">#define macCopyRxToTx() memcpy(mac_buffer_tx, mac_buffer_rx, sizeof(rx_frame_t))</span>
<a name="l00717"></a>00717 <span class="preprocessor"></span>
<a name="l00718"></a>00718 
<a name="l00719"></a>00719 <span class="comment">// Protoypes</span>
<a name="l00720"></a>00720 <span class="keywordtype">void</span> sendBeaconFrame(<span class="keywordtype">void</span>);
<a name="l00721"></a>00721 <span class="keywordtype">void</span> <a class="code" href="group__mac.html#g62d975ef98590e2c23229df7b6d041c6" title="Set the radio&amp;#39;s operating channel, and saves that channel to the MAC&amp;#39;s global...">macSetOperatingChannel</a>(u8 channel);
<a name="l00722"></a>00722 <span class="keywordtype">void</span> <a class="code" href="group__mac__data.html#gc8f2b1deacaaad9352836e428b4bca15" title="Send an other-the-air (OTA) debug frame.">macOtaDebugRequest</a>(u8 *str);
<a name="l00723"></a>00723 <span class="preprocessor">#endif</span>
<a name="l00724"></a>00724 <span class="preprocessor"></span>
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Jun 8 18:38:19 2009 for RUM by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
