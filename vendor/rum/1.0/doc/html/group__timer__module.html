<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>RUM: Timer module</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Timer module</h1>
<p>
<div class="dynheader">
Collaboration diagram for Timer module:</div>
<div class="dynsection">
<center><table><tr><td><img src="group__timer__module.png" border="0" alt="" usemap="#group____timer____module_map">
<map name="group____timer____module_map">
<area shape="rect" href="group__arm.html" title="This section contains all of documentation of the ARM&#45;specific parts of RUM." alt="" coords="211,5,448,32"></map></td></tr></table></center>
</div>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This module implements a user-friendly timer interface. 
<p>
The basic functionality is to set alarm events that cause a function to be called after a delay. See <a class="el" href="group__timer__module.html#g0155e5192956b3cd498751d8652f7773" title="Sets a general purpose timer.">macSetAlarm()</a><p>
This timer is a general-purpose timing function, to be used by application code.<p>
To use the timer, call <a class="el" href="group__timer__module.html#g1cabbdb02f36420b24c4ccd132972080" title="Initialize the MAC timer.">timerInit()</a> once at program startup. To set a timer, call the <a class="el" href="group__timer__module.html#g0155e5192956b3cd498751d8652f7773" title="Sets a general purpose timer.">macSetAlarm()</a> function, which will cause a callback to occur after the specified time.<p>
For example, to cause an LED to flash momentarily, one could write:<p>
<div class="fragment"><pre class="fragment">   <span class="keywordtype">void</span> <a class="code" href="group__app.html#g78d443dcea1d0895bf7bd56b5b56c841" title="This will toggle the led of choice off.">ledOff</a>(<span class="keywordtype">void</span>)
   {
       LED_OFF();  <span class="comment">// Macro to turn off LED</span>
   }

   <span class="keywordtype">void</span> flashLed(<span class="keywordtype">void</span>)
   {
       LED_ON();   <span class="comment">// Macro to turn on LED</span>
       <a class="code" href="group__timer__module.html#g0155e5192956b3cd498751d8652f7773" title="Sets a general purpose timer.">macSetAlarm</a>(100, <a class="code" href="group__app.html#g78d443dcea1d0895bf7bd56b5b56c841" title="This will toggle the led of choice off.">ledOff</a>);  <span class="comment">// In 100mS, call ledOff()</span>
   }
</pre></div><p>
Essentially, the macSetAlarm functions simply set a timer to call an arbitrary function after some time delay. Note that the time delay is not a "spin loop", so that other processing can occur while the timer is waiting to expire.<p>
There is a limit to how many pending events can be stored. Adjust <a class="el" href="group__timer__module.html#g2b601eac197f76f0cb3adf32c7ea36e8">TIMER_EVENTS_MAX</a> in necessary. 
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtimerEventT.html">timerEventT</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Structure to hold active timers.  <a href="structtimerEventT.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Tick Timer Macros</h2></td></tr>
<tr><td colspan="2">For the macAlarm timer. <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__module.html#g767c39c94ad6c09c58e46e11a59cfddb">TIMER_INIT</a>()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets timer Prescaler to 8, sets timer output compare register init the timer to run all the time.  <a href="#g767c39c94ad6c09c58e46e11a59cfddb"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__module.html#g60aaa462d74d37f61acea7efffab0cf1">TIMER_CLEAR</a>()&nbsp;&nbsp;&nbsp;(TCNT(TICKTIMER) = 0)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stops the timer for sleep.  <a href="#g60aaa462d74d37f61acea7efffab0cf1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="g71d90be4cd19a6bb92b253bb6bc09739"></a><!-- doxytag: member="timer_module::TIMER_ENABLE" ref="g71d90be4cd19a6bb92b253bb6bc09739" args="()" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__module.html#g71d90be4cd19a6bb92b253bb6bc09739">TIMER_ENABLE</a>()&nbsp;&nbsp;&nbsp;(TIMSK(TICKTIMER) = (1 &lt;&lt; OCIE(TICKTIMER,A)))</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enable the timer to run. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="g8055a02ef3688352212e0dba357905b3"></a><!-- doxytag: member="timer_module::TIMER_STOP" ref="g8055a02ef3688352212e0dba357905b3" args="()" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__module.html#g8055a02ef3688352212e0dba357905b3">TIMER_STOP</a>()&nbsp;&nbsp;&nbsp;(TIMSK(TICKTIMER) &amp;= ~(1 &lt;&lt; OCIE(TICKTIMER,A)))</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stop the timer. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ge16df0c9845f8bd5036ed3d8e0ad90ba"></a><!-- doxytag: member="timer_module::TICKVECT" ref="ge16df0c9845f8bd5036ed3d8e0ad90ba" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__module.html#ge16df0c9845f8bd5036ed3d8e0ad90ba">TICKVECT</a>&nbsp;&nbsp;&nbsp;COMPVECT(TICKTIMER)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Tick timer ISR vector function. <br></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="g2b601eac197f76f0cb3adf32c7ea36e8"></a><!-- doxytag: member="timer_module::TIMER_EVENTS_MAX" ref="g2b601eac197f76f0cb3adf32c7ea36e8" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__module.html#g2b601eac197f76f0cb3adf32c7ea36e8">TIMER_EVENTS_MAX</a>&nbsp;&nbsp;&nbsp;10</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The maximum number of pending timer events. Adjust as necessary. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__module.html#ge4e5a530999557f9d2687e40e8e8a7e1">MS_PER_TICK</a>&nbsp;&nbsp;&nbsp;(1)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Microseconds per tick of the timer.  <a href="#ge4e5a530999557f9d2687e40e8e8a7e1"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="g55bef38a083b7a6478dd60c6668f3434"></a><!-- doxytag: member="timer_module::timerStart" ref="g55bef38a083b7a6478dd60c6668f3434" args="(void)" -->
static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__module.html#g55bef38a083b7a6478dd60c6668f3434">timerStart</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Start the hardware timer running. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static u8&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__module.html#g8ad2d7780b4815433b88ee56afa2830c">getUniqueID</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns a unique timer ID.  <a href="#g8ad2d7780b4815433b88ee56afa2830c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">u16&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__module.html#ga2ba6a5f4d933213f7046c8c90108551">macGetTime</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">u8&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__module.html#g0155e5192956b3cd498751d8652f7773">macSetAlarm</a> (u16 time, void(*callback)(void))</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets a general purpose timer.  <a href="#g0155e5192956b3cd498751d8652f7773"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">u8&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__module.html#g8cccbbd337a60847f767aaca9da9743e">macSetLongAlarm</a> (u16 seconds, void(*callback)(void))</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A long-delay timer function, which can delay for up to 15.7 hours.  <a href="#g8cccbbd337a60847f767aaca9da9743e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__module.html#g424100b5b43a9d709cec3d509ef6f48c">macTimerEnd</a> (u8 timerID)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">End the timer specified by ID, before it is expired.  <a href="#g424100b5b43a9d709cec3d509ef6f48c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__module.html#g1cabbdb02f36420b24c4ccd132972080">timerInit</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize the MAC timer.  <a href="#g1cabbdb02f36420b24c4ccd132972080"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="g800f089cbaa4c65dfeb564e29d01ea0a"></a><!-- doxytag: member="timer_module::ISR" ref="g800f089cbaa4c65dfeb564e29d01ea0a" args="(TICKVECT)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__module.html#g800f089cbaa4c65dfeb564e29d01ea0a">ISR</a> (TICKVECT)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Timer interrupt service routine. <br></td></tr>
<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="g9f88dcfc4d91f4413be5e1e197477734"></a><!-- doxytag: member="timer_module::timerEvents" ref="g9f88dcfc4d91f4413be5e1e197477734" args="[10]" -->
static <a class="el" href="structtimerEventT.html">timerEventT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__module.html#g9f88dcfc4d91f4413be5e1e197477734">timerEvents</a> [10]</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Array of timer event structures. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="gbd7619700979bd61ddd5c1f2c04582aa"></a><!-- doxytag: member="timer_module::longTimerEvents" ref="gbd7619700979bd61ddd5c1f2c04582aa" args="[3 *(APP||IPV6LOWPAN)]" -->
static <a class="el" href="structtimerEventT.html">timerEventT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer__module.html#gbd7619700979bd61ddd5c1f2c04582aa">longTimerEvents</a> [3 *(APP||IPV6LOWPAN)]</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Array of long-time timer event structures. <br></td></tr>
</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="ge4e5a530999557f9d2687e40e8e8a7e1"></a><!-- doxytag: member="avr_timer.h::MS_PER_TICK" ref="ge4e5a530999557f9d2687e40e8e8a7e1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MS_PER_TICK&nbsp;&nbsp;&nbsp;(1)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Microseconds per tick of the timer. 
<p>
Adjust if the timer settings change. Note that this number must divide cleanly into 1000 for macSetAlarm to work. 
<p>Definition at line <a class="el" href="avr__timer_8h-source.html#l00067">67</a> of file <a class="el" href="avr__timer_8h-source.html">avr_timer.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="g60aaa462d74d37f61acea7efffab0cf1"></a><!-- doxytag: member="avr_timer.h::TIMER_CLEAR" ref="g60aaa462d74d37f61acea7efffab0cf1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TIMER_CLEAR          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(TCNT(TICKTIMER) = 0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Stops the timer for sleep. 
<p>
Clear the timer count to zero 
<p>Definition at line <a class="el" href="avr__timer_8h-source.html#l00084">84</a> of file <a class="el" href="avr__timer_8h-source.html">avr_timer.h</a>.</p>

<p>Referenced by <a class="el" href="avr__timer_8c-source.html#l00332">timerStart()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g767c39c94ad6c09c58e46e11a59cfddb"></a><!-- doxytag: member="avr_timer.h::TIMER_INIT" ref="g767c39c94ad6c09c58e46e11a59cfddb" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TIMER_INIT          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment">TCCR(<a class="code" href="group__radio.html#ge7ff74fc78d9794099d3857cca7bdf1f" title="AVR timer used for tick timing.">TICKTIMER</a>,B) |= (1 &lt;&lt; CS(<a class="code" href="group__radio.html#ge7ff74fc78d9794099d3857cca7bdf1f" title="AVR timer used for tick timing.">TICKTIMER</a>,1)) |  \
        (1 &lt;&lt; WGM(<a class="code" href="group__radio.html#ge7ff74fc78d9794099d3857cca7bdf1f" title="AVR timer used for tick timing.">TICKTIMER</a>,2)), OCR(<a class="code" href="group__radio.html#ge7ff74fc78d9794099d3857cca7bdf1f" title="AVR timer used for tick timing.">TICKTIMER</a>,A) = (<a class="code" href="group__arm.html#ge4e5a530999557f9d2687e40e8e8a7e1" title="Milliseconds per tick of the timer.">MS_PER_TICK</a> * 1000 /\
                                                     (8000000UL/F_CPU))
</pre></div>Sets timer Prescaler to 8, sets timer output compare register init the timer to run all the time. 
<p>

<p>Definition at line <a class="el" href="avr__timer_8h-source.html#l00078">78</a> of file <a class="el" href="avr__timer_8h-source.html">avr_timer.h</a>.</p>

<p>Referenced by <a class="el" href="avr__timer_8c-source.html#l00320">timerInit()</a>.</p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="g8ad2d7780b4815433b88ee56afa2830c"></a><!-- doxytag: member="avr_timer.c::getUniqueID" ref="g8ad2d7780b4815433b88ee56afa2830c" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static u8 getUniqueID           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns a unique timer ID. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The unique ID. </dd></dl>

<p>Definition at line <a class="el" href="avr__timer_8c-source.html#l00248">248</a> of file <a class="el" href="avr__timer_8c-source.html">avr_timer.c</a>.</p>

<p>References <a class="el" href="system_8h-source.html#l00533">IPV6LOWPAN</a>, and <a class="el" href="avr__timer_8c-source.html#l00102">longTimerEvents</a>.</p>

</div>
</div><p>
<a class="anchor" name="ga2ba6a5f4d933213f7046c8c90108551"></a><!-- doxytag: member="avr_timer.c::macGetTime" ref="ga2ba6a5f4d933213f7046c8c90108551" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u16 macGetTime           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the time, in mS. Note this time is in the range 0 - 65535 milliseconds, and the time overflows every 65 seconds! </dd></dl>

<p>Definition at line <a class="el" href="avr__timer_8c-source.html#l00133">133</a> of file <a class="el" href="avr__timer_8c-source.html">avr_timer.c</a>.</p>

<p>References <a class="el" href="hal__avr_8h-source.html#l00723">AVR_ENTER_CRITICAL_REGION</a>, and <a class="el" href="hal__avr_8h-source.html#l00727">AVR_LEAVE_CRITICAL_REGION</a>.</p>

<p>Referenced by <a class="el" href="avr__sixlowpan__application_8c-source.html#l00896">sixlowpan_button()</a>, <a class="el" href="avr__sixlowpan__application_8c-source.html#l00138">sixlowpan_ping_usercall()</a>, <a class="el" href="avr__sixlowpan__application_8c-source.html#l00161">sixlowpan_udp_usercall()</a>, and <a class="el" href="sixlowpan__wake_8c-source.html#l00314">sixlowpanSleep_activity()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g0155e5192956b3cd498751d8652f7773"></a><!-- doxytag: member="avr_timer.c::macSetAlarm" ref="g0155e5192956b3cd498751d8652f7773" args="(u16 time, void(*callback)(void))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u8 macSetAlarm           </td>
          <td>(</td>
          <td class="paramtype">u16&nbsp;</td>
          <td class="paramname"> <em>time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(void)&nbsp;</td>
          <td class="paramname"> <em>callback</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sets a general purpose timer. 
<p>
Can be called by application. The callback will not be called from the timer ISR, so it is thread-safe.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>time</em>&nbsp;</td><td>Number of milliseconds to wait before calling the callback function. This parameter can be 0-65535</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>callback</em>&nbsp;</td><td>Pointer to a function to call back after the specified time. The callback function must take no arguments and return nothing.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Handle to timer. Can be used to call <a class="el" href="group__timer__module.html#g424100b5b43a9d709cec3d509ef6f48c" title="End the timer specified by ID, before it is expired.">macTimerEnd()</a>. </dd></dl>

<p>Definition at line <a class="el" href="avr__timer_8c-source.html#l00158">158</a> of file <a class="el" href="avr__timer_8c-source.html">avr_timer.c</a>.</p>

<p>References <a class="el" href="hal__avr_8h-source.html#l00723">AVR_ENTER_CRITICAL_REGION</a>, <a class="el" href="hal__avr_8h-source.html#l00727">AVR_LEAVE_CRITICAL_REGION</a>, <a class="el" href="structtimerEventT.html#e3d4661fd191eb8910aa09649f926050">timerEventT::callback</a>, <a class="el" href="arm__timer_8c-source.html#l00128">getUniqueID()</a>, <a class="el" href="arm__timer_8c-source.html#l00048">timerEventT::time</a>, <a class="el" href="avr__timer_8c-source.html#l00090">timerEventT::timerID</a>, and <a class="el" href="avr__timer_8c-source.html#l00332">timerStart()</a>.</p>

<p>Referenced by <a class="el" href="rum__application_8c-source.html#l00828">allNodes()</a>, <a class="el" href="rum__application_8c-source.html#l00555">appAssociateConfirm()</a>, <a class="el" href="rum__application_8c-source.html#l00530">appChildAssociated()</a>, <a class="el" href="rum__application_8c-source.html#l00468">appDataIndication()</a>, <a class="el" href="rum__application_8c-source.html#l00309">appPacketSendFailed()</a>, <a class="el" href="rum__application_8c-source.html#l00210">appPingReq()</a>, <a class="el" href="rum__application_8c-source.html#l00234">appPingRsp()</a>, <a class="el" href="rum__application_8c-source.html#l00632">appScanConfirm()</a>, <a class="el" href="rum__application_8c-source.html#l00447">appSendDataFrame()</a>, <a class="el" href="rum__application_8c-source.html#l00932">appTask()</a>, <a class="el" href="rum__application_8c-source.html#l00803">doPing()</a>, <a class="el" href="mac__scan_8c-source.html#l00380">energyScanCallback()</a>, <a class="el" href="mac__associate_8c-source.html#l00107">macAssociate()</a>, <a class="el" href="mac__associate_8c-source.html#l00175">macAssociationResponse()</a>, <a class="el" href="mac__data_8c-source.html#l00111">macDataRequestInt()</a>, <a class="el" href="mac__associate_8c-source.html#l01059">macNotifyDrop()</a>, <a class="el" href="mac__data_8c-source.html#l00407">macPing()</a>, <a class="el" href="mac__route_8c-source.html#l00225">macRouteData()</a>, <a class="el" href="mac__scan_8c-source.html#l00193">macScan()</a>, <a class="el" href="mac__event_8c-source.html#l00141">macTask()</a>, <a class="el" href="sensors_8c-source.html#l00390">sensorAutoSendStart()</a>, <a class="el" href="sensors_8c-source.html#l00586">sensorCalProcess()</a>, <a class="el" href="sensors_8c-source.html#l00941">sensorPacketSendFailed()</a>, <a class="el" href="sensors_8c-source.html#l00894">sensorPacketSendSucceed()</a>, <a class="el" href="sensors_8c-source.html#l00976">sensorSendReading()</a>, <a class="el" href="avr__sixlowpan__application_8c-source.html#l00687">sixlowpan_application_periodic()</a>, <a class="el" href="avr__sixlowpan_8c-source.html#l00172">sixlowpan_hc01_process()</a>, <a class="el" href="avr__sixlowpan__application_8c-source.html#l00616">sixlowpan_tftpData()</a>, <a class="el" href="sixlowpan__wake_8c-source.html#l00371">sixlowpanSleep_checkSleep()</a>, <a class="el" href="sixlowpan__wake_8c-source.html#l00346">sixlowpanSleep_periodic()</a>, and <a class="el" href="sixlowpan__wake_8c-source.html#l00401">sixlowpanSleep_setupPeriodic()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="group__timer__module_g0155e5192956b3cd498751d8652f7773_cgraph.png" border="0" usemap="#group__timer__module_g0155e5192956b3cd498751d8652f7773_cgraph_map" alt=""></center>
<map name="group__timer__module_g0155e5192956b3cd498751d8652f7773_cgraph_map">
<area shape="rect" href="group__arm.html#g8ad2d7780b4815433b88ee56afa2830c" title="Returns a unique timer ID." alt="" coords="156,5,247,32"><area shape="rect" href="group__timer__module.html#g55bef38a083b7a6478dd60c6668f3434" title="Start the hardware timer running." alt="" coords="163,56,240,83"></map>
</div>

</div>
</div><p>
<a class="anchor" name="g8cccbbd337a60847f767aaca9da9743e"></a><!-- doxytag: member="avr_timer.c::macSetLongAlarm" ref="g8cccbbd337a60847f767aaca9da9743e" args="(u16 seconds, void(*callback)(void))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u8 macSetLongAlarm           </td>
          <td>(</td>
          <td class="paramtype">u16&nbsp;</td>
          <td class="paramname"> <em>seconds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(void)&nbsp;</td>
          <td class="paramname"> <em>callback</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A long-delay timer function, which can delay for up to 15.7 hours. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Handle to timer. Can be used to call <a class="el" href="group__timer__module.html#g424100b5b43a9d709cec3d509ef6f48c" title="End the timer specified by ID, before it is expired.">macTimerEnd()</a>. </dd></dl>

<p>Definition at line <a class="el" href="avr__timer_8c-source.html#l00204">204</a> of file <a class="el" href="avr__timer_8c-source.html">avr_timer.c</a>.</p>

<p>References <a class="el" href="hal__avr_8h-source.html#l00723">AVR_ENTER_CRITICAL_REGION</a>, <a class="el" href="hal__avr_8h-source.html#l00727">AVR_LEAVE_CRITICAL_REGION</a>, <a class="el" href="structtimerEventT.html#e3d4661fd191eb8910aa09649f926050">timerEventT::callback</a>, <a class="el" href="arm__timer_8c-source.html#l00128">getUniqueID()</a>, <a class="el" href="system_8h-source.html#l00533">IPV6LOWPAN</a>, <a class="el" href="avr__timer_8c-source.html#l00102">longTimerEvents</a>, <a class="el" href="arm__timer_8c-source.html#l00048">timerEventT::time</a>, <a class="el" href="avr__timer_8c-source.html#l00090">timerEventT::timerID</a>, and <a class="el" href="avr__timer_8c-source.html#l00332">timerStart()</a>.</p>

<p>Referenced by <a class="el" href="sensors_8c-source.html#l00894">sensorPacketSendSucceed()</a>, and <a class="el" href="sixlowpan__wake_8c-source.html#l00401">sixlowpanSleep_setupPeriodic()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="group__timer__module_g8cccbbd337a60847f767aaca9da9743e_cgraph.png" border="0" usemap="#group__timer__module_g8cccbbd337a60847f767aaca9da9743e_cgraph_map" alt=""></center>
<map name="group__timer__module_g8cccbbd337a60847f767aaca9da9743e_cgraph_map">
<area shape="rect" href="group__arm.html#g8ad2d7780b4815433b88ee56afa2830c" title="Returns a unique timer ID." alt="" coords="183,5,273,32"><area shape="rect" href="group__timer__module.html#g55bef38a083b7a6478dd60c6668f3434" title="Start the hardware timer running." alt="" coords="189,56,267,83"></map>
</div>

</div>
</div><p>
<a class="anchor" name="g424100b5b43a9d709cec3d509ef6f48c"></a><!-- doxytag: member="avr_timer.c::macTimerEnd" ref="g424100b5b43a9d709cec3d509ef6f48c" args="(u8 timerID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void macTimerEnd           </td>
          <td>(</td>
          <td class="paramtype">u8&nbsp;</td>
          <td class="paramname"> <em>timerID</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
End the timer specified by ID, before it is expired. 
<p>
Calling after expiration will not cause any problem, unless a new timer has been sept.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>timerID</em>&nbsp;</td><td>The value returned from macSetAlarm when the alarm was set. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="avr__timer_8c-source.html#l00287">287</a> of file <a class="el" href="avr__timer_8c-source.html">avr_timer.c</a>.</p>

<p>References <a class="el" href="system_8h-source.html#l00533">IPV6LOWPAN</a>, <a class="el" href="avr__timer_8c-source.html#l00102">longTimerEvents</a>, <a class="el" href="arm__timer_8c-source.html#l00048">timerEventT::time</a>, and <a class="el" href="avr__timer_8c-source.html#l00090">timerEventT::timerID</a>.</p>

<p>Referenced by <a class="el" href="rum__application_8c-source.html#l00932">appTask()</a>, <a class="el" href="mac__associate_8c-source.html#l00147">macAssociationConfirm()</a>, <a class="el" href="sensors_8c-source.html#l00390">sensorAutoSendStart()</a>, <a class="el" href="sensors_8c-source.html#l00941">sensorPacketSendFailed()</a>, <a class="el" href="sensors_8c-source.html#l00894">sensorPacketSendSucceed()</a>, and <a class="el" href="sensors_8c-source.html#l00976">sensorSendReading()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g1cabbdb02f36420b24c4ccd132972080"></a><!-- doxytag: member="avr_timer.c::timerInit" ref="g1cabbdb02f36420b24c4ccd132972080" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void timerInit           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize the MAC timer. 
<p>
Called at powerup, or when you want to clear all timers. Sets the timeout for each tick of the system clock. 
<p>Definition at line <a class="el" href="avr__timer_8c-source.html#l00320">320</a> of file <a class="el" href="avr__timer_8c-source.html">avr_timer.c</a>.</p>

<p>References <a class="el" href="mac_8h-source.html#l00287">ENDDEVICE</a>, <a class="el" href="mac_8h-source.html#l00328">NODETYPE</a>, <a class="el" href="hal__avr_8h-source.html#l00127">TICKTIMER</a>, and <a class="el" href="avr__timer_8h-source.html#l00078">TIMER_INIT</a>.</p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Jun 8 18:38:47 2009 for RUM by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
