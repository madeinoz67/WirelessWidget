<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>RUM: Route Under Mac (RUM)</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Route Under Mac (RUM)</h1>
<p>
<div class="dynheader">
Collaboration diagram for Route Under Mac (RUM):</div>
<div class="dynsection">
<center><table><tr><td><img src="group__mac.png" border="0" alt="" usemap="#group____mac_map">
<map name="group____mac_map">
<area shape="rect" href="group__avr6lowpan.html" title="This (optional) component of RUM adds several interesting features to the RUM stack..." alt="" coords="219,5,443,32"><area shape="rect" href="group__mac__data.html" title="This module includes code for sending and receiving data using the MAC." alt="" coords="263,56,399,83"><area shape="rect" href="group__mac__associate.html" title="This module handles the association of nodes to the network." alt="" coords="271,107,391,133"><area shape="rect" href="group__mac__event.html" title="This module processes events generated by the MAC." alt="" coords="265,157,396,184"><area shape="rect" href="group__mac__scan.html" title="This module provides functions that scan the available channels." alt="" coords="255,208,407,235"></map></td></tr></table></center>
</div>
<hr><a name="_details"></a><h2>Detailed Description</h2>
The RUM MAC is a quasi-compliant 802.15.4 MAC layer. 
<p>
It provides access to basic radio setup functions for channel, power, etc. Also, the MAC provides functions to scan all channels for a coordinator, associate with a coordinator, send packets, and receive packets via callback functions.<h2><a class="anchor" name="frame_format">
Frame formats</a></h2>
For the diagram below, see <a class="el" href="group__mac.html#gfa03324c606f9efe4838b4d2b95fb798">FCF_DATA</a>, <a class="el" href="structftData.html">ftData</a>, and <a class="el" href="structsftSensorReading.html">sftSensorReading</a>.<h3><a class="anchor" name="dataframe">
Data Frame</a></h3>
This is the format for a data frame, but the format is similar to most other frames.<p>
<div class="fragment"><pre class="fragment">
fcf  seq panID dest src  finalDest originAddr type appType
6188 34  babe  0000 0001   0000      0001      xx    yy
  |   |   |      |    |      |         |        |     |
  |   |   |      |    |      |         |        |      -- Sensor frame type
  |   |   |      |    |      |         |        |          (See below)
  |   |   |      |    |      |         |         ---- Frame type
  |   |   |      |    |      |         |              DATA_FRAME         1
  |   |   |      |    |      |         |              PING_REQ_FRAME     2
  |   |   |      |    |      |         |              PING_RSP_FRAME     3
  |   |   |      |    |      |         |              DROP_CHILD_FRAME   4
  |   |   |      |    |      |         |              DATA_FRAME_6LOWPAN 5
  |   |   |      |    |      |         |              WAKE_NODE          6
  |   |   |      |    |      |         |              DEBUG_FRAME        7
  |   |   |      |    |      |         |
  |   |   |      |    |      |          -----  Address originating this packet
  |   |   |      |    |      |                 (short address - 2 bytes)
  |   |   |      |    |       ---- Final destination short address         
  |   |   |      |    |
  |   |   |      |     --- Source address (node sending this frame this hop)
  |   |   |      | 
  |   |   |       ---- Destination (node receiving this frame this hop)
  |   |   |
  |   |    --- PAN ID for network
  |   |
  |    --- Sequence number for sending node - incremented each frame
  |
   --- Frame Control Field (see format below)
   </pre></div><h3><a class="anchor" name="sfframe">
Sensor frame</a></h3>
This describes the payload of a data frame, used by the sensor application.<p>
<div class="fragment"><pre class="fragment">

  Sensor Frame Type
 (from ftData above)  Value   Payload contents
 ===================  =====   ================
 SET_NODE_NAME          2     8 bytes of node name (ASCIIZ string)
 REQ_READING_FRAME      3     Time interval between data frames
 READING_FRAME          4     Address, reading, units, name
 CAL_REQ_INFO_FRAME     5     None
 CAL_INFO_FRAME         6     Calibration type, address, units
 REQ_RAW_DATA_FRAME     7     None
 RAW_DATA_FRAME         8     Raw A/D reading
 CAL_CMD_FRAME          9     Index and calibrated reading

 For READING_FRAME:

type addr  reading (6 bytes)   units (5 bytes)     name (8 bytes)
 04   12  31 2E 32 33 34 35 36 64 65 46 00 00  48 61 6C 6C 77 61 79 00
 --   --  -------------------- --------------  -----------------------
  |    |           |                  |                  |
  |    |            --- Reading        --- Units          --- Node name
  |    |                (ASCIIZ)          (ASCIIZ)             (ASCIIZ)
  |    |
  |     --- Short address of node sending reading
  |
   --- Sensor frame type (see table above)
   </pre></div><h2><a class="anchor" name="mac_calls">
MAC function calls</a></h2>
Here is a summary of the function calls and packets sent for typical operation.<p>
<div class="fragment"><pre class="fragment">
Router/End node             Frame type over the air                 Coordinator


                                  Scan channels
                                (For each channel)

appStartScan()
macScan()                 ---&gt;   ftBeaconReq      ---&gt;        macTask()

mac_logPanDescriptors()   &lt;---     ftBeacon       &lt;---        sendBeaconFrame()



                                   Associate

macAssociate()            ---&gt;  ftAssocReqDirect  ---&gt;        macTask()

macTask()                 &lt;---  ftAssocRespDirect &lt;---        macAssociationResponse()


                                   Send Data

macDataRequest()          ---&gt;       ftData       ---&gt;        macDataIndication()


   </pre></div> 
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Modules</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__associate.html">MAC association</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This module handles the association of nodes to the network. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__data.html">MAC data functions</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This module includes code for sending and receiving data using the MAC. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__event.html">MAC event handler</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This module processes events generated by the MAC. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__scan.html">MAC scanning system</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This module provides functions that scan the available channels. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__avr6lowpan.html">6LoWPAN implementation for AVR</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This (optional) component of RUM adds several interesting features to the RUM stack. <br></td></tr>

<p>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrx__frame__t.html">rx_frame_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This struct defines the rx data container.  <a href="structrx__frame__t.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsuperframe__spec__t.html">superframe_spec_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Superframe specification frame type.  <a href="structsuperframe__spec__t.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">union &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="unionsuperframe__t.html">superframe_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This union allows access to the superframe specification field as a structure or as an integer.  <a href="unionsuperframe__t.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpanDescriptor__t.html">panDescriptor_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Defines the PAN descriptor for a received beacon frame.  <a href="structpanDescriptor__t.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structftBeaconReq.html">ftBeaconReq</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Beacon request frame, sent from new node into the ether.  <a href="structftBeaconReq.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structftBeacon.html">ftBeacon</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Beacon frame, sent by coordinator/router in response to a beacon request.  <a href="structftBeacon.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structftAssocReqDirect.html">ftAssocReqDirect</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Direct association request frame, sent by a new node trying to join the nework, to a coordinator/router that sent a beacon frame.  <a href="structftAssocReqDirect.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structftAssocReqIndirect.html">ftAssocReqIndirect</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Indirect association request frame, forwarded from a router on up to the coordinator.  <a href="structftAssocReqIndirect.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structftAssocRespDirect.html">ftAssocRespDirect</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Direct association response frame, sent from the new parent (coordinator or router) to the new child node.  <a href="structftAssocRespDirect.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structftAssocRespIndirect.html">ftAssocRespIndirect</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Indirect association response frame, sent from the coordinator and (possibly) forwarded by routers to the new node's parent.  <a href="structftAssocRespIndirect.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structftRouting.html">ftRouting</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Routing packet, sent by the coordinator and forwarded down a single path of routers.  <a href="structftRouting.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structftData.html">ftData</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Data packet, used for data and some MAC functions (see type element).  <a href="structftData.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structftDropChild.html">ftDropChild</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Frame used to notify a router that one of its children has re-associated with a new parent, and so the router should drop the child from its child table.  <a href="structftDropChild.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structftPing.html">ftPing</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Frame used to ping one node from another node.  <a href="structftPing.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structftWake.html">ftWake</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Wake a child node.  <a href="structftWake.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmacConfig__t.html">macConfig_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Structure to hold config information for the MAC and for this node.  <a href="structmacConfig__t.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Pre-defined node types</h2></td></tr>
<tr><td colspan="2">See <a class="el" href="group__mac.html#g59569ff056c7f0f124222ca0013728d5">NODETYPE</a> for usage. <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="g146ff2075038ea93bc2d81bba8df519e"></a><!-- doxytag: member="mac::COORD" ref="g146ff2075038ea93bc2d81bba8df519e" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#g146ff2075038ea93bc2d81bba8df519e">COORD</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Coordinator node. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="g5794c1a5f0eedfe85aea59330c25848a"></a><!-- doxytag: member="mac::ROUTER" ref="g5794c1a5f0eedfe85aea59330c25848a" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#g5794c1a5f0eedfe85aea59330c25848a">ROUTER</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Router node. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="gfa11cf93bface598cd7a0fa88a71285c"></a><!-- doxytag: member="mac::ENDDEVICE" ref="gfa11cf93bface598cd7a0fa88a71285c" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#gfa11cf93bface598cd7a0fa88a71285c">ENDDEVICE</a>&nbsp;&nbsp;&nbsp;3</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">End node. <br></td></tr>
<tr><td colspan="2"><br><h2>MAC command frame codes.</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="gf98b7750709737ead9ddde34b4ae4633"></a><!-- doxytag: member="mac::ASSOCIATION_REQUEST" ref="gf98b7750709737ead9ddde34b4ae4633" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#gf98b7750709737ead9ddde34b4ae4633">ASSOCIATION_REQUEST</a>&nbsp;&nbsp;&nbsp;(0x01)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Association request. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="g5e527382f4db88d62ce9aba61fe0b75b"></a><!-- doxytag: member="mac::ASSOCIATION_RESPONSE" ref="g5e527382f4db88d62ce9aba61fe0b75b" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#g5e527382f4db88d62ce9aba61fe0b75b">ASSOCIATION_RESPONSE</a>&nbsp;&nbsp;&nbsp;(0x02)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Association response. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="gb3f19468f1d92ae42082773d35147f33"></a><!-- doxytag: member="mac::DISSASOCIATION_NOTIFICATION" ref="gb3f19468f1d92ae42082773d35147f33" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>DISSASOCIATION_NOTIFICATION</b>&nbsp;&nbsp;&nbsp;(0x03)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="g0ae3260548ebbc45065f36373558a979"></a><!-- doxytag: member="mac::DATA_REQUEST" ref="g0ae3260548ebbc45065f36373558a979" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>DATA_REQUEST</b>&nbsp;&nbsp;&nbsp;(0x04)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="g6f0856eb03838b9d54a89902e3ed060e"></a><!-- doxytag: member="mac::PAN_ID_CONFLICT_NOTIFICATION" ref="g6f0856eb03838b9d54a89902e3ed060e" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>PAN_ID_CONFLICT_NOTIFICATION</b>&nbsp;&nbsp;&nbsp;(0x05)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="gbb2c99281c6ec3780cfc188bdaf48e30"></a><!-- doxytag: member="mac::ORPHAN_NOTIFICATION" ref="gbb2c99281c6ec3780cfc188bdaf48e30" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>ORPHAN_NOTIFICATION</b>&nbsp;&nbsp;&nbsp;(0x06)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ge347f8ccf54462acfcd2f0cd92c8bf60"></a><!-- doxytag: member="mac::BEACON_REQUEST" ref="ge347f8ccf54462acfcd2f0cd92c8bf60" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#ge347f8ccf54462acfcd2f0cd92c8bf60">BEACON_REQUEST</a>&nbsp;&nbsp;&nbsp;(0x07)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Beacon request. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="gf3c365e91c909e870fc95f14eab4247b"></a><!-- doxytag: member="mac::COORDINATOR_REALIGNMENT" ref="gf3c365e91c909e870fc95f14eab4247b" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>COORDINATOR_REALIGNMENT</b>&nbsp;&nbsp;&nbsp;(0x08)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="g46d8d963ce9b49554bcd108e006babb2"></a><!-- doxytag: member="mac::GTS_REQUEST" ref="g46d8d963ce9b49554bcd108e006babb2" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>GTS_REQUEST</b>&nbsp;&nbsp;&nbsp;(0x09)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="g1bad177d49cd2ab85b180af9e34fe24a"></a><!-- doxytag: member="mac::ROUTING_PACKET" ref="g1bad177d49cd2ab85b180af9e34fe24a" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#g1bad177d49cd2ab85b180af9e34fe24a">ROUTING_PACKET</a>&nbsp;&nbsp;&nbsp;(0xbb)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Routing packet MAC type. <br></td></tr>
<tr><td colspan="2"><br><h2>FCF values</h2></td></tr>
<tr><td colspan="2">These are pre-defined values for the Frame Control Field.<p>
The FCF is contained in the first two bytes of an 802.15.4 frame. See the IEEE specification for details. <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="gdb8686066c076d5d45024d1375535b1f"></a><!-- doxytag: member="mac::FCF_BEACONREQ" ref="gdb8686066c076d5d45024d1375535b1f" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#gdb8686066c076d5d45024d1375535b1f">FCF_BEACONREQ</a>&nbsp;&nbsp;&nbsp;0x0803</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Beacon request, no src, short dest, no ack, MAC frame. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="g8554c6f65951e156a8385590d36debfd"></a><!-- doxytag: member="mac::FCF_ASSOC_REQ_DIRECT" ref="g8554c6f65951e156a8385590d36debfd" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#g8554c6f65951e156a8385590d36debfd">FCF_ASSOC_REQ_DIRECT</a>&nbsp;&nbsp;&nbsp;0xC863</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Direct association request, long src, short dest, ack, MAC frame. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="gbfcf8997304dde4b9ecfc9e58b3cb950"></a><!-- doxytag: member="mac::FCF_ASSOC_REQ_IND" ref="gbfcf8997304dde4b9ecfc9e58b3cb950" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#gbfcf8997304dde4b9ecfc9e58b3cb950">FCF_ASSOC_REQ_IND</a>&nbsp;&nbsp;&nbsp;0x8863</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Indirect association request, short src and dest, ack, MAC frame. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="gd77e5ed839d20939420f3d50a121cb61"></a><!-- doxytag: member="mac::FCF_ASSOC_RESP_IND" ref="gd77e5ed839d20939420f3d50a121cb61" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#gd77e5ed839d20939420f3d50a121cb61">FCF_ASSOC_RESP_IND</a>&nbsp;&nbsp;&nbsp;0x8863</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Indirect association response, short src and dest, ack, MAC frame. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="g58b9c080c01f495671fb859eb86217cd"></a><!-- doxytag: member="mac::FCF_ASSOC_RESP_DIRECT" ref="g58b9c080c01f495671fb859eb86217cd" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#g58b9c080c01f495671fb859eb86217cd">FCF_ASSOC_RESP_DIRECT</a>&nbsp;&nbsp;&nbsp;0x8C63</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Direct association response, short src, long dest, ack, MAC frame. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="gf9ba84abf7a2b6c682027c7ab28d1b90"></a><!-- doxytag: member="mac::FCF_ROUTE" ref="gf9ba84abf7a2b6c682027c7ab28d1b90" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#gf9ba84abf7a2b6c682027c7ab28d1b90">FCF_ROUTE</a>&nbsp;&nbsp;&nbsp;0x8863</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Routing frame, short src and dest, ack, MAC frame. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="g2426412ac83111d869c05a8314542dda"></a><!-- doxytag: member="mac::FCF_BEACON" ref="g2426412ac83111d869c05a8314542dda" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#g2426412ac83111d869c05a8314542dda">FCF_BEACON</a>&nbsp;&nbsp;&nbsp;0x8000</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Beacon frame, short src, no dest, beacon frame. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="gfa03324c606f9efe4838b4d2b95fb798"></a><!-- doxytag: member="mac::FCF_DATA" ref="gfa03324c606f9efe4838b4d2b95fb798" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#gfa03324c606f9efe4838b4d2b95fb798">FCF_DATA</a>&nbsp;&nbsp;&nbsp;0x8861</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Data frame, short src and dest, ack, data frame. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="g1ca7c0002a9db25b651693af6a9ef938"></a><!-- doxytag: member="mac::FCF_MAC_CMD" ref="g1ca7c0002a9db25b651693af6a9ef938" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#g1ca7c0002a9db25b651693af6a9ef938">FCF_MAC_CMD</a>&nbsp;&nbsp;&nbsp;0x8863</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Mac Command frame, short src and dest, ack, MAC frame. <br></td></tr>
<tr><td colspan="2"><br><h2>Data frame types</h2></td></tr>
<tr><td colspan="2">There are several types of data frames defined at the MAC level.<p>
Only one type is used by the application, and the others are used only by the MAC.<p>
Any data frame as defined by the IEEE 802.15.4 specification (having type = 1 in the FCF) has a type field that contains this value.<p>
Note that the upper bit of the type field is used to denote a sleeping node. If the bit is set, then the node is sleeping. <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="g021f896b0d93ef2ac8162dbfad736805"></a><!-- doxytag: member="mac::DATA_FRAME" ref="g021f896b0d93ef2ac8162dbfad736805" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#g021f896b0d93ef2ac8162dbfad736805">DATA_FRAME</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Application data frame. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="g85ba6c45557eb0369e606452f9d902e6"></a><!-- doxytag: member="mac::PING_REQ_FRAME" ref="g85ba6c45557eb0369e606452f9d902e6" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#g85ba6c45557eb0369e606452f9d902e6">PING_REQ_FRAME</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Ping request frame. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="g54b3bc6f08ede227e3a0180fc5665425"></a><!-- doxytag: member="mac::PING_RSP_FRAME" ref="g54b3bc6f08ede227e3a0180fc5665425" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#g54b3bc6f08ede227e3a0180fc5665425">PING_RSP_FRAME</a>&nbsp;&nbsp;&nbsp;3</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Ping response frame. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="g344fef5e64766495e4cb4565a642ebdc"></a><!-- doxytag: member="mac::DROP_CHILD_FRAME" ref="g344fef5e64766495e4cb4565a642ebdc" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#g344fef5e64766495e4cb4565a642ebdc">DROP_CHILD_FRAME</a>&nbsp;&nbsp;&nbsp;4</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Frame sent to router to command it to drop a child from its table. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="g5e13d1c48a9c4d5a724c1862c8b2d533"></a><!-- doxytag: member="mac::DATA_FRAME_6LOWPAN" ref="g5e13d1c48a9c4d5a724c1862c8b2d533" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#g5e13d1c48a9c4d5a724c1862c8b2d533">DATA_FRAME_6LOWPAN</a>&nbsp;&nbsp;&nbsp;5</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">6lowpan Data Frame <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="gc96bd473487d16bbd6c12326bd904c90"></a><!-- doxytag: member="mac::WAKE_NODE" ref="gc96bd473487d16bbd6c12326bd904c90" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#gc96bd473487d16bbd6c12326bd904c90">WAKE_NODE</a>&nbsp;&nbsp;&nbsp;6</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Wake up an end node. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="g508aab4d544da1a2b31131080945d63c"></a><!-- doxytag: member="mac::DEBUG_FRAME" ref="g508aab4d544da1a2b31131080945d63c" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#g508aab4d544da1a2b31131080945d63c">DEBUG_FRAME</a>&nbsp;&nbsp;&nbsp;7</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Over-the air debug frame. <br></td></tr>
<tr><td colspan="2"><br><h2>Timeouts</h2></td></tr>
<tr><td colspan="2">Timeout constants used by various parts of the program. <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="g7de5208e89c5ce81355147b68de60963"></a><!-- doxytag: member="mac::ASSOCIATION_TIMEOUT" ref="g7de5208e89c5ce81355147b68de60963" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#g7de5208e89c5ce81355147b68de60963">ASSOCIATION_TIMEOUT</a>&nbsp;&nbsp;&nbsp;1000</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">mSec to wait before giving up on association process <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="gcba298b503d8f965ac02682ef80d92f1"></a><!-- doxytag: member="mac::MAC_RP_DELAY" ref="gcba298b503d8f965ac02682ef80d92f1" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#gcba298b503d8f965ac02682ef80d92f1">MAC_RP_DELAY</a>&nbsp;&nbsp;&nbsp;5</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">mSec to wait after sending a routing packet, before sending data <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ga8874ef18103487f59c19eb242a88288"></a><!-- doxytag: member="mac::MAC_DATA_DELAY" ref="ga8874ef18103487f59c19eb242a88288" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#ga8874ef18103487f59c19eb242a88288">MAC_DATA_DELAY</a>&nbsp;&nbsp;&nbsp;7</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">mSec to wait between sending data packets <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="gfbce8a37e9f293eac184e5da71b90b37"></a><!-- doxytag: member="mac::MAC_NOTIFY_DELAY" ref="gfbce8a37e9f293eac184e5da71b90b37" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#gfbce8a37e9f293eac184e5da71b90b37">MAC_NOTIFY_DELAY</a>&nbsp;&nbsp;&nbsp;160</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">mSec to wait before sending a child drop notification <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="g12a46d6ff86950784521c2446d84b2fc"></a><!-- doxytag: member="mac::LED_DELAY" ref="g12a46d6ff86950784521c2446d84b2fc" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#g12a46d6ff86950784521c2446d84b2fc">LED_DELAY</a>&nbsp;&nbsp;&nbsp;10</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">mSec to wait before turning off LED <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ge7c487aa96655c764d288fc7ce4d2cb0"></a><!-- doxytag: member="mac::LED_PING_DELAY" ref="ge7c487aa96655c764d288fc7ce4d2cb0" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#ge7c487aa96655c764d288fc7ce4d2cb0">LED_PING_DELAY</a>&nbsp;&nbsp;&nbsp;400</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">mSec to wait before turning off LED <br></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#g5c996598d7430c84fe375519b45dbcdf">OTA_DEBUG</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Flag to enable the OTA (over-the-air) debug port.  <a href="#g5c996598d7430c84fe375519b45dbcdf"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#g129500a5752ba8bc8abba3844efe45f6">VLP</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Flag to signify a "very low power" (VLP) node.  <a href="#g129500a5752ba8bc8abba3844efe45f6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#g036a88551664cfe893bc3f51a64ba179">CHINA_MODE</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">When CHINA_MODE is set, there are only 4 channels (1-4).  <a href="#g036a88551664cfe893bc3f51a64ba179"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="gd24d249b0f426b8bd98a2180564531dc"></a><!-- doxytag: member="mac::DEFAULT_COORD_ADDR" ref="gd24d249b0f426b8bd98a2180564531dc" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#gd24d249b0f426b8bd98a2180564531dc">DEFAULT_COORD_ADDR</a>&nbsp;&nbsp;&nbsp;0x0000</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The coordinator's short address, always zero. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#g59569ff056c7f0f124222ca0013728d5">NODETYPE</a>&nbsp;&nbsp;&nbsp;COORD</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">NODETYPE is defined to be one of the three basic node types: coordinator, router, or end node.  <a href="#g59569ff056c7f0f124222ca0013728d5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="g6717875b0df9fdee5523c2f251f73810"></a><!-- doxytag: member="mac::BROADCASTADDR" ref="g6717875b0df9fdee5523c2f251f73810" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#g6717875b0df9fdee5523c2f251f73810">BROADCASTADDR</a>&nbsp;&nbsp;&nbsp;(0xFFFF)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The broadcast address, which all nodes receive. See IEEE802.15.4. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="g968a141e8303757f3d30b6dcb02052bf"></a><!-- doxytag: member="mac::BROADCASTPANID" ref="g968a141e8303757f3d30b6dcb02052bf" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#g968a141e8303757f3d30b6dcb02052bf">BROADCASTPANID</a>&nbsp;&nbsp;&nbsp;(0xFFFF)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The broadcast PAN ID, which all nodes receive. See IEEE802.15.4. <br></td></tr>
<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="gd39dd2f3eb8acad9fa1c008bc4bafbbf"></a><!-- doxytag: member="mac::fcf_t" ref="gd39dd2f3eb8acad9fa1c008bc4bafbbf" args="" -->
typedef u16&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#gd39dd2f3eb8acad9fa1c008bc4bafbbf">fcf_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The FCF type, which is just a 16-bit integer. <br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#gaa0748a32ee5741afc6a5078d92158bb">macInit</a> (u8 Channel)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Init the mac, which includes initializing the radio chip.  <a href="#gaa0748a32ee5741afc6a5078d92158bb"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#g62d975ef98590e2c23229df7b6d041c6">macSetOperatingChannel</a> (u8 channel)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the radio's operating channel, and saves that channel to the MAC's global data structure.  <a href="#g62d975ef98590e2c23229df7b6d041c6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="g88d7808a53f2a5b65445f782c75c61e6"></a><!-- doxytag: member="mac::macForwardRoutingPacket" ref="g88d7808a53f2a5b65445f782c75c61e6" args="(void)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#g88d7808a53f2a5b65445f782c75c61e6">macForwardRoutingPacket</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send routing packet down the chain, removing own address from the list of addresses in the route. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#g38eb0657916430780d598411fa5ce9d3">macRouteData</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Route a data packet.  <a href="#g38eb0657916430780d598411fa5ce9d3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">u8&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#g2809f7f1254ef0b25b95136d2aff6b06">macSendRoutingPacket</a> (u16 shortAddr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create and send a routing packet, returns non-zero if packet was sent.  <a href="#g2809f7f1254ef0b25b95136d2aff6b06"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#gd9b6aa9e3aa0f562f49354f26bbf56ba">macStartCoord</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function will cause a device to become a PAN Coordinator.  <a href="#gd9b6aa9e3aa0f562f49354f26bbf56ba"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="gb3ca21105369e45c8e772516bc8f1c27"></a><!-- doxytag: member="mac::debugStr" ref="gb3ca21105369e45c8e772516bc8f1c27" args="[DEBUG *40]" -->
char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#gb3ca21105369e45c8e772516bc8f1c27">debugStr</a> [DEBUG *40]</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Debugging temporary string, only used if DEBUG is non-zero. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="g495ae4288ec139138c9ca2b8de136245"></a><!-- doxytag: member="mac::macConfig" ref="g495ae4288ec139138c9ca2b8de136245" args="" -->
<a class="el" href="structmacConfig__t.html">macConfig_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#g495ae4288ec139138c9ca2b8de136245">macConfig</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">MAC config struct, contains state info for the MAC. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">u8&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#g1773cb730c85757b4c51da29304072e1">mac_buffer_tx</a> [sizeof(<a class="el" href="structrx__frame__t.html">rx_frame_t</a>)]</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A global buffer to hold frames.  <a href="#g1773cb730c85757b4c51da29304072e1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="gfeaf8ffad6487abe7551f66403cf4bae"></a><!-- doxytag: member="mac::mac_buffer_rx" ref="gfeaf8ffad6487abe7551f66403cf4bae" args="[sizeof(rx_frame_t)]" -->
u8&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac.html#gfeaf8ffad6487abe7551f66403cf4bae">mac_buffer_rx</a> [sizeof(<a class="el" href="structrx__frame__t.html">rx_frame_t</a>)]</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Global MAC buffer (receive). <br></td></tr>
</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="g036a88551664cfe893bc3f51a64ba179"></a><!-- doxytag: member="mac.h::CHINA_MODE" ref="g036a88551664cfe893bc3f51a64ba179" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CHINA_MODE&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
When CHINA_MODE is set, there are only 4 channels (1-4). 
<p>
This mode only works on platforms that have BAND_900 set. 
<p>Definition at line <a class="el" href="mac_8h-source.html#l00243">243</a> of file <a class="el" href="mac_8h-source.html">mac.h</a>.</p>

<p>Referenced by <a class="el" href="mac__scan_8c-source.html#l00380">energyScanCallback()</a>, <a class="el" href="mac__scan_8c-source.html#l00193">macScan()</a>, and <a class="el" href="radio_8c-source.html#l00366">radioSetOperatingChannel()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g59569ff056c7f0f124222ca0013728d5"></a><!-- doxytag: member="mac.h::NODETYPE" ref="g59569ff056c7f0f124222ca0013728d5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NODETYPE&nbsp;&nbsp;&nbsp;COORD          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
NODETYPE is defined to be one of the three basic node types: coordinator, router, or end node. 
<p>
This definition is used widely throughout the code to define the different behavior for the different types of nodes. For example, there are many places in the code that look like this:<p>
<div class="fragment"><pre class="fragment">    <span class="keywordflow">if</span> (<a class="code" href="group__mac.html#g59569ff056c7f0f124222ca0013728d5" title="NODETYPE is defined to be one of the three basic node types: coordinator, router...">NODETYPE</a> == <a class="code" href="group__mac.html#g146ff2075038ea93bc2d81bba8df519e" title="Coordinator node.">COORD</a>)
    {
      <span class="comment">// Do something only the coordinator would do.</span>
    }
</pre></div><p>
This comparison causes the compiler to optimize away the code inside the brackets for a router or end node, which saves on flash space.<p>
To define the NODETYPE variable, define one of the following variables (as one) in the Makefile or AVR Studio project setting.<p>
<ul>
<li>COORDNODE</li><li>ROUTER</li><li>ENDNODE </li></ul>

<p>Definition at line <a class="el" href="mac_8h-source.html#l00328">328</a> of file <a class="el" href="mac_8h-source.html">mac.h</a>.</p>

<p>Referenced by <a class="el" href="mac__associate_8c-source.html#l00306">addNode()</a>, <a class="el" href="rum__application_8c-source.html#l00828">allNodes()</a>, <a class="el" href="rum__application_8c-source.html#l00555">appAssociateConfirm()</a>, <a class="el" href="rum__application_8c-source.html#l00671">appClearChanFound()</a>, <a class="el" href="rum__application_8c-source.html#l00746">appInit()</a>, <a class="el" href="rum__application_8c-source.html#l00309">appPacketSendFailed()</a>, <a class="el" href="rum__application_8c-source.html#l00273">appPacketSendSucceed()</a>, <a class="el" href="rum__application_8c-source.html#l00632">appScanConfirm()</a>, <a class="el" href="rum__application_8c-source.html#l00447">appSendDataFrame()</a>, <a class="el" href="rum__application_8c-source.html#l00507">appStartScan()</a>, <a class="el" href="rum__application_8c-source.html#l00932">appTask()</a>, <a class="el" href="mac__scan_8c-source.html#l00380">energyScanCallback()</a>, <a class="el" href="mac__associate_8c-source.html#l00692">findFirstChild()</a>, <a class="el" href="mac__associate_8c-source.html#l00725">findNextSibling()</a>, <a class="el" href="mac__scan_8c-source.html#l00268">mac_logPanDescriptors()</a>, <a class="el" href="mac__associate_8c-source.html#l00559">macAddChild()</a>, <a class="el" href="mac__associate_8c-source.html#l00107">macAssociate()</a>, <a class="el" href="mac__associate_8c-source.html#l00147">macAssociationConfirm()</a>, <a class="el" href="mac__associate_8c-source.html#l00175">macAssociationResponse()</a>, <a class="el" href="mac__associate_8c-source.html#l01237">macChildIsAwake()</a>, <a class="el" href="mac__associate_8c-source.html#l01196">macClearChildWakeFlag()</a>, <a class="el" href="mac__associate_8c-source.html#l00383">macCreateRoute()</a>, <a class="el" href="mac__data_8c-source.html#l00261">macDataIndication()</a>, <a class="el" href="mac__data_8c-source.html#l00111">macDataRequestInt()</a>, <a class="el" href="mac__scan_8c-source.html#l00453">macEdCallback()</a>, <a class="el" href="mac__scan_8c-source.html#l00478">macFindClearChannel()</a>, <a class="el" href="mac__associate_8c-source.html#l01308">macFirstChild()</a>, <a class="el" href="mac__route_8c-source.html#l00048">macForwardRoutingPacket()</a>, <a class="el" href="mac__associate_8c-source.html#l01083">macGetLastRoute()</a>, <a class="el" href="mac__associate_8c-source.html#l01113">macGetNode()</a>, <a class="el" href="mac__associate_8c-source.html#l00455">macGetNodeAddr()</a>, <a class="el" href="mac__associate_8c-source.html#l00640">macGetParent()</a>, <a class="el" href="mac__associate_8c-source.html#l00661">macGetTopParent()</a>, <a class="el" href="mac__data_8c-source.html#l00447">macHoldFrame()</a>, <a class="el" href="mac_8c-source.html#l00076">macInit()</a>, <a class="el" href="mac__associate_8c-source.html#l01127">macInitNodes()</a>, <a class="el" href="mac__associate_8c-source.html#l00479">macIsChild()</a>, <a class="el" href="mac__associate_8c-source.html#l00520">macIsChildSleeping()</a>, <a class="el" href="mac__associate_8c-source.html#l01325">macNextChild()</a>, <a class="el" href="mac__associate_8c-source.html#l01059">macNotifyDrop()</a>, <a class="el" href="mac__data_8c-source.html#l00229">macOtaDebugRequest()</a>, <a class="el" href="mac__data_8c-source.html#l00407">macPing()</a>, <a class="el" href="mac__associate_8c-source.html#l00754">macPrintTree()</a>, <a class="el" href="mac__associate_8c-source.html#l00605">macRemoveChild()</a>, <a class="el" href="mac__route_8c-source.html#l00225">macRouteData()</a>, <a class="el" href="mac__scan_8c-source.html#l00193">macScan()</a>, <a class="el" href="mac__route_8c-source.html#l00312">macSendRoutingPacket()</a>, <a class="el" href="mac__data_8c-source.html#l00485">macSendStoredFrame()</a>, <a class="el" href="mac__associate_8c-source.html#l01098">macSetLastRoute()</a>, <a class="el" href="mac__start_8c-source.html#l00044">macStartCoord()</a>, <a class="el" href="mac__event_8c-source.html#l00141">macTask()</a>, <a class="el" href="mac__associate_8c-source.html#l01151">macWakeChildNode()</a>, <a class="el" href="mac__data_8c-source.html#l00217">macWakeRequest()</a>, <a class="el" href="rum__application_8c-source.html#l00897">printPrompt()</a>, <a class="el" href="radio_8c-source.html#l01081">radioRandom()</a>, <a class="el" href="radio_8c-source.html#l00218">radioTrxEndEvent()</a>, <a class="el" href="sensors_8c-source.html#l00842">sendReading()</a>, <a class="el" href="sensors_8c-source.html#l00390">sensorAutoSendStart()</a>, <a class="el" href="sensors_8c-source.html#l00586">sensorCalProcess()</a>, <a class="el" href="sensors_8c-source.html#l00236">sensorGetReading()</a>, <a class="el" href="sensors_8c-source.html#l00327">sensorInit()</a>, <a class="el" href="sensors_8c-source.html#l00894">sensorPacketSendSucceed()</a>, <a class="el" href="sensors_8c-source.html#l00664">sensorRcvCalInfo()</a>, <a class="el" href="sensors_8c-source.html#l01028">sensorRcvPacket()</a>, <a class="el" href="sensors_8c-source.html#l00700">sensorReplyRawData()</a>, <a class="el" href="sensors_8c-source.html#l00446">sensorRequestCalInfo()</a>, <a class="el" href="sensors_8c-source.html#l00425">sensorRequestReading()</a>, <a class="el" href="sensors_8c-source.html#l00976">sensorSendReading()</a>, <a class="el" href="sensors_8c-source.html#l00487">sensorSendSetNodeName()</a>, <a class="el" href="sensors_8c-source.html#l01011">sensorSetNodeNameRcv()</a>, <a class="el" href="sixlowpan__wake_8c-source.html#l00432">sixlowpanSleep_sleep()</a>, and <a class="el" href="avr__timer_8c-source.html#l00320">timerInit()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g5c996598d7430c84fe375519b45dbcdf"></a><!-- doxytag: member="mac.h::OTA_DEBUG" ref="g5c996598d7430c84fe375519b45dbcdf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OTA_DEBUG&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Flag to enable the OTA (over-the-air) debug port. 
<p>
Set this to one to enable the port. If enabled, this causes debug messages to be sent to the coordinator for display. 
<p>Definition at line <a class="el" href="mac_8h-source.html#l00188">188</a> of file <a class="el" href="mac_8h-source.html">mac.h</a>.</p>

<p>Referenced by <a class="el" href="mac__data_8c-source.html#l00261">macDataIndication()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g129500a5752ba8bc8abba3844efe45f6"></a><!-- doxytag: member="mac.h::VLP" ref="g129500a5752ba8bc8abba3844efe45f6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VLP&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Flag to signify a "very low power" (VLP) node. 
<p>
This type of node uses a weak battery that cannot power the node for very long, or some energy-harvesting power source.<p>
This option is off by default 
<p>Definition at line <a class="el" href="mac_8h-source.html#l00206">206</a> of file <a class="el" href="mac_8h-source.html">mac.h</a>.</p>

<p>Referenced by <a class="el" href="rum__application_8c-source.html#l00555">appAssociateConfirm()</a>, <a class="el" href="rum__application_8c-source.html#l00632">appScanConfirm()</a>, <a class="el" href="mac__associate_8c-source.html#l00107">macAssociate()</a>, <a class="el" href="mac__data_8c-source.html#l00111">macDataRequestInt()</a>, <a class="el" href="mac__data_8c-source.html#l00447">macHoldFrame()</a>, <a class="el" href="mac__scan_8c-source.html#l00193">macScan()</a>, <a class="el" href="mac__data_8c-source.html#l00485">macSendStoredFrame()</a>, <a class="el" href="sensors_8c-source.html#l00976">sensorSendReading()</a>, and <a class="el" href="avr__sixlowpan__application_8c-source.html#l00161">sixlowpan_udp_usercall()</a>.</p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="gaa0748a32ee5741afc6a5078d92158bb"></a><!-- doxytag: member="mac.c::macInit" ref="gaa0748a32ee5741afc6a5078d92158bb" args="(u8 Channel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void macInit           </td>
          <td>(</td>
          <td class="paramtype">u8&nbsp;</td>
          <td class="paramname"> <em>Channel</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Init the mac, which includes initializing the radio chip. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Channel</em>&nbsp;</td><td>Sets the channel to use for the MAC. Use 0xff for non-coordinator nodes. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="mac_8c-source.html#l00076">76</a> of file <a class="el" href="mac_8c-source.html">mac.c</a>.</p>

<p>References <a class="el" href="mac_8h-source.html#l00695">macConfig_t::associated</a>, <a class="el" href="mac_8h-source.html#l00378">BROADCASTADDR</a>, <a class="el" href="mac_8h-source.html#l00379">BROADCASTPANID</a>, <a class="el" href="mac_8h-source.html#l00705">macConfig_t::busy</a>, <a class="el" href="mac_8h-source.html#l00285">COORD</a>, <a class="el" href="mac_8h-source.html#l00703">macConfig_t::currentChannel</a>, <a class="el" href="hal__arm_8c-source.html#l00363">hal_subregister_write()</a>, <a class="el" href="hal__avr_8h-source.html#l00822">halGetMacAddr</a>, <a class="el" href="mac_8h-source.html#l00702">macConfig_t::hopsToCoord</a>, <a class="el" href="mac_8h-source.html#l00701">macConfig_t::lastRoute</a>, <a class="el" href="mac_8h-source.html#l00694">macConfig_t::longAddr</a>, <a class="el" href="mac__associate_8c-source.html#l01127">macInitNodes()</a>, <a class="el" href="mac_8h-source.html#l00328">NODETYPE</a>, <a class="el" href="mac_8h-source.html#l00698">macConfig_t::panId</a>, <a class="el" href="mac_8h-source.html#l00700">macConfig_t::parentShortAddress</a>, <a class="el" href="radio_8c-source.html#l00124">radioInit()</a>, <a class="el" href="radio_8c-source.html#l01017">radioSetDeviceRole()</a>, <a class="el" href="radio_8c-source.html#l01061">radioSetExtendedAddress()</a>, <a class="el" href="radio_8c-source.html#l00366">radioSetOperatingChannel()</a>, <a class="el" href="radio_8c-source.html#l01028">radioSetPanId()</a>, <a class="el" href="radio_8c-source.html#l01044">radioSetShortAddress()</a>, <a class="el" href="radio_8c-source.html#l00740">radioSetTrxState()</a>, <a class="el" href="radio_8c-source.html#l00928">radioUseAutoTxCrc()</a>, <a class="el" href="at86rf23x__registermap_8h-source.html#l00078">RX_AACK_ON</a>, <a class="el" href="mac_8h-source.html#l00177">SERIAL</a>, <a class="el" href="mac_8h-source.html#l00699">macConfig_t::shortAddress</a>, <a class="el" href="mac_8h-source.html#l00706">macConfig_t::sleeping</a>, <a class="el" href="at86rf23x__registermap_8h-source.html#l00226">SR_MAX_FRAME_RETRIES</a>, and <a class="el" href="at86rf23x__registermap_8h-source.html#l00068">TRX_OFF</a>.</p>

<p>Referenced by <a class="el" href="rum__application_8c-source.html#l00671">appClearChanFound()</a>, <a class="el" href="rum__application_8c-source.html#l00507">appStartScan()</a>, <a class="el" href="rum__application_8c-source.html#l00932">appTask()</a>, and <a class="el" href="mac__scan_8c-source.html#l00478">macFindClearChannel()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="group__mac_gaa0748a32ee5741afc6a5078d92158bb_cgraph.png" border="0" usemap="#group__mac_gaa0748a32ee5741afc6a5078d92158bb_cgraph_map" alt=""></center>
<map name="group__mac_gaa0748a32ee5741afc6a5078d92158bb_cgraph_map">
<area shape="rect" href="group__arm.html#g4e55279d2a68db6e6127b853baee2127" title="This function writes a new value to one of the radio transceiver&#39;s subregisters..." alt="" coords="339,110,483,137"><area shape="rect" href="group__mac__associate.html#gc7cb66274b3cfecd07d44a4b122b1ad3" title="Initializes the nodes array of associatedNodes_t structures." alt="" coords="155,465,253,492"><area shape="rect" href="group__radio.html#g8382b61a38d3757b316352ddbe2b144b" title="Initialize the radio chip." alt="" coords="171,262,237,289"><area shape="rect" href="group__radio.html#gc2322c500c5cc9d4178d3231cac3aa51" title="This function will set the I_AM_COORD sub register." alt="" coords="137,60,271,86"><area shape="rect" href="group__radio.html#gd4c77fb534211f3be22c6b4aa29b561e" title="This function will set a new extended address to be used by the address filter." alt="" coords="119,313,289,340"><area shape="rect" href="group__radio.html#g14d426a54ebfc9514e5f6c23eb7fc736" title="This function will change the operating channel." alt="" coords="119,212,289,238"><area shape="rect" href="group__radio.html#g8480a533bb1ba14171147bc1aeb78c7d" title="This function will set the PANID used by the address filter." alt="" coords="153,364,255,390"><area shape="rect" href="group__radio.html#g2d1c441755a5b0f6215692474ae36f9f" title="This function will set the short address used by the address filter." alt="" coords="131,414,277,441"><area shape="rect" href="group__radio.html#g9c32d026c082234626f5f900077221bc" title="This function will change the current state of the radio transceiver&#39;s internal..." alt="" coords="145,161,263,188"><area shape="rect" href="group__radio.html#g8a0922b9e86e9c33c9abe3b4b6203df1" title="This function will enable or disable automatic CRC during frame transmission." alt="" coords="137,110,271,137"><area shape="rect" href="group__arm.html#gf5ea8985a12feedc3ac25fbb50712183" title="This function initializes the Hardware Abstraction Layer." alt="" coords="380,262,441,289"><area shape="rect" href="group__arm.html#g6e9e307a1b8e39fa9261ee12ced67314" title="This function writes a new value to one of the radio transceiver&#39;s registers..." alt="" coords="349,313,472,340"><area shape="rect" href="group__radio.html#g828c12db6daeae4369180d52f1cbdffd" title="This function will reset all the registers and the state machine of the radio transceiver..." alt="" coords="360,212,461,238"><area shape="rect" href="group__radio.html#g29bbaf755e336eeec99729db6be0226c" title="This function checks if the radio transceiver is sleeping." alt="" coords="371,161,451,188"></map>
</div>

</div>
</div><p>
<a class="anchor" name="g38eb0657916430780d598411fa5ce9d3"></a><!-- doxytag: member="mac_route.c::macRouteData" ref="g38eb0657916430780d598411fa5ce9d3" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void macRouteData           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Route a data packet. 
<p>
There are a few simple rules for routing packets:<p>
<ul>
<li>Routers: if a packet is from my parent, and the destination is my child, send the packet to the child.</li></ul>
<p>
<ul>
<li>Routers: if a packet is from my parent, and the destination is not my child, then send to the last default route.</li></ul>
<p>
<ul>
<li>Routers: if a packet is from my child, send the packet to my parent.</li></ul>
<p>
<ul>
<li>Coordinator: send the packet down the tree, preceded by a routing packet in necessary. </li></ul>

<p>Definition at line <a class="el" href="mac__route_8c-source.html#l00225">225</a> of file <a class="el" href="mac__route_8c-source.html">mac_route.c</a>.</p>

<p>References <a class="el" href="mac_8h-source.html#l00378">BROADCASTADDR</a>, <a class="el" href="mac_8h-source.html#l00705">macConfig_t::busy</a>, <a class="el" href="mac_8h-source.html#l00285">COORD</a>, <a class="el" href="mac_8h-source.html#l00295">DEFAULT_COORD_ADDR</a>, <a class="el" href="mac_8h-source.html#l00633">ftData::destAddr</a>, <a class="el" href="mac_8h-source.html#l00697">macConfig_t::dsn</a>, <a class="el" href="mac_8h-source.html#l00635">ftData::finalDestAddr</a>, <a class="el" href="mac_8h-source.html#l00701">macConfig_t::lastRoute</a>, <a class="el" href="mac_8h-source.html#l00484">LED_DELAY</a>, <a class="el" href="mac_8c-source.html#l00065">mac_buffer_tx</a>, <a class="el" href="mac_8h-source.html#l00481">MAC_RP_DELAY</a>, <a class="el" href="mac_8c-source.html#l00056">macConfig</a>, <a class="el" href="mac__associate_8c-source.html#l00661">macGetTopParent()</a>, <a class="el" href="mac__data_8c-source.html#l00447">macHoldFrame()</a>, <a class="el" href="mac__associate_8c-source.html#l00479">macIsChild()</a>, <a class="el" href="mac__associate_8c-source.html#l00520">macIsChildSleeping()</a>, <a class="el" href="mac__route_8c-source.html#l00312">macSendRoutingPacket()</a>, <a class="el" href="avr__timer_8c-source.html#l00158">macSetAlarm()</a>, <a class="el" href="mac_8h-source.html#l00328">NODETYPE</a>, <a class="el" href="mac_8h-source.html#l00700">macConfig_t::parentShortAddress</a>, <a class="el" href="radio_8c-source.html#l00983">radioSendData()</a>, <a class="el" href="mac_8h-source.html#l00286">ROUTER</a>, <a class="el" href="system_8h-source.html#l00522">RUMSLEEP</a>, <a class="el" href="mac_8h-source.html#l00631">ftData::seq</a>, <a class="el" href="mac_8h-source.html#l00699">macConfig_t::shortAddress</a>, and <a class="el" href="mac_8h-source.html#l00634">ftData::srcAddr</a>.</p>

<p>Referenced by <a class="el" href="mac__event_8c-source.html#l00141">macTask()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="group__mac_g38eb0657916430780d598411fa5ce9d3_cgraph.png" border="0" usemap="#group__mac_g38eb0657916430780d598411fa5ce9d3_cgraph_map" alt=""></center>
<map name="group__mac_g38eb0657916430780d598411fa5ce9d3_cgraph_map">
<area shape="rect" href="group__mac__associate.html#gea0193b13c0f497ce8561762e1611dc0" title="Find the &quot;topmost&quot; parent for a node (the one connected to the coord)." alt="" coords="181,5,307,32"><area shape="rect" href="group__mac__associate.html#ged6df4ec4a8b1f717d6591f7bc73627a" title="Determine if a given node is a child if this node." alt="" coords="395,31,480,57"><area shape="rect" href="group__mac__data.html#g20399e489f449bd2026daec4606fc048" title="Save a frame for transmission later." alt="" coords="189,107,299,133"><area shape="rect" href="group__mac__associate.html#gbca0fd11d3bc8ac2f608958459d0279e" title="Determine if a given node is a sleeping child of this node." alt="" coords="176,157,312,184"><area shape="rect" href="group__mac.html#g2809f7f1254ef0b25b95136d2aff6b06" title="Create and send a routing packet, returns non&#45;zero if packet was sent." alt="" coords="164,208,324,235"><area shape="rect" href="group__radio.html#g73d762673c6af21f4fb6b6ba6c06cc63" title="This function will download a frame to the radio transceiver&#39;s transmit buffer..." alt="" coords="384,259,491,285"><area shape="rect" href="group__timer__module.html#g0155e5192956b3cd498751d8652f7773" title="Sets a general purpose timer." alt="" coords="195,309,293,336"><area shape="rect" href="group__mac__associate.html#g4a6a372f2dd95a1cd7d0a3cb635bc4eb" title="Create a routing packet." alt="" coords="379,107,496,133"><area shape="rect" href="group__mac__associate.html#gcfefe3f998d94f694b004a72b8b777fb" title="Get the last routed address of one of the router nodes in the network." alt="" coords="375,157,500,184"><area shape="rect" href="group__mac__associate.html#geac81ec5acd0fa702167c9f8b0ce29b2" title="Sets the last routed address for a router node." alt="" coords="375,208,500,235"><area shape="rect" href="group__arm.html#g8ad2d7780b4815433b88ee56afa2830c" title="Returns a unique timer ID." alt="" coords="392,309,483,336"><area shape="rect" href="group__timer__module.html#g55bef38a083b7a6478dd60c6668f3434" title="Start the hardware timer running." alt="" coords="399,360,476,387"></map>
</div>

</div>
</div><p>
<a class="anchor" name="g2809f7f1254ef0b25b95136d2aff6b06"></a><!-- doxytag: member="mac_route.c::macSendRoutingPacket" ref="g2809f7f1254ef0b25b95136d2aff6b06" args="(u16 shortAddr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u8 macSendRoutingPacket           </td>
          <td>(</td>
          <td class="paramtype">u16&nbsp;</td>
          <td class="paramname"> <em>shortAddr</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create and send a routing packet, returns non-zero if packet was sent. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>shortAddr</em>&nbsp;</td><td>The short address of the end node, or the short address of the parent of the final destination node.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Zero if no routing packet was sent (probably because it was not needed). <p>
Non-zero if a routing packet was sent. </dd></dl>

<p>Definition at line <a class="el" href="mac__route_8c-source.html#l00312">312</a> of file <a class="el" href="mac__route_8c-source.html">mac_route.c</a>.</p>

<p>References <a class="el" href="mac_8h-source.html#l00623">ftRouting::cmd</a>, <a class="el" href="mac_8h-source.html#l00285">COORD</a>, <a class="el" href="mac_8h-source.html#l00295">DEFAULT_COORD_ADDR</a>, <a class="el" href="mac_8h-source.html#l00621">ftRouting::destAddr</a>, <a class="el" href="mac_8h-source.html#l00697">macConfig_t::dsn</a>, <a class="el" href="mac_8h-source.html#l00618">ftRouting::fcf</a>, <a class="el" href="mac_8h-source.html#l00431">FCF_ROUTE</a>, <a class="el" href="mac_8c-source.html#l00056">macConfig</a>, <a class="el" href="mac__associate_8c-source.html#l00383">macCreateRoute()</a>, <a class="el" href="mac__associate_8c-source.html#l01083">macGetLastRoute()</a>, <a class="el" href="mac__associate_8c-source.html#l01098">macSetLastRoute()</a>, <a class="el" href="mac_8h-source.html#l00328">NODETYPE</a>, <a class="el" href="mac_8h-source.html#l00698">macConfig_t::panId</a>, <a class="el" href="mac_8h-source.html#l00620">ftRouting::panid</a>, <a class="el" href="radio_8c-source.html#l00983">radioSendData()</a>, <a class="el" href="mac_8h-source.html#l00410">ROUTING_PACKET</a>, <a class="el" href="mac_8h-source.html#l00619">ftRouting::seq</a>, <a class="el" href="mac_8h-source.html#l00624">ftRouting::shortAddr</a>, and <a class="el" href="mac_8h-source.html#l00622">ftRouting::srcAddr</a>.</p>

<p>Referenced by <a class="el" href="mac__associate_8c-source.html#l00175">macAssociationResponse()</a>, <a class="el" href="mac__data_8c-source.html#l00111">macDataRequestInt()</a>, <a class="el" href="mac__data_8c-source.html#l00407">macPing()</a>, and <a class="el" href="mac__route_8c-source.html#l00225">macRouteData()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="group__mac_g2809f7f1254ef0b25b95136d2aff6b06_cgraph.png" border="0" usemap="#group__mac_g2809f7f1254ef0b25b95136d2aff6b06_cgraph_map" alt=""></center>
<map name="group__mac_g2809f7f1254ef0b25b95136d2aff6b06_cgraph_map">
<area shape="rect" href="group__mac__associate.html#g4a6a372f2dd95a1cd7d0a3cb635bc4eb" title="Create a routing packet." alt="" coords="221,5,339,32"><area shape="rect" href="group__mac__associate.html#gcfefe3f998d94f694b004a72b8b777fb" title="Get the last routed address of one of the router nodes in the network." alt="" coords="217,56,343,82"><area shape="rect" href="group__mac__associate.html#geac81ec5acd0fa702167c9f8b0ce29b2" title="Sets the last routed address for a router node." alt="" coords="217,106,343,133"><area shape="rect" href="group__radio.html#g73d762673c6af21f4fb6b6ba6c06cc63" title="This function will download a frame to the radio transceiver&#39;s transmit buffer..." alt="" coords="227,157,333,184"><area shape="rect" href="group__arm.html#gfdf1c6a3c3867f6c6f29937e9e01bc3b" title="This function will download a frame to the radio transceiver&#39;s frame buffer." alt="" coords="396,81,508,108"><area shape="rect" href="group__radio.html#g80178b680aa26b7a8e1a1ce8a4a824b3" title="This function return the Radio Transceivers current state." alt="" coords="699,182,819,209"><area shape="rect" href="group__radio.html#gb18f99759fd3d798150020e91e7b46e9" title="Check whether the radio chip is busy." alt="" coords="561,182,649,209"><area shape="rect" href="group__radio.html#g9c32d026c082234626f5f900077221bc" title="This function will change the current state of the radio transceiver&#39;s internal..." alt="" coords="393,233,511,260"></map>
</div>

</div>
</div><p>
<a class="anchor" name="g62d975ef98590e2c23229df7b6d041c6"></a><!-- doxytag: member="mac.c::macSetOperatingChannel" ref="g62d975ef98590e2c23229df7b6d041c6" args="(u8 channel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void macSetOperatingChannel           </td>
          <td>(</td>
          <td class="paramtype">u8&nbsp;</td>
          <td class="paramname"> <em>channel</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the radio's operating channel, and saves that channel to the MAC's global data structure. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>channel</em>&nbsp;</td><td>The channel number to use for radio communication. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="mac_8c-source.html#l00135">135</a> of file <a class="el" href="mac_8c-source.html">mac.c</a>.</p>

<p>References <a class="el" href="mac_8h-source.html#l00703">macConfig_t::currentChannel</a>, and <a class="el" href="radio_8c-source.html#l00366">radioSetOperatingChannel()</a>.</p>

<p>Referenced by <a class="el" href="mac__scan_8c-source.html#l00352">mac_scanConfirm()</a>, <a class="el" href="mac__associate_8c-source.html#l00107">macAssociate()</a>, and <a class="el" href="mac__scan_8c-source.html#l00193">macScan()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="group__mac_g62d975ef98590e2c23229df7b6d041c6_cgraph.png" border="0" usemap="#group__mac_g62d975ef98590e2c23229df7b6d041c6_cgraph_map" alt=""></center>
<map name="group__mac_g62d975ef98590e2c23229df7b6d041c6_cgraph_map">
<area shape="rect" href="group__radio.html#g14d426a54ebfc9514e5f6c23eb7fc736" title="This function will change the operating channel." alt="" coords="225,107,396,133"><area shape="rect" href="group__arm.html#g6e9e307a1b8e39fa9261ee12ced67314" title="This function writes a new value to one of the radio transceiver&#39;s registers..." alt="" coords="471,5,593,32"><area shape="rect" href="group__arm.html#g4e55279d2a68db6e6127b853baee2127" title="This function writes a new value to one of the radio transceiver&#39;s subregisters..." alt="" coords="460,56,604,83"><area shape="rect" href="group__radio.html#g29bbaf755e336eeec99729db6be0226c" title="This function checks if the radio transceiver is sleeping." alt="" coords="492,107,572,133"><area shape="rect" href="group__radio.html#g1c1b73c569365e457a1d9b9b773eadbb" title="This function will return the channel used by the radio transceiver." alt="" coords="445,157,619,184"><area shape="rect" href="group__radio.html#g80178b680aa26b7a8e1a1ce8a4a824b3" title="This function return the Radio Transceivers current state." alt="" coords="472,208,592,235"></map>
</div>

</div>
</div><p>
<a class="anchor" name="gd9b6aa9e3aa0f562f49354f26bbf56ba"></a><!-- doxytag: member="mac_start.c::macStartCoord" ref="gd9b6aa9e3aa0f562f49354f26bbf56ba" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void macStartCoord           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function will cause a device to become a PAN Coordinator. 
<p>
This function must be run by app code on at least one device in the network. 
<p>Definition at line <a class="el" href="mac__start_8c-source.html#l00044">44</a> of file <a class="el" href="mac__start_8c-source.html">mac_start.c</a>.</p>

<p>References <a class="el" href="mac_8h-source.html#l00379">BROADCASTPANID</a>, <a class="el" href="mac_8h-source.html#l00285">COORD</a>, <a class="el" href="mac_8h-source.html#l00295">DEFAULT_COORD_ADDR</a>, <a class="el" href="mac_8c-source.html#l00056">macConfig</a>, <a class="el" href="mac_8h-source.html#l00328">NODETYPE</a>, <a class="el" href="mac_8h-source.html#l00255">PAN_ID</a>, <a class="el" href="mac_8h-source.html#l00698">macConfig_t::panId</a>, <a class="el" href="radio_8c-source.html#l01081">radioRandom()</a>, <a class="el" href="radio_8c-source.html#l01028">radioSetPanId()</a>, <a class="el" href="radio_8c-source.html#l01044">radioSetShortAddress()</a>, and <a class="el" href="mac_8h-source.html#l00699">macConfig_t::shortAddress</a>.</p>

<p>Referenced by <a class="el" href="rum__application_8c-source.html#l00671">appClearChanFound()</a>, and <a class="el" href="rum__application_8c-source.html#l00932">appTask()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="group__mac_gd9b6aa9e3aa0f562f49354f26bbf56ba_cgraph.png" border="0" usemap="#group__mac_gd9b6aa9e3aa0f562f49354f26bbf56ba_cgraph_map" alt=""></center>
<map name="group__mac_gd9b6aa9e3aa0f562f49354f26bbf56ba_cgraph_map">
<area shape="rect" href="group__radio.html#g301044554e9d047bf22935d01c615884" title="Returns a random number, composed of bits from the radio&#39;s random number generator..." alt="" coords="189,23,285,49"><area shape="rect" href="group__radio.html#g8480a533bb1ba14171147bc1aeb78c7d" title="This function will set the PANID used by the address filter." alt="" coords="187,73,288,100"><area shape="rect" href="group__radio.html#g2d1c441755a5b0f6215692474ae36f9f" title="This function will set the short address used by the address filter." alt="" coords="164,124,311,151"><area shape="rect" href="group__arm.html#gbe3a54dd0c5f0231fb9ef72abd021486" title="This function reads the value of a specific subregister." alt="" coords="531,23,672,49"><area shape="rect" href="group__radio.html#g2976f50bf538933d7eba0444494d6289" title="Returns the radio part number." alt="" coords="361,23,481,49"><area shape="rect" href="group__radio.html#g80178b680aa26b7a8e1a1ce8a4a824b3" title="This function return the Radio Transceivers current state." alt="" coords="361,73,481,100"><area shape="rect" href="group__arm.html#g6e9e307a1b8e39fa9261ee12ced67314" title="This function writes a new value to one of the radio transceiver&#39;s registers..." alt="" coords="360,124,483,151"></map>
</div>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="g1773cb730c85757b4c51da29304072e1"></a><!-- doxytag: member="mac.c::mac_buffer_tx" ref="g1773cb730c85757b4c51da29304072e1" args="[sizeof(rx_frame_t)]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u8 <a class="el" href="group__mac.html#g1773cb730c85757b4c51da29304072e1">mac_buffer_tx</a>[sizeof(<a class="el" href="structrx__frame__t.html">rx_frame_t</a>)]          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A global buffer to hold frames. 
<p>
This area is used by both send an receive functions to hold radio frame data. Sometimes the first byte is the frame length byte, and sometimes the first byte is the first byte of the frame. Global MAC buffer (transmit) 
<p>Definition at line <a class="el" href="mac_8c-source.html#l00065">65</a> of file <a class="el" href="mac_8c-source.html">mac.c</a>.</p>

<p>Referenced by <a class="el" href="mac__associate_8c-source.html#l00107">macAssociate()</a>, <a class="el" href="mac__associate_8c-source.html#l00175">macAssociationResponse()</a>, <a class="el" href="mac__data_8c-source.html#l00111">macDataRequestInt()</a>, <a class="el" href="mac__route_8c-source.html#l00048">macForwardRoutingPacket()</a>, <a class="el" href="mac__route_8c-source.html#l00225">macRouteData()</a>, and <a class="el" href="mac__scan_8c-source.html#l00165">sendBeaconRequest()</a>.</p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Jun 8 18:38:33 2009 for RUM by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
