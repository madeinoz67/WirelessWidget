<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>RUM: MAC association</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>MAC association<br>
<small>
[<a class="el" href="group__mac.html">Route Under Mac (RUM)</a>]</small>
</h1>
<p>
<div class="dynheader">
Collaboration diagram for MAC association:</div>
<div class="dynsection">
<center><table><tr><td><img src="group__mac__associate.png" border="0" alt="" usemap="#group____mac____associate_map">
<map name="group____mac____associate_map">
<area shape="rect" href="group__mac.html" title="The RUM MAC is a quasi&#45;compliant 802.15.4 MAC layer." alt="" coords="7,5,169,32"></map></td></tr></table></center>
</div>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This module handles the association of nodes to the network. 
<p>
It includes code for both the coordinator node and the router/end nodes. See the RUM Application Note (AVR2070) to see a detailed description of how the protocol operates.<p>
There are two basic modes of association - direct and indirect. Direct packets are sent to and from the new node being associated to the network. Indirect packets are passed up the chain of routers to the coordinator, and back down to the new parent node. The parent node must translate between direct and indirect nodes. In the case where a new node is associating to the coordinator, only direct packets are used. 
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structassociatedNodes__t.html">associatedNodes_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This is the structure for each element of the table of the associated nodes.  <a href="structassociatedNodes__t.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structevent__object__t.html">event_object_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Object that defines a single event.  <a href="structevent__object__t.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ge737679ec6b1e6d3942d7c5a029095da"></a><!-- doxytag: member="mac_associate::nodes" ref="ge737679ec6b1e6d3942d7c5a029095da" args="[MAXNODES *(NODETYPE==COORD)]" -->
static <a class="el" href="structassociatedNodes__t.html">associatedNodes_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__associate.html#ge737679ec6b1e6d3942d7c5a029095da">nodes</a> [MAXNODES *(NODETYPE==COORD)]</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Table of associated nodes, only instantiated for coordinator. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static tChildTableItem&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__associate.html#g59e1325e646394f38a18a99bc2bd1d82">childNodes</a> [50 *(NODETYPE==ROUTER)]</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Table of children nodes, only instantiated for router nodes.  <a href="#g59e1325e646394f38a18a99bc2bd1d82"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__associate.html#ge044ad02d7a264fe88176c4076809853">macAssociate</a> (u16 shortAddr, u8 channel)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Associate this node with a network.  <a href="#ge044ad02d7a264fe88176c4076809853"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__associate.html#g43b554aefc8950ec2c7591a400fb8559">macAssociationConfirm</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function is called when the MAC receives an association response frame.  <a href="#g43b554aefc8950ec2c7591a400fb8559"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__associate.html#gb66e6617d404824a1be943d829ed0d8e">macAssociationResponse</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function is called when an association request is received by this node (and this node is coordinator).  <a href="#gb66e6617d404824a1be943d829ed0d8e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">u16&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__associate.html#g4a19318e111a0c13ce3ab17bcc65e37f">addNode</a> (u8 type, u64 *macAddr, u16 parentAddr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add a node to the table of nodes, and return a short address for the new node.  <a href="#g4a19318e111a0c13ce3ab17bcc65e37f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">u8&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__associate.html#g4a6a372f2dd95a1cd7d0a3cb635bc4eb">macCreateRoute</a> (u16 shortAddr, <a class="el" href="structftRouting.html">ftRouting</a> *frame)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a routing packet.  <a href="#g4a6a372f2dd95a1cd7d0a3cb635bc4eb"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">u16&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__associate.html#g23e06fe2d0b2ad5f7653daa88d86d8c9">macGetNodeAddr</a> (u64 *macAddr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find a node's short address given the node's long MAC address.  <a href="#g23e06fe2d0b2ad5f7653daa88d86d8c9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">u8&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__associate.html#ged6df4ec4a8b1f717d6591f7bc73627a">macIsChild</a> (u16 shortAddr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Determine if a given node is a child if this node.  <a href="#ged6df4ec4a8b1f717d6591f7bc73627a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">u8&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__associate.html#gbca0fd11d3bc8ac2f608958459d0279e">macIsChildSleeping</a> (u16 shortAddr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Determine if a given node is a sleeping child of this node.  <a href="#gbca0fd11d3bc8ac2f608958459d0279e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__associate.html#g3ac1cb22fa29ec5180f1c0d3eaaf7839">macAddChild</a> (u16 shortAddr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add a newly-associated node to this router's child table.  <a href="#g3ac1cb22fa29ec5180f1c0d3eaaf7839"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__associate.html#g18e0aeff533ca9a9e8bb2788eb8648e1">macRemoveChild</a> (u16 shortAddr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove a node from the child table.  <a href="#g18e0aeff533ca9a9e8bb2788eb8648e1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">u16&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__associate.html#g50c7dc74cfce8901fa59aa34c35f932e">macGetParent</a> (u16 shortAddr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find the parent of a given node.  <a href="#g50c7dc74cfce8901fa59aa34c35f932e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">u16&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__associate.html#gea0193b13c0f497ce8561762e1611dc0">macGetTopParent</a> (u16 addr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find the "topmost" parent for a node (the one connected to the coord).  <a href="#gea0193b13c0f497ce8561762e1611dc0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">u16&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__associate.html#g4a2dbfd0649a23ba01d86f5f178a3514">findFirstChild</a> (u16 addr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find the first child in the network table of a given parent node.  <a href="#g4a2dbfd0649a23ba01d86f5f178a3514"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">u16&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__associate.html#g8ea900490f4d660861f484584c9f012a">findNextSibling</a> (u16 addr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find the next sibling node of a given node.  <a href="#g8ea900490f4d660861f484584c9f012a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__associate.html#g2d350a06c929bb4d5001b2f10635f22e">macPrintTree</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Print the network tree in a semi-graphical format, to be viewed on a terminal screen.  <a href="#g2d350a06c929bb4d5001b2f10635f22e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__associate.html#g2dde2bdb54d1319810d247e434baa0d8">macNotifyDrop</a> (u16 parent, u16 child)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sends a frame from the coordinator notifying a router to drop a child from its table.  <a href="#g2dde2bdb54d1319810d247e434baa0d8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">u16&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__associate.html#gcfefe3f998d94f694b004a72b8b777fb">macGetLastRoute</a> (u16 parent)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the last routed address of one of the router nodes in the network.  <a href="#gcfefe3f998d94f694b004a72b8b777fb"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__associate.html#geac81ec5acd0fa702167c9f8b0ce29b2">macSetLastRoute</a> (u16 parent, u16 addr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the last routed address for a router node.  <a href="#geac81ec5acd0fa702167c9f8b0ce29b2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structassociatedNodes__t.html">associatedNodes_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__associate.html#g553b1ee14bf13a99a122ff51176477fd">macGetNode</a> (u16 index)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets one entry in the table of nodes.  <a href="#g553b1ee14bf13a99a122ff51176477fd"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__associate.html#gc7cb66274b3cfecd07d44a4b122b1ad3">macInitNodes</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes the <a class="el" href="group__mac__associate.html#ge737679ec6b1e6d3942d7c5a029095da">nodes</a> array of <a class="el" href="structassociatedNodes__t.html">associatedNodes_t</a> structures.  <a href="#gc7cb66274b3cfecd07d44a4b122b1ad3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__associate.html#g243906ca038a1601687f0aa66aa63973">macWakeChildNode</a> (u16 addr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set a child node's entry to be woken up.  <a href="#g243906ca038a1601687f0aa66aa63973"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__associate.html#g281ac1d23beaf04aa2dfa01b01657e15">macClearChildWakeFlag</a> (u16 addr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Clear the wakeup flag for the given child node.  <a href="#g281ac1d23beaf04aa2dfa01b01657e15"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__associate.html#gc7f2013b75ca11c7e5ca07cec549d708">macChildIsAwake</a> (<a class="el" href="structftData.html">ftData</a> *frame)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Wake child node by sending it a packet.  <a href="#gc7f2013b75ca11c7e5ca07cec549d708"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="gf621466285e581ba924d5f6c8d447b24"></a><!-- doxytag: member="mac_associate::macFirstChild" ref="gf621466285e581ba924d5f6c8d447b24" args="(void)" -->
u16&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__associate.html#gf621466285e581ba924d5f6c8d447b24">macFirstChild</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the short address of the first child node (routers only), or zero if none found. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">u16&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__associate.html#g08076cfc03d60f1599548bee49f1e947">macNextChild</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the short address of the next child node (routers only), or zero if none found.  <a href="#g08076cfc03d60f1599548bee49f1e947"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">u8&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__associate.html#g18f2eb5c764a757970e9d7d72e47425b">macGetHopCount</a> (u16 node_short)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This will return the hop count for the associated node requested.  <a href="#g18f2eb5c764a757970e9d7d72e47425b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="g8edf1866545432a18445a85f0cd49e56"></a><!-- doxytag: member="mac_associate::MAXCHILDREN" ref="g8edf1866545432a18445a85f0cd49e56" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__associate.html#g8edf1866545432a18445a85f0cd49e56">MAXCHILDREN</a>&nbsp;&nbsp;&nbsp;50</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Number of children for a router. <br></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__associate.html#g339b747fe4e5bb7e7f252ba56727e3f5">PAN_CHANNEL</a>&nbsp;&nbsp;&nbsp;(CHANNEL255)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Channel used for the PAN.  <a href="#g339b747fe4e5bb7e7f252ba56727e3f5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__associate.html#g30931c9744e3a05a13e7c0f36ef20255">PAN_ID</a>&nbsp;&nbsp;&nbsp;BROADCASTPANID</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">PANID used for the PAN ID.  <a href="#g30931c9744e3a05a13e7c0f36ef20255"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__associate.html#g2fb9b58e4e5f14f40af8b4a1425841f8">event_t</a> { <br>
&nbsp;&nbsp;<a class="el" href="group__mac__associate.html#gg2fb9b58e4e5f14f40af8b4a1425841f840ed95f968b7c2745afbf6230910cf24">MAC_EVENT_RX</a> = 0x10, 
<a class="el" href="group__mac__associate.html#gg2fb9b58e4e5f14f40af8b4a1425841f83c364481dd46a97d7e200ba0639b5db2">MAC_EVENT_ACK</a>, 
<a class="el" href="group__mac__associate.html#gg2fb9b58e4e5f14f40af8b4a1425841f885c267479467e0c83437bc79b929d5cd">MAC_EVENT_NACK</a>, 
<a class="el" href="group__mac__associate.html#gg2fb9b58e4e5f14f40af8b4a1425841f8091d2580df2f03bbd2dc3d88ede40003">MAC_EVENT_ACCESS</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="group__mac__associate.html#gg2fb9b58e4e5f14f40af8b4a1425841f82cb3614905940da04ed37617f4f691fd">MAC_EVENT_SCAN</a>, 
<a class="el" href="group__mac__associate.html#gg2fb9b58e4e5f14f40af8b4a1425841f8a3b5fd4ebcce71ceb67f861db3e17b09">MAC_EVENT_BEACON_REQ</a>, 
<a class="el" href="group__mac__associate.html#gg2fb9b58e4e5f14f40af8b4a1425841f8b287d6750d848b11715a8e70c5da41ed">MAC_EVENT_TIMER</a>, 
<a class="el" href="group__mac__associate.html#gg2fb9b58e4e5f14f40af8b4a1425841f8f9dd86feba30725fbebc732127c504d7">MAC_EVENT_ASSOCIATION_REQUEST</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="group__mac__associate.html#gg2fb9b58e4e5f14f40af8b4a1425841f8ee76a889d65565078fc1551fb9c8d2e5">MAC_EVENT_ASSOCIATION_RESPONSE</a>, 
<a class="el" href="group__mac__associate.html#gg2fb9b58e4e5f14f40af8b4a1425841f8b263e633d64dc7a2f05313f3c9335c72">MAC_EVENT_ROUTE</a>
<br>
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">List of event types processed by the MAC event system.  <a href="group__mac__associate.html#g2fb9b58e4e5f14f40af8b4a1425841f8">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">u8&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__associate.html#gdd0c24c8a506bc29abe1ec095bb9dbc0">mac_event_pending</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Checks for any pending events in the queue.  <a href="#gdd0c24c8a506bc29abe1ec095bb9dbc0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__associate.html#g546b1497ed4c233b1bbfcc34c0b386be">mac_put_event</a> (<a class="el" href="structevent__object__t.html">event_object_t</a> *object)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Puts an event into the queue of events.  <a href="#g546b1497ed4c233b1bbfcc34c0b386be"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structevent__object__t.html">event_object_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__associate.html#g80999c6d92ebf45c7cf293881fc6f58f">mac_get_event</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pulls an event from the event queue.  <a href="#g80999c6d92ebf45c7cf293881fc6f58f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mac__associate.html#g9b4bd3c99bd01a997dfbf36de2db14ae">macTask</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This is the main loop task for the MAC.  <a href="#g9b4bd3c99bd01a997dfbf36de2db14ae"></a><br></td></tr>
</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="g339b747fe4e5bb7e7f252ba56727e3f5"></a><!-- doxytag: member="mac.h::PAN_CHANNEL" ref="g339b747fe4e5bb7e7f252ba56727e3f5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PAN_CHANNEL&nbsp;&nbsp;&nbsp;(CHANNEL255)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Channel used for the PAN. 
<p>
This definition is used by all node types. If the PAN_CHANNEL macro is set to CHANNEL255, then the node will scan channels before either choosing an operating channel (coordinator), or picking a parent node (router and end nodes). 
<p>Definition at line <a class="el" href="mac_8h-source.html#l00233">233</a> of file <a class="el" href="mac_8h-source.html">mac.h</a>.</p>

<p>Referenced by <a class="el" href="mac__scan_8c-source.html#l00478">macFindClearChannel()</a>, and <a class="el" href="mac__scan_8c-source.html#l00193">macScan()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g30931c9744e3a05a13e7c0f36ef20255"></a><!-- doxytag: member="mac.h::PAN_ID" ref="g30931c9744e3a05a13e7c0f36ef20255" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PAN_ID&nbsp;&nbsp;&nbsp;BROADCASTPANID          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
PANID used for the PAN ID. 
<p>
This is only used by the coordinator. If this macro is set to BROADCASTPANID, then the coordinator chooses a random PAN ID. 
<p>Definition at line <a class="el" href="mac_8h-source.html#l00255">255</a> of file <a class="el" href="mac_8h-source.html">mac.h</a>.</p>

<p>Referenced by <a class="el" href="mac__start_8c-source.html#l00044">macStartCoord()</a>, and <a class="el" href="mac__scan_8c-source.html#l00165">sendBeaconRequest()</a>.</p>

</div>
</div><p>
<hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="g2fb9b58e4e5f14f40af8b4a1425841f8"></a><!-- doxytag: member="mac_event.h::event_t" ref="g2fb9b58e4e5f14f40af8b4a1425841f8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__mac__associate.html#g2fb9b58e4e5f14f40af8b4a1425841f8">event_t</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
List of event types processed by the MAC event system. 
<p>
<dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="gg2fb9b58e4e5f14f40af8b4a1425841f840ed95f968b7c2745afbf6230910cf24"></a><!-- doxytag: member="MAC_EVENT_RX" ref="gg2fb9b58e4e5f14f40af8b4a1425841f840ed95f968b7c2745afbf6230910cf24" args="" -->MAC_EVENT_RX</em>&nbsp;</td><td>
This node has received a packet. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gg2fb9b58e4e5f14f40af8b4a1425841f83c364481dd46a97d7e200ba0639b5db2"></a><!-- doxytag: member="MAC_EVENT_ACK" ref="gg2fb9b58e4e5f14f40af8b4a1425841f83c364481dd46a97d7e200ba0639b5db2" args="" -->MAC_EVENT_ACK</em>&nbsp;</td><td>
Received an ACK frame. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gg2fb9b58e4e5f14f40af8b4a1425841f885c267479467e0c83437bc79b929d5cd"></a><!-- doxytag: member="MAC_EVENT_NACK" ref="gg2fb9b58e4e5f14f40af8b4a1425841f885c267479467e0c83437bc79b929d5cd" args="" -->MAC_EVENT_NACK</em>&nbsp;</td><td>
Sent frame failed. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gg2fb9b58e4e5f14f40af8b4a1425841f8091d2580df2f03bbd2dc3d88ede40003"></a><!-- doxytag: member="MAC_EVENT_ACCESS" ref="gg2fb9b58e4e5f14f40af8b4a1425841f8091d2580df2f03bbd2dc3d88ede40003" args="" -->MAC_EVENT_ACCESS</em>&nbsp;</td><td>
Channel access failure. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gg2fb9b58e4e5f14f40af8b4a1425841f82cb3614905940da04ed37617f4f691fd"></a><!-- doxytag: member="MAC_EVENT_SCAN" ref="gg2fb9b58e4e5f14f40af8b4a1425841f82cb3614905940da04ed37617f4f691fd" args="" -->MAC_EVENT_SCAN</em>&nbsp;</td><td>
This node received a beacon frame. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gg2fb9b58e4e5f14f40af8b4a1425841f8a3b5fd4ebcce71ceb67f861db3e17b09"></a><!-- doxytag: member="MAC_EVENT_BEACON_REQ" ref="gg2fb9b58e4e5f14f40af8b4a1425841f8a3b5fd4ebcce71ceb67f861db3e17b09" args="" -->MAC_EVENT_BEACON_REQ</em>&nbsp;</td><td>
This node received a beacon request frame. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gg2fb9b58e4e5f14f40af8b4a1425841f8b287d6750d848b11715a8e70c5da41ed"></a><!-- doxytag: member="MAC_EVENT_TIMER" ref="gg2fb9b58e4e5f14f40af8b4a1425841f8b287d6750d848b11715a8e70c5da41ed" args="" -->MAC_EVENT_TIMER</em>&nbsp;</td><td>
The timer has expired. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gg2fb9b58e4e5f14f40af8b4a1425841f8f9dd86feba30725fbebc732127c504d7"></a><!-- doxytag: member="MAC_EVENT_ASSOCIATION_REQUEST" ref="gg2fb9b58e4e5f14f40af8b4a1425841f8f9dd86feba30725fbebc732127c504d7" args="" -->MAC_EVENT_ASSOCIATION_REQUEST</em>&nbsp;</td><td>
Received an association request frame. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gg2fb9b58e4e5f14f40af8b4a1425841f8ee76a889d65565078fc1551fb9c8d2e5"></a><!-- doxytag: member="MAC_EVENT_ASSOCIATION_RESPONSE" ref="gg2fb9b58e4e5f14f40af8b4a1425841f8ee76a889d65565078fc1551fb9c8d2e5" args="" -->MAC_EVENT_ASSOCIATION_RESPONSE</em>&nbsp;</td><td>
Received an association response frame. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gg2fb9b58e4e5f14f40af8b4a1425841f8b263e633d64dc7a2f05313f3c9335c72"></a><!-- doxytag: member="MAC_EVENT_ROUTE" ref="gg2fb9b58e4e5f14f40af8b4a1425841f8b263e633d64dc7a2f05313f3c9335c72" args="" -->MAC_EVENT_ROUTE</em>&nbsp;</td><td>
Received a routing packet. </td></tr>
</table>
</dl>

<p>Definition at line <a class="el" href="mac__event_8h-source.html#l00050">50</a> of file <a class="el" href="mac__event_8h-source.html">mac_event.h</a>.</p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="g4a19318e111a0c13ce3ab17bcc65e37f"></a><!-- doxytag: member="mac_associate.c::addNode" ref="g4a19318e111a0c13ce3ab17bcc65e37f" args="(u8 type, u64 *macAddr, u16 parentAddr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u16 addNode           </td>
          <td>(</td>
          <td class="paramtype">u8&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64 *&nbsp;</td>
          <td class="paramname"> <em>macAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u16&nbsp;</td>
          <td class="paramname"> <em>parentAddr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add a node to the table of nodes, and return a short address for the new node. 
<p>
This code only runs on the coordinator.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>The node type, see <a class="el" href="group__mac.html#g59569ff056c7f0f124222ca0013728d5">NODETYPE</a>.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>macAddr</em>&nbsp;</td><td>The long 8-byte MAC address of the new node.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>parentAddr</em>&nbsp;</td><td>Short address of the parent of the new node.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The short address for the new node. </dd></dl>

<p>Definition at line <a class="el" href="mac__associate_8c-source.html#l00306">306</a> of file <a class="el" href="mac__associate_8c-source.html">mac_associate.c</a>.</p>

<p>References <a class="el" href="mac_8h-source.html#l00285">COORD</a>, <a class="el" href="mac__associate_8h-source.html#l00046">associatedNodes_t::lastRoutedAddress</a>, <a class="el" href="mac__associate_8h-source.html#l00044">associatedNodes_t::nodeLongAddress</a>, <a class="el" href="mac__associate_8c-source.html#l00079">nodes</a>, <a class="el" href="mac__associate_8h-source.html#l00043">associatedNodes_t::nodeType</a>, <a class="el" href="mac_8h-source.html#l00328">NODETYPE</a>, <a class="el" href="mac__associate_8h-source.html#l00045">associatedNodes_t::parentShortAddress</a>, and <a class="el" href="mac__associate_8h-source.html#l00047">associatedNodes_t::wakeup</a>.</p>

<p>Referenced by <a class="el" href="mac__associate_8c-source.html#l00175">macAssociationResponse()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g4a2dbfd0649a23ba01d86f5f178a3514"></a><!-- doxytag: member="mac_associate.c::findFirstChild" ref="g4a2dbfd0649a23ba01d86f5f178a3514" args="(u16 addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u16 findFirstChild           </td>
          <td>(</td>
          <td class="paramtype">u16&nbsp;</td>
          <td class="paramname"> <em>addr</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Find the first child in the network table of a given parent node. 
<p>
This function only runs on the coordinator node.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>addr</em>&nbsp;</td><td>The short address of the parent node.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The short address of the first child node of addr in the network table.<p>
Zero if no child was found. </dd></dl>

<p>Definition at line <a class="el" href="mac__associate_8c-source.html#l00692">692</a> of file <a class="el" href="mac__associate_8c-source.html">mac_associate.c</a>.</p>

<p>References <a class="el" href="mac_8h-source.html#l00285">COORD</a>, <a class="el" href="mac__associate_8c-source.html#l00079">nodes</a>, and <a class="el" href="mac_8h-source.html#l00328">NODETYPE</a>.</p>

<p>Referenced by <a class="el" href="mac__associate_8c-source.html#l00754">macPrintTree()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g8ea900490f4d660861f484584c9f012a"></a><!-- doxytag: member="mac_associate.c::findNextSibling" ref="g8ea900490f4d660861f484584c9f012a" args="(u16 addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u16 findNextSibling           </td>
          <td>(</td>
          <td class="paramtype">u16&nbsp;</td>
          <td class="paramname"> <em>addr</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Find the next sibling node of a given node. 
<p>
This function only runs on the coordinator node.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>addr</em>&nbsp;</td><td>The short address of the node to query.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The short address of the next sibling of the node given in the network table.<p>
Zero if no next sibling node was found. </dd></dl>

<p>Definition at line <a class="el" href="mac__associate_8c-source.html#l00725">725</a> of file <a class="el" href="mac__associate_8c-source.html">mac_associate.c</a>.</p>

<p>References <a class="el" href="mac_8h-source.html#l00285">COORD</a>, <a class="el" href="mac__associate_8c-source.html#l00079">nodes</a>, <a class="el" href="mac_8h-source.html#l00328">NODETYPE</a>, and <a class="el" href="mac__associate_8h-source.html#l00045">associatedNodes_t::parentShortAddress</a>.</p>

<p>Referenced by <a class="el" href="mac__associate_8c-source.html#l00754">macPrintTree()</a>.</p>

</div>
</div><p>
<a class="anchor" name="gdd0c24c8a506bc29abe1ec095bb9dbc0"></a><!-- doxytag: member="mac_event.h::mac_event_pending" ref="gdd0c24c8a506bc29abe1ec095bb9dbc0" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u8 mac_event_pending           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Checks for any pending events in the queue. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>True if there is a pending event, else false. </dd></dl>

<p>Definition at line <a class="el" href="mac__event_8c-source.html#l00077">77</a> of file <a class="el" href="mac__event_8c-source.html">mac_event.c</a>.</p>

<p>References <a class="el" href="mac__event_8c-source.html#l00064">event_queue_t::head</a>, and <a class="el" href="mac__event_8c-source.html#l00065">event_queue_t::tail</a>.</p>

<p>Referenced by <a class="el" href="mac__event_8c-source.html#l00141">macTask()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g80999c6d92ebf45c7cf293881fc6f58f"></a><!-- doxytag: member="mac_event.h::mac_get_event" ref="g80999c6d92ebf45c7cf293881fc6f58f" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structevent__object__t.html">event_object_t</a>* mac_get_event           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Pulls an event from the event queue. 
<p>
Assumes that there is an event in the queue. Be sure that <a class="el" href="group__mac__event.html#gdd0c24c8a506bc29abe1ec095bb9dbc0" title="Checks for any pending events in the queue.">mac_event_pending()</a> returns true before calling this function.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Pointer to the event object, or garbage data if the queue is empty. </dd></dl>

<p>Definition at line <a class="el" href="mac__event_8c-source.html#l00116">116</a> of file <a class="el" href="mac__event_8c-source.html">mac_event.c</a>.</p>

<p>References <a class="el" href="mac__event_8c-source.html#l00066">event_queue_t::event_object</a>, <a class="el" href="mac__event_8c-source.html#l00060">MAX_EVENTS</a>, and <a class="el" href="mac__event_8c-source.html#l00065">event_queue_t::tail</a>.</p>

<p>Referenced by <a class="el" href="mac__event_8c-source.html#l00141">macTask()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g546b1497ed4c233b1bbfcc34c0b386be"></a><!-- doxytag: member="mac_event.h::mac_put_event" ref="g546b1497ed4c233b1bbfcc34c0b386be" args="(event_object_t *object)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mac_put_event           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structevent__object__t.html">event_object_t</a> *&nbsp;</td>
          <td class="paramname"> <em>object</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Puts an event into the queue of events. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>object</em>&nbsp;</td><td>is a pointer to the event to add to queue. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="mac__event_8c-source.html#l00088">88</a> of file <a class="el" href="mac__event_8c-source.html">mac_event.c</a>.</p>

<p>References <a class="el" href="mac__event_8c-source.html#l00066">event_queue_t::event_object</a>, <a class="el" href="mac__event_8c-source.html#l00064">event_queue_t::head</a>, <a class="el" href="mac__event_8c-source.html#l00060">MAX_EVENTS</a>, and <a class="el" href="mac__event_8c-source.html#l00065">event_queue_t::tail</a>.</p>

<p>Referenced by <a class="el" href="avr__timer_8c-source.html#l00348">ISR()</a>, and <a class="el" href="radio_8c-source.html#l00218">radioTrxEndEvent()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g3ac1cb22fa29ec5180f1c0d3eaaf7839"></a><!-- doxytag: member="mac_associate.c::macAddChild" ref="g3ac1cb22fa29ec5180f1c0d3eaaf7839" args="(u16 shortAddr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void macAddChild           </td>
          <td>(</td>
          <td class="paramtype">u16&nbsp;</td>
          <td class="paramname"> <em>shortAddr</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add a newly-associated node to this router's child table. 
<p>
Only directly-connected nodes are added to the table. This function only applies to router nodes.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>shortAddr</em>&nbsp;</td><td>The short address of the newly associated node to add to the table. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="mac__associate_8c-source.html#l00559">559</a> of file <a class="el" href="mac__associate_8c-source.html">mac_associate.c</a>.</p>

<p>References <a class="el" href="rum__application_8c-source.html#l00530">appChildAssociated()</a>, <a class="el" href="mac__associate_8c-source.html#l00093">childNodes</a>, <a class="el" href="mac__associate_8c-source.html#l00082">MAXCHILDREN</a>, <a class="el" href="mac_8h-source.html#l00328">NODETYPE</a>, and <a class="el" href="mac_8h-source.html#l00286">ROUTER</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="group__mac__associate_g3ac1cb22fa29ec5180f1c0d3eaaf7839_cgraph.png" border="0" usemap="#group__mac__associate_g3ac1cb22fa29ec5180f1c0d3eaaf7839_cgraph_map" alt=""></center>
<map name="group__mac__associate_g3ac1cb22fa29ec5180f1c0d3eaaf7839_cgraph_map">
<area shape="rect" href="group__app.html#g8536fa62911e3b087d0811af3649b329" title="Callback function, called when the MAC has associated a child of this node to the..." alt="" coords="152,5,288,32"><area shape="rect" href="group__timer__module.html#g0155e5192956b3cd498751d8652f7773" title="Sets a general purpose timer." alt="" coords="337,5,436,32"></map>
</div>

</div>
</div><p>
<a class="anchor" name="ge044ad02d7a264fe88176c4076809853"></a><!-- doxytag: member="mac_associate.c::macAssociate" ref="ge044ad02d7a264fe88176c4076809853" args="(u16 shortAddr, u8 channel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void macAssociate           </td>
          <td>(</td>
          <td class="paramtype">u16&nbsp;</td>
          <td class="paramname"> <em>shortAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8&nbsp;</td>
          <td class="paramname"> <em>channel</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Associate this node with a network. 
<p>
The caller must supply the channel to use and what short address to associate with. Most likely the scan function <a class="el" href="group__mac__scan.html#g9b962c94bc13ed89a2d2a8590ed487f4" title="Scan channels for coordinators.">macScan()</a> has been called to obtain these parameters.<p>
This function only sends a direct association request, because this node does not have a short address yet.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>shortAddr</em>&nbsp;</td><td>The short address of the prospective parent node. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>channel</em>&nbsp;</td><td>The channel of the network to join. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="mac__associate_8c-source.html#l00107">107</a> of file <a class="el" href="mac__associate_8c-source.html">mac_associate.c</a>.</p>

<p>References <a class="el" href="mac_8h-source.html#l00401">ASSOCIATION_REQUEST</a>, <a class="el" href="mac_8h-source.html#l00480">ASSOCIATION_TIMEOUT</a>, <a class="el" href="mac_8h-source.html#l00570">ftAssocReqDirect::cmd</a>, <a class="el" href="mac_8h-source.html#l00285">COORD</a>, <a class="el" href="mac_8h-source.html#l00568">ftAssocReqDirect::destAddr</a>, <a class="el" href="mac_8h-source.html#l00697">macConfig_t::dsn</a>, <a class="el" href="mac_8h-source.html#l00565">ftAssocReqDirect::fcf</a>, <a class="el" href="mac_8h-source.html#l00427">FCF_ASSOC_REQ_DIRECT</a>, <a class="el" href="mac_8h-source.html#l00694">macConfig_t::longAddr</a>, <a class="el" href="mac_8c-source.html#l00065">mac_buffer_tx</a>, <a class="el" href="mac__associate_8c-source.html#l00147">macAssociationConfirm()</a>, <a class="el" href="mac_8c-source.html#l00056">macConfig</a>, <a class="el" href="avr__timer_8c-source.html#l00158">macSetAlarm()</a>, <a class="el" href="mac_8c-source.html#l00135">macSetOperatingChannel()</a>, <a class="el" href="mac_8h-source.html#l00328">NODETYPE</a>, <a class="el" href="mac_8h-source.html#l00698">macConfig_t::panId</a>, <a class="el" href="mac_8h-source.html#l00567">ftAssocReqDirect::panid</a>, <a class="el" href="mac_8h-source.html#l00571">ftAssocReqDirect::parentAddr</a>, <a class="el" href="radio_8c-source.html#l00983">radioSendData()</a>, <a class="el" href="mac_8h-source.html#l00566">ftAssocReqDirect::seq</a>, <a class="el" href="mac_8h-source.html#l00569">ftAssocReqDirect::srcAddr</a>, <a class="el" href="mac_8h-source.html#l00572">ftAssocReqDirect::type</a>, and <a class="el" href="mac_8h-source.html#l00206">VLP</a>.</p>

<p>Referenced by <a class="el" href="rum__application_8c-source.html#l00614">appAssociate()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="group__mac__associate_ge044ad02d7a264fe88176c4076809853_cgraph.png" border="0" usemap="#group__mac__associate_ge044ad02d7a264fe88176c4076809853_cgraph_map" alt=""></center>
<map name="group__mac__associate_ge044ad02d7a264fe88176c4076809853_cgraph_map">
<area shape="rect" href="group__mac__associate.html#g43b554aefc8950ec2c7591a400fb8559" title="This function is called when the MAC receives an association response frame." alt="" coords="164,56,321,83"><area shape="rect" href="group__timer__module.html#g0155e5192956b3cd498751d8652f7773" title="Sets a general purpose timer." alt="" coords="569,56,668,83"><area shape="rect" href="group__mac.html#g62d975ef98590e2c23229df7b6d041c6" title="Set the radio&#39;s operating channel, and saves that channel to the MAC&#39;s global..." alt="" coords="159,157,327,184"><area shape="rect" href="group__radio.html#g73d762673c6af21f4fb6b6ba6c06cc63" title="This function will download a frame to the radio transceiver&#39;s transmit buffer..." alt="" coords="189,208,296,235"><area shape="rect" href="group__app.html#g85919e96b4d8f3aee13a5eb3a10dfd03" title="Callback function, called when the MAC receives an association confirm packet addressed..." alt="" coords="376,5,520,32"><area shape="rect" href="group__timer__module.html#g424100b5b43a9d709cec3d509ef6f48c" title="End the timer specified by ID, before it is expired." alt="" coords="397,56,499,83"></map>
</div>

</div>
</div><p>
<a class="anchor" name="g43b554aefc8950ec2c7591a400fb8559"></a><!-- doxytag: member="mac_associate.c::macAssociationConfirm" ref="g43b554aefc8950ec2c7591a400fb8559" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void macAssociationConfirm           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function is called when the MAC receives an association response frame. 
<p>
This function stops the association timeout timer, and call the callback function <a class="el" href="group__app.html#g85919e96b4d8f3aee13a5eb3a10dfd03">appAssociateConfirm</a>. 
<p>Definition at line <a class="el" href="mac__associate_8c-source.html#l00147">147</a> of file <a class="el" href="mac__associate_8c-source.html">mac_associate.c</a>.</p>

<p>References <a class="el" href="rum__application_8c-source.html#l00555">appAssociateConfirm()</a>, <a class="el" href="mac_8h-source.html#l00695">macConfig_t::associated</a>, <a class="el" href="mac_8h-source.html#l00285">COORD</a>, <a class="el" href="mac_8c-source.html#l00056">macConfig</a>, <a class="el" href="avr__timer_8c-source.html#l00287">macTimerEnd()</a>, and <a class="el" href="mac_8h-source.html#l00328">NODETYPE</a>.</p>

<p>Referenced by <a class="el" href="mac__associate_8c-source.html#l00107">macAssociate()</a>, and <a class="el" href="mac__event_8c-source.html#l00141">macTask()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="group__mac__associate_g43b554aefc8950ec2c7591a400fb8559_cgraph.png" border="0" usemap="#group__mac__associate_g43b554aefc8950ec2c7591a400fb8559_cgraph_map" alt=""></center>
<map name="group__mac__associate_g43b554aefc8950ec2c7591a400fb8559_cgraph_map">
<area shape="rect" href="group__app.html#g85919e96b4d8f3aee13a5eb3a10dfd03" title="Callback function, called when the MAC receives an association confirm packet addressed..." alt="" coords="213,132,357,159"><area shape="rect" href="group__timer__module.html#g424100b5b43a9d709cec3d509ef6f48c" title="End the timer specified by ID, before it is expired." alt="" coords="600,196,701,223"><area shape="rect" href="group__app.html#g83f230018f0884c336002b3005395314" title="Example function, starts the network by scanning channels for a coordinator." alt="" coords="429,6,528,32"><area shape="rect" href="group__timer__module.html#g0155e5192956b3cd498751d8652f7773" title="Sets a general purpose timer." alt="" coords="601,120,700,147"><area shape="rect" href="group__sleep.html#g93b5cdc0c2f6e617c9e63fac53cc8271" title="Put the node to sleep." alt="" coords="437,107,520,134"><area shape="rect" href="group__sensors.html#gcab00d2731b419ed4dbf8e29e57a712a" title="Begin auto&#45;sending data after powerup." alt="" coords="407,158,551,184"><area shape="rect" href="group__sensors.html#ge0815bb7fb90effa997f450cedc67ec4" title="Initialize the sensor system by configuring the A/D converter." alt="" coords="440,208,517,235"></map>
</div>

</div>
</div><p>
<a class="anchor" name="gb66e6617d404824a1be943d829ed0d8e"></a><!-- doxytag: member="mac_associate.c::macAssociationResponse" ref="gb66e6617d404824a1be943d829ed0d8e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void macAssociationResponse           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function is called when an association request is received by this node (and this node is coordinator). 
<p>
The frame is held in the global mac_buffer array. 
<p>Definition at line <a class="el" href="mac__associate_8c-source.html#l00175">175</a> of file <a class="el" href="mac__associate_8c-source.html">mac_associate.c</a>.</p>

<p>References <a class="el" href="mac__associate_8c-source.html#l00306">addNode()</a>, <a class="el" href="rum__application_8c-source.html#l00530">appChildAssociated()</a>, <a class="el" href="rum__application_8c-source.html#l00544">appNodeAssociated()</a>, <a class="el" href="mac_8h-source.html#l00402">ASSOCIATION_RESPONSE</a>, <a class="el" href="mac_8h-source.html#l00378">BROADCASTADDR</a>, <a class="el" href="mac_8h-source.html#l00705">macConfig_t::busy</a>, <a class="el" href="mac_8h-source.html#l00597">ftAssocRespDirect::cmd</a>, <a class="el" href="mac_8h-source.html#l00609">ftAssocRespIndirect::cmd</a>, <a class="el" href="mac_8h-source.html#l00285">COORD</a>, <a class="el" href="mac_8h-source.html#l00295">DEFAULT_COORD_ADDR</a>, <a class="el" href="mac_8h-source.html#l00697">macConfig_t::dsn</a>, <a class="el" href="mac_8h-source.html#l00595">ftAssocRespDirect::dstAddr</a>, <a class="el" href="mac_8h-source.html#l00607">ftAssocRespIndirect::dstAddr</a>, <a class="el" href="mac_8h-source.html#l00592">ftAssocRespDirect::fcf</a>, <a class="el" href="mac_8h-source.html#l00604">ftAssocRespIndirect::fcf</a>, <a class="el" href="mac_8h-source.html#l00427">FCF_ASSOC_REQ_DIRECT</a>, <a class="el" href="mac_8h-source.html#l00428">FCF_ASSOC_REQ_IND</a>, <a class="el" href="mac_8h-source.html#l00430">FCF_ASSOC_RESP_DIRECT</a>, <a class="el" href="mac_8h-source.html#l00429">FCF_ASSOC_RESP_IND</a>, <a class="el" href="mac_8c-source.html#l00066">mac_buffer_rx</a>, <a class="el" href="mac_8c-source.html#l00065">mac_buffer_tx</a>, <a class="el" href="mac_8h-source.html#l00481">MAC_RP_DELAY</a>, <a class="el" href="mac_8h-source.html#l00611">ftAssocRespIndirect::macAddr</a>, <a class="el" href="mac_8h-source.html#l00585">ftAssocReqIndirect::macAddr</a>, <a class="el" href="mac_8c-source.html#l00056">macConfig</a>, <a class="el" href="mac__associate_8c-source.html#l01342">macGetHopCount()</a>, <a class="el" href="mac__associate_8c-source.html#l00455">macGetNodeAddr()</a>, <a class="el" href="mac__associate_8c-source.html#l01059">macNotifyDrop()</a>, <a class="el" href="mac__associate_8c-source.html#l00605">macRemoveChild()</a>, <a class="el" href="mac__route_8c-source.html#l00312">macSendRoutingPacket()</a>, <a class="el" href="avr__timer_8c-source.html#l00158">macSetAlarm()</a>, <a class="el" href="mac__associate_8c-source.html#l00079">nodes</a>, <a class="el" href="mac_8h-source.html#l00328">NODETYPE</a>, <a class="el" href="mac_8h-source.html#l00594">ftAssocRespDirect::panid</a>, <a class="el" href="mac_8h-source.html#l00698">macConfig_t::panId</a>, <a class="el" href="mac_8h-source.html#l00606">ftAssocRespIndirect::panid</a>, <a class="el" href="mac_8h-source.html#l00610">ftAssocRespIndirect::parentAddr</a>, <a class="el" href="mac_8h-source.html#l00584">ftAssocReqIndirect::parentAddr</a>, <a class="el" href="mac__associate_8h-source.html#l00045">associatedNodes_t::parentShortAddress</a>, <a class="el" href="radio_8c-source.html#l00983">radioSendData()</a>, <a class="el" href="mac_8h-source.html#l00593">ftAssocRespDirect::seq</a>, <a class="el" href="mac_8h-source.html#l00605">ftAssocRespIndirect::seq</a>, <a class="el" href="mac_8h-source.html#l00598">ftAssocRespDirect::shortAddr</a>, <a class="el" href="mac_8h-source.html#l00612">ftAssocRespIndirect::shortAddr</a>, <a class="el" href="mac_8h-source.html#l00699">macConfig_t::shortAddress</a>, <a class="el" href="mac_8h-source.html#l00596">ftAssocRespDirect::srcAddr</a>, <a class="el" href="mac_8h-source.html#l00569">ftAssocReqDirect::srcAddr</a>, <a class="el" href="mac_8h-source.html#l00608">ftAssocRespIndirect::srcAddr</a>, <a class="el" href="mac_8h-source.html#l00582">ftAssocReqIndirect::srcAddr</a>, <a class="el" href="mac_8h-source.html#l00572">ftAssocReqDirect::type</a>, and <a class="el" href="mac_8h-source.html#l00586">ftAssocReqIndirect::type</a>.</p>

<p>Referenced by <a class="el" href="mac__event_8c-source.html#l00141">macTask()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="group__mac__associate_gb66e6617d404824a1be943d829ed0d8e_cgraph.png" border="0" usemap="#group__mac__associate_gb66e6617d404824a1be943d829ed0d8e_cgraph_map" alt=""></center>
<map name="group__mac__associate_gb66e6617d404824a1be943d829ed0d8e_cgraph_map">
<area shape="rect" href="group__mac__associate.html#g4a19318e111a0c13ce3ab17bcc65e37f" title="Add a node to the table of nodes, and return a short address for the new node." alt="" coords="272,5,344,32"><area shape="rect" href="group__app.html#g8536fa62911e3b087d0811af3649b329" title="Callback function, called when the MAC has associated a child of this node to the..." alt="" coords="240,56,376,82"><area shape="rect" href="group__timer__module.html#g0155e5192956b3cd498751d8652f7773" title="Sets a general purpose timer." alt="" coords="452,106,551,133"><area shape="rect" href="group__app.html#g65f0f14844e8b09a2d33a5b377c56b1b" title="Callback function, called when the MAC has associated a new node to a network." alt="" coords="240,157,376,184"><area shape="rect" href="group__mac__associate.html#g18f2eb5c764a757970e9d7d72e47425b" title="This will return the hop count for the associated node requested." alt="" coords="247,208,369,234"><area shape="rect" href="group__mac__associate.html#g23e06fe2d0b2ad5f7653daa88d86d8c9" title="Find a node&#39;s short address given the node&#39;s long MAC address." alt="" coords="247,258,369,285"><area shape="rect" href="group__mac__associate.html#g2dde2bdb54d1319810d247e434baa0d8" title="Sends a frame from the coordinator notifying a router to drop a child from its table..." alt="" coords="255,309,361,336"><area shape="rect" href="group__mac__associate.html#g18e0aeff533ca9a9e8bb2788eb8648e1" title="Remove a node from the child table." alt="" coords="248,360,368,386"><area shape="rect" href="group__mac.html#g2809f7f1254ef0b25b95136d2aff6b06" title="Create and send a routing packet, returns non&#45;zero if packet was sent." alt="" coords="228,410,388,437"><area shape="rect" href="group__radio.html#g73d762673c6af21f4fb6b6ba6c06cc63" title="This function will download a frame to the radio transceiver&#39;s transmit buffer..." alt="" coords="448,461,555,488"><area shape="rect" href="group__mac__associate.html#g4a6a372f2dd95a1cd7d0a3cb635bc4eb" title="Create a routing packet." alt="" coords="443,309,560,336"><area shape="rect" href="group__mac__associate.html#gcfefe3f998d94f694b004a72b8b777fb" title="Get the last routed address of one of the router nodes in the network." alt="" coords="439,360,564,386"><area shape="rect" href="group__mac__associate.html#geac81ec5acd0fa702167c9f8b0ce29b2" title="Sets the last routed address for a router node." alt="" coords="439,410,564,437"></map>
</div>

</div>
</div><p>
<a class="anchor" name="gc7f2013b75ca11c7e5ca07cec549d708"></a><!-- doxytag: member="mac_associate.c::macChildIsAwake" ref="gc7f2013b75ca11c7e5ca07cec549d708" args="(ftData *frame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void macChildIsAwake           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structftData.html">ftData</a> *&nbsp;</td>
          <td class="paramname"> <em>frame</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Wake child node by sending it a packet. 
<p>
This function checks to see if the incoming data packet is from a child of this node, and if the child node is sleeping, the wakeup packet is sent.<p>
This function is called on the receipt of every packet.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>frame</em>&nbsp;</td><td>Pointer to <a class="el" href="structftData.html" title="Data packet, used for data and some MAC functions (see type element).">ftData</a> struct, the received packet. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="mac__associate_8c-source.html#l01237">1237</a> of file <a class="el" href="mac__associate_8c-source.html">mac_associate.c</a>.</p>

<p>References <a class="el" href="mac__associate_8c-source.html#l00093">childNodes</a>, <a class="el" href="mac_8h-source.html#l00285">COORD</a>, <a class="el" href="mac_8h-source.html#l00287">ENDDEVICE</a>, <a class="el" href="mac__associate_8c-source.html#l00479">macIsChild()</a>, <a class="el" href="mac__data_8c-source.html#l00485">macSendStoredFrame()</a>, <a class="el" href="mac__data_8c-source.html#l00217">macWakeRequest()</a>, <a class="el" href="mac__associate_8c-source.html#l00082">MAXCHILDREN</a>, <a class="el" href="mac__associate_8c-source.html#l00079">nodes</a>, <a class="el" href="mac_8h-source.html#l00328">NODETYPE</a>, <a class="el" href="mac_8h-source.html#l00636">ftData::originAddr</a>, <a class="el" href="mac_8h-source.html#l00286">ROUTER</a>, <a class="el" href="system_8h-source.html#l00522">RUMSLEEP</a>, <a class="el" href="mac__associate_8h-source.html#l00048">associatedNodes_t::sleeping</a>, <a class="el" href="mac_8h-source.html#l00637">ftData::type</a>, <a class="el" href="mac_8h-source.html#l00469">WAKE_NODE</a>, and <a class="el" href="mac__associate_8h-source.html#l00047">associatedNodes_t::wakeup</a>.</p>

<p>Referenced by <a class="el" href="mac__event_8c-source.html#l00141">macTask()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="group__mac__associate_gc7f2013b75ca11c7e5ca07cec549d708_cgraph.png" border="0" usemap="#group__mac__associate_gc7f2013b75ca11c7e5ca07cec549d708_cgraph_map" alt=""></center>
<map name="group__mac__associate_gc7f2013b75ca11c7e5ca07cec549d708_cgraph_map">
<area shape="rect" href="group__mac__associate.html#ged6df4ec4a8b1f717d6591f7bc73627a" title="Determine if a given node is a child if this node." alt="" coords="563,37,648,64"><area shape="rect" href="group__mac__data.html#g9c1b5a5c1f446093869b9721f0b7d652" title="Send a frame that has been stored for a child node." alt="" coords="179,37,331,64"><area shape="rect" href="group__mac__data.html#gda801fb2177a22220f4c3f3c9a8d1db0" title="The macWakeRequest function is called by the coordinator to send a wakeup packet..." alt="" coords="191,88,319,115"><area shape="rect" href="group__radio.html#g73d762673c6af21f4fb6b6ba6c06cc63" title="This function will download a frame to the radio transceiver&#39;s transmit buffer..." alt="" coords="393,37,500,64"><area shape="rect" href="group__mac__data.html#gecb7b33bf7233d79d0a261dca1943c56" title="The macsixlowpanDataRequest function is used to send a frame over the air to another..." alt="" coords="379,88,515,115"></map>
</div>

</div>
</div><p>
<a class="anchor" name="g281ac1d23beaf04aa2dfa01b01657e15"></a><!-- doxytag: member="mac_associate.c::macClearChildWakeFlag" ref="g281ac1d23beaf04aa2dfa01b01657e15" args="(u16 addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void macClearChildWakeFlag           </td>
          <td>(</td>
          <td class="paramtype">u16&nbsp;</td>
          <td class="paramname"> <em>addr</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Clear the wakeup flag for the given child node. 
<p>
This is called when the child wakes up and sends a WAKE_NODE packet back to the parent.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>addr</em>&nbsp;</td><td>The short address of the child node that has woken up. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="mac__associate_8c-source.html#l01196">1196</a> of file <a class="el" href="mac__associate_8c-source.html">mac_associate.c</a>.</p>

<p>References <a class="el" href="mac__associate_8c-source.html#l00093">childNodes</a>, <a class="el" href="mac_8h-source.html#l00285">COORD</a>, <a class="el" href="mac__associate_8c-source.html#l00479">macIsChild()</a>, <a class="el" href="mac__associate_8c-source.html#l00082">MAXCHILDREN</a>, <a class="el" href="mac__associate_8c-source.html#l00079">nodes</a>, <a class="el" href="mac_8h-source.html#l00328">NODETYPE</a>, <a class="el" href="mac_8h-source.html#l00286">ROUTER</a>, <a class="el" href="system_8h-source.html#l00522">RUMSLEEP</a>, and <a class="el" href="mac__associate_8h-source.html#l00047">associatedNodes_t::wakeup</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="group__mac__associate_g281ac1d23beaf04aa2dfa01b01657e15_cgraph.png" border="0" usemap="#group__mac__associate_g281ac1d23beaf04aa2dfa01b01657e15_cgraph_map" alt=""></center>
<map name="group__mac__associate_g281ac1d23beaf04aa2dfa01b01657e15_cgraph_map">
<area shape="rect" href="group__mac__associate.html#ged6df4ec4a8b1f717d6591f7bc73627a" title="Determine if a given node is a child if this node." alt="" coords="219,5,304,32"></map>
</div>

</div>
</div><p>
<a class="anchor" name="g4a6a372f2dd95a1cd7d0a3cb635bc4eb"></a><!-- doxytag: member="mac_associate.c::macCreateRoute" ref="g4a6a372f2dd95a1cd7d0a3cb635bc4eb" args="(u16 shortAddr, ftRouting *frame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u8 macCreateRoute           </td>
          <td>(</td>
          <td class="paramtype">u16&nbsp;</td>
          <td class="paramname"> <em>shortAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structftRouting.html">ftRouting</a> *&nbsp;</td>
          <td class="paramname"> <em>frame</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a routing packet. 
<p>
This function fills in a routing packet payload with the routes required. See the protocol documentation for details.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>shortAddr</em>&nbsp;</td><td>The short address of the destination node to route a packet to.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>frame</em>&nbsp;</td><td>Pointer to the routing frame which will be sent. This function fills in the payload of the frame with hop addresses. If frame is NULL, then the routing frame is not used.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The number of hops from the coordinator to the node. </dd></dl>

<p>Definition at line <a class="el" href="mac__associate_8c-source.html#l00383">383</a> of file <a class="el" href="mac__associate_8c-source.html">mac_associate.c</a>.</p>

<p>References <a class="el" href="mac_8h-source.html#l00285">COORD</a>, <a class="el" href="mac_8h-source.html#l00295">DEFAULT_COORD_ADDR</a>, <a class="el" href="mac_8h-source.html#l00621">ftRouting::destAddr</a>, <a class="el" href="mac__associate_8c-source.html#l00079">nodes</a>, <a class="el" href="mac_8h-source.html#l00328">NODETYPE</a>, <a class="el" href="mac__associate_8h-source.html#l00045">associatedNodes_t::parentShortAddress</a>, and <a class="el" href="mac_8h-source.html#l00624">ftRouting::shortAddr</a>.</p>

<p>Referenced by <a class="el" href="mac__route_8c-source.html#l00312">macSendRoutingPacket()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g18f2eb5c764a757970e9d7d72e47425b"></a><!-- doxytag: member="mac_associate.c::macGetHopCount" ref="g18f2eb5c764a757970e9d7d72e47425b" args="(u16 node_short)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u8 macGetHopCount           </td>
          <td>(</td>
          <td class="paramtype">u16&nbsp;</td>
          <td class="paramname"> <em>node_short</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This will return the hop count for the associated node requested. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>node_short</em>&nbsp;</td><td>Short address of node the search for hop count. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="mac__associate_8c-source.html#l01342">1342</a> of file <a class="el" href="mac__associate_8c-source.html">mac_associate.c</a>.</p>

<p>References <a class="el" href="mac_8h-source.html#l00295">DEFAULT_COORD_ADDR</a>, <a class="el" href="mac__associate_8c-source.html#l00079">nodes</a>, and <a class="el" href="mac__associate_8h-source.html#l00045">associatedNodes_t::parentShortAddress</a>.</p>

<p>Referenced by <a class="el" href="mac__associate_8c-source.html#l00175">macAssociationResponse()</a>.</p>

</div>
</div><p>
<a class="anchor" name="gcfefe3f998d94f694b004a72b8b777fb"></a><!-- doxytag: member="mac_associate.c::macGetLastRoute" ref="gcfefe3f998d94f694b004a72b8b777fb" args="(u16 parent)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u16 macGetLastRoute           </td>
          <td>(</td>
          <td class="paramtype">u16&nbsp;</td>
          <td class="paramname"> <em>parent</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the last routed address of one of the router nodes in the network. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>parent</em>&nbsp;</td><td>Short address of the router node being queried.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The short address of the last route address for the router (parent). </dd></dl>

<p>Definition at line <a class="el" href="mac__associate_8c-source.html#l01083">1083</a> of file <a class="el" href="mac__associate_8c-source.html">mac_associate.c</a>.</p>

<p>References <a class="el" href="mac_8h-source.html#l00285">COORD</a>, <a class="el" href="mac__associate_8h-source.html#l00046">associatedNodes_t::lastRoutedAddress</a>, <a class="el" href="mac__associate_8c-source.html#l00079">nodes</a>, and <a class="el" href="mac_8h-source.html#l00328">NODETYPE</a>.</p>

<p>Referenced by <a class="el" href="mac__route_8c-source.html#l00312">macSendRoutingPacket()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g553b1ee14bf13a99a122ff51176477fd"></a><!-- doxytag: member="mac_associate.c::macGetNode" ref="g553b1ee14bf13a99a122ff51176477fd" args="(u16 index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structassociatedNodes__t.html">associatedNodes_t</a>* macGetNode           </td>
          <td>(</td>
          <td class="paramtype">u16&nbsp;</td>
          <td class="paramname"> <em>index</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Gets one entry in the table of nodes. 
<p>
This code only runs on the coordinator.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>index</em>&nbsp;</td><td>The short address of the node to retrieve.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Pointer to the <a class="el" href="structassociatedNodes__t.html">associatedNodes_t</a> structure for the given node. </dd></dl>

<p>Definition at line <a class="el" href="mac__associate_8c-source.html#l01113">1113</a> of file <a class="el" href="mac__associate_8c-source.html">mac_associate.c</a>.</p>

<p>References <a class="el" href="mac_8h-source.html#l00285">COORD</a>, <a class="el" href="mac__associate_8c-source.html#l00079">nodes</a>, and <a class="el" href="mac_8h-source.html#l00328">NODETYPE</a>.</p>

<p>Referenced by <a class="el" href="rum__application_8c-source.html#l00828">allNodes()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g23e06fe2d0b2ad5f7653daa88d86d8c9"></a><!-- doxytag: member="mac_associate.c::macGetNodeAddr" ref="g23e06fe2d0b2ad5f7653daa88d86d8c9" args="(u64 *macAddr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u16 macGetNodeAddr           </td>
          <td>(</td>
          <td class="paramtype">u64 *&nbsp;</td>
          <td class="paramname"> <em>macAddr</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Find a node's short address given the node's long MAC address. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>macAddr</em>&nbsp;</td><td>Pointer to a long (8-byte) MAC address.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The short address of the node, or <a class="el" href="group__mac.html#g6717875b0df9fdee5523c2f251f73810">BROADCASTADDR</a> on error. </dd></dl>

<p>Definition at line <a class="el" href="mac__associate_8c-source.html#l00455">455</a> of file <a class="el" href="mac__associate_8c-source.html">mac_associate.c</a>.</p>

<p>References <a class="el" href="mac_8h-source.html#l00378">BROADCASTADDR</a>, <a class="el" href="mac_8h-source.html#l00285">COORD</a>, <a class="el" href="mac__associate_8c-source.html#l00079">nodes</a>, and <a class="el" href="mac_8h-source.html#l00328">NODETYPE</a>.</p>

<p>Referenced by <a class="el" href="mac__associate_8c-source.html#l00175">macAssociationResponse()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g50c7dc74cfce8901fa59aa34c35f932e"></a><!-- doxytag: member="mac_associate.c::macGetParent" ref="g50c7dc74cfce8901fa59aa34c35f932e" args="(u16 shortAddr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u16 macGetParent           </td>
          <td>(</td>
          <td class="paramtype">u16&nbsp;</td>
          <td class="paramname"> <em>shortAddr</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Find the parent of a given node. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>shortAddr</em>&nbsp;</td><td>The short address of the child node.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The short address of the parent of the given node. </dd></dl>

<p>Definition at line <a class="el" href="mac__associate_8c-source.html#l00640">640</a> of file <a class="el" href="mac__associate_8c-source.html">mac_associate.c</a>.</p>

<p>References <a class="el" href="mac_8h-source.html#l00285">COORD</a>, <a class="el" href="mac__associate_8c-source.html#l00079">nodes</a>, <a class="el" href="mac_8h-source.html#l00328">NODETYPE</a>, and <a class="el" href="mac__associate_8h-source.html#l00045">associatedNodes_t::parentShortAddress</a>.</p>

<p>Referenced by <a class="el" href="mac__data_8c-source.html#l00111">macDataRequestInt()</a>, and <a class="el" href="mac__associate_8c-source.html#l01151">macWakeChildNode()</a>.</p>

</div>
</div><p>
<a class="anchor" name="gea0193b13c0f497ce8561762e1611dc0"></a><!-- doxytag: member="mac_associate.c::macGetTopParent" ref="gea0193b13c0f497ce8561762e1611dc0" args="(u16 addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u16 macGetTopParent           </td>
          <td>(</td>
          <td class="paramtype">u16&nbsp;</td>
          <td class="paramname"> <em>addr</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Find the "topmost" parent for a node (the one connected to the coord). 
<p>
This function only runs on the coordinator node.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>addr</em>&nbsp;</td><td>The short address of the node to find the top parent of.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The short address of the node's top parent. This node is the first hop from coordinator to addr. </dd></dl>

<p>Definition at line <a class="el" href="mac__associate_8c-source.html#l00661">661</a> of file <a class="el" href="mac__associate_8c-source.html">mac_associate.c</a>.</p>

<p>References <a class="el" href="mac_8h-source.html#l00285">COORD</a>, <a class="el" href="mac__associate_8c-source.html#l00479">macIsChild()</a>, <a class="el" href="mac__associate_8c-source.html#l00079">nodes</a>, <a class="el" href="mac_8h-source.html#l00328">NODETYPE</a>, and <a class="el" href="mac__associate_8h-source.html#l00045">associatedNodes_t::parentShortAddress</a>.</p>

<p>Referenced by <a class="el" href="mac__route_8c-source.html#l00225">macRouteData()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="group__mac__associate_gea0193b13c0f497ce8561762e1611dc0_cgraph.png" border="0" usemap="#group__mac__associate_gea0193b13c0f497ce8561762e1611dc0_cgraph_map" alt=""></center>
<map name="group__mac__associate_gea0193b13c0f497ce8561762e1611dc0_cgraph_map">
<area shape="rect" href="group__mac__associate.html#ged6df4ec4a8b1f717d6591f7bc73627a" title="Determine if a given node is a child if this node." alt="" coords="181,5,267,32"></map>
</div>

</div>
</div><p>
<a class="anchor" name="gc7cb66274b3cfecd07d44a4b122b1ad3"></a><!-- doxytag: member="mac_associate.c::macInitNodes" ref="gc7cb66274b3cfecd07d44a4b122b1ad3" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void macInitNodes           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initializes the <a class="el" href="group__mac__associate.html#ge737679ec6b1e6d3942d7c5a029095da">nodes</a> array of <a class="el" href="structassociatedNodes__t.html">associatedNodes_t</a> structures. 
<p>
Really, this only initializes the one entry for the coordinator, since we can assume the other entries are all zeroed on startup. 
<p>Definition at line <a class="el" href="mac__associate_8c-source.html#l01127">1127</a> of file <a class="el" href="mac__associate_8c-source.html">mac_associate.c</a>.</p>

<p>References <a class="el" href="mac_8h-source.html#l00285">COORD</a>, <a class="el" href="mac__associate_8c-source.html#l00079">nodes</a>, and <a class="el" href="mac_8h-source.html#l00328">NODETYPE</a>.</p>

<p>Referenced by <a class="el" href="mac_8c-source.html#l00076">macInit()</a>.</p>

</div>
</div><p>
<a class="anchor" name="ged6df4ec4a8b1f717d6591f7bc73627a"></a><!-- doxytag: member="mac_associate.c::macIsChild" ref="ged6df4ec4a8b1f717d6591f7bc73627a" args="(u16 shortAddr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u8 macIsChild           </td>
          <td>(</td>
          <td class="paramtype">u16&nbsp;</td>
          <td class="paramname"> <em>shortAddr</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Determine if a given node is a child if this node. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>shortAddr</em>&nbsp;</td><td>The short address of the node to look up.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>true if shortAddr is a child of this node. <p>
false if shortAddr is not a child of this node. </dd></dl>

<p>Definition at line <a class="el" href="mac__associate_8c-source.html#l00479">479</a> of file <a class="el" href="mac__associate_8c-source.html">mac_associate.c</a>.</p>

<p>References <a class="el" href="mac__associate_8c-source.html#l00093">childNodes</a>, <a class="el" href="mac_8h-source.html#l00285">COORD</a>, <a class="el" href="mac_8h-source.html#l00295">DEFAULT_COORD_ADDR</a>, <a class="el" href="mac__associate_8c-source.html#l00082">MAXCHILDREN</a>, <a class="el" href="mac__associate_8c-source.html#l00079">nodes</a>, <a class="el" href="mac_8h-source.html#l00328">NODETYPE</a>, and <a class="el" href="mac_8h-source.html#l00286">ROUTER</a>.</p>

<p>Referenced by <a class="el" href="rum__application_8c-source.html#l00309">appPacketSendFailed()</a>, <a class="el" href="mac__associate_8c-source.html#l01237">macChildIsAwake()</a>, <a class="el" href="mac__associate_8c-source.html#l01196">macClearChildWakeFlag()</a>, <a class="el" href="mac__data_8c-source.html#l00111">macDataRequestInt()</a>, <a class="el" href="mac__associate_8c-source.html#l00661">macGetTopParent()</a>, and <a class="el" href="mac__route_8c-source.html#l00225">macRouteData()</a>.</p>

</div>
</div><p>
<a class="anchor" name="gbca0fd11d3bc8ac2f608958459d0279e"></a><!-- doxytag: member="mac_associate.c::macIsChildSleeping" ref="gbca0fd11d3bc8ac2f608958459d0279e" args="(u16 shortAddr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u8 macIsChildSleeping           </td>
          <td>(</td>
          <td class="paramtype">u16&nbsp;</td>
          <td class="paramname"> <em>shortAddr</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Determine if a given node is a sleeping child of this node. 
<p>
This function assumes that addr is a child node of this node.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>shortAddr</em>&nbsp;</td><td>The short address of the node to look up.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>true if shortAddr is sleeping. <p>
false if shortAddr is not sleeping. </dd></dl>

<p>Definition at line <a class="el" href="mac__associate_8c-source.html#l00520">520</a> of file <a class="el" href="mac__associate_8c-source.html">mac_associate.c</a>.</p>

<p>References <a class="el" href="mac__associate_8c-source.html#l00093">childNodes</a>, <a class="el" href="mac_8h-source.html#l00285">COORD</a>, <a class="el" href="mac__associate_8c-source.html#l00082">MAXCHILDREN</a>, <a class="el" href="mac__associate_8c-source.html#l00079">nodes</a>, <a class="el" href="mac_8h-source.html#l00328">NODETYPE</a>, <a class="el" href="mac_8h-source.html#l00286">ROUTER</a>, and <a class="el" href="system_8h-source.html#l00522">RUMSLEEP</a>.</p>

<p>Referenced by <a class="el" href="mac__data_8c-source.html#l00111">macDataRequestInt()</a>, and <a class="el" href="mac__route_8c-source.html#l00225">macRouteData()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g08076cfc03d60f1599548bee49f1e947"></a><!-- doxytag: member="mac_associate.c::macNextChild" ref="g08076cfc03d60f1599548bee49f1e947" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u16 macNextChild           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the short address of the next child node (routers only), or zero if none found. 
<p>
Must call <a class="el" href="group__mac__associate.html#gf621466285e581ba924d5f6c8d447b24" title="Returns the short address of the first child node (routers only), or zero if none...">macFirstChild()</a> before calling this for the first time. 
<p>Definition at line <a class="el" href="mac__associate_8c-source.html#l01325">1325</a> of file <a class="el" href="mac__associate_8c-source.html">mac_associate.c</a>.</p>

<p>References <a class="el" href="mac__associate_8c-source.html#l00093">childNodes</a>, <a class="el" href="mac__associate_8c-source.html#l00082">MAXCHILDREN</a>, <a class="el" href="mac_8h-source.html#l00328">NODETYPE</a>, and <a class="el" href="mac_8h-source.html#l00286">ROUTER</a>.</p>

</div>
</div><p>
<a class="anchor" name="g2dde2bdb54d1319810d247e434baa0d8"></a><!-- doxytag: member="mac_associate.c::macNotifyDrop" ref="g2dde2bdb54d1319810d247e434baa0d8" args="(u16 parent, u16 child)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void macNotifyDrop           </td>
          <td>(</td>
          <td class="paramtype">u16&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u16&nbsp;</td>
          <td class="paramname"> <em>child</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sends a frame from the coordinator notifying a router to drop a child from its table. 
<p>
This occurs as a result of a re-association, where the new node already exists in the network table, as a child of a parent different from its new parent.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>parent</em>&nbsp;</td><td>Short address of the former parent node.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>child</em>&nbsp;</td><td>Short address the of the child node to drop from the parent's node table. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="mac__associate_8c-source.html#l01059">1059</a> of file <a class="el" href="mac__associate_8c-source.html">mac_associate.c</a>.</p>

<p>References <a class="el" href="mac_8h-source.html#l00705">macConfig_t::busy</a>, <a class="el" href="mac_8h-source.html#l00285">COORD</a>, <a class="el" href="mac_8h-source.html#l00483">MAC_NOTIFY_DELAY</a>, <a class="el" href="mac_8c-source.html#l00056">macConfig</a>, <a class="el" href="avr__timer_8c-source.html#l00158">macSetAlarm()</a>, and <a class="el" href="mac_8h-source.html#l00328">NODETYPE</a>.</p>

<p>Referenced by <a class="el" href="mac__associate_8c-source.html#l00175">macAssociationResponse()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="group__mac__associate_g2dde2bdb54d1319810d247e434baa0d8_cgraph.png" border="0" usemap="#group__mac__associate_g2dde2bdb54d1319810d247e434baa0d8_cgraph_map" alt=""></center>
<map name="group__mac__associate_g2dde2bdb54d1319810d247e434baa0d8_cgraph_map">
<area shape="rect" href="group__timer__module.html#g0155e5192956b3cd498751d8652f7773" title="Sets a general purpose timer." alt="" coords="161,31,260,57"><area shape="rect" href="group__arm.html#g8ad2d7780b4815433b88ee56afa2830c" title="Returns a unique timer ID." alt="" coords="311,5,401,32"><area shape="rect" href="group__timer__module.html#g55bef38a083b7a6478dd60c6668f3434" title="Start the hardware timer running." alt="" coords="317,56,395,83"></map>
</div>

</div>
</div><p>
<a class="anchor" name="g2d350a06c929bb4d5001b2f10635f22e"></a><!-- doxytag: member="mac_associate.c::macPrintTree" ref="g2d350a06c929bb4d5001b2f10635f22e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void macPrintTree           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Print the network tree in a semi-graphical format, to be viewed on a terminal screen. 
<p>
This code only applies if the <a class="el" href="group__app.html#gd72dbcf6d0153db1b8d8a58001feed83">DEBUG</a> flag has been turned on. 
<p>Definition at line <a class="el" href="mac__associate_8c-source.html#l00754">754</a> of file <a class="el" href="mac__associate_8c-source.html">mac_associate.c</a>.</p>

<p>References <a class="el" href="mac__associate_8c-source.html#l00093">childNodes</a>, <a class="el" href="mac_8h-source.html#l00285">COORD</a>, <a class="el" href="mac_8h-source.html#l00273">DEBUG</a>, <a class="el" href="mac__associate_8c-source.html#l00692">findFirstChild()</a>, <a class="el" href="mac__associate_8c-source.html#l00725">findNextSibling()</a>, <a class="el" href="mac_8c-source.html#l00056">macConfig</a>, <a class="el" href="mac__associate_8c-source.html#l00082">MAXCHILDREN</a>, <a class="el" href="mac__associate_8h-source.html#l00044">associatedNodes_t::nodeLongAddress</a>, <a class="el" href="mac__associate_8c-source.html#l00079">nodes</a>, <a class="el" href="mac__associate_8h-source.html#l00043">associatedNodes_t::nodeType</a>, <a class="el" href="mac_8h-source.html#l00328">NODETYPE</a>, <a class="el" href="mac__associate_8h-source.html#l00045">associatedNodes_t::parentShortAddress</a>, <a class="el" href="mac_8h-source.html#l00286">ROUTER</a>, and <a class="el" href="mac_8h-source.html#l00699">macConfig_t::shortAddress</a>.</p>

<p>Referenced by <a class="el" href="rum__application_8c-source.html#l00932">appTask()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="group__mac__associate_g2d350a06c929bb4d5001b2f10635f22e_cgraph.png" border="0" usemap="#group__mac__associate_g2d350a06c929bb4d5001b2f10635f22e_cgraph_map" alt=""></center>
<map name="group__mac__associate_g2d350a06c929bb4d5001b2f10635f22e_cgraph_map">
<area shape="rect" href="group__mac__associate.html#g4a2dbfd0649a23ba01d86f5f178a3514" title="Find the first child in the network table of a given parent node." alt="" coords="159,5,255,32"><area shape="rect" href="group__mac__associate.html#g8ea900490f4d660861f484584c9f012a" title="Find the next sibling node of a given node." alt="" coords="153,56,260,83"></map>
</div>

</div>
</div><p>
<a class="anchor" name="g18e0aeff533ca9a9e8bb2788eb8648e1"></a><!-- doxytag: member="mac_associate.c::macRemoveChild" ref="g18e0aeff533ca9a9e8bb2788eb8648e1" args="(u16 shortAddr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void macRemoveChild           </td>
          <td>(</td>
          <td class="paramtype">u16&nbsp;</td>
          <td class="paramname"> <em>shortAddr</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Remove a node from the child table. 
<p>
This function applies to both routers and coordinators.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>shortAddr</em>&nbsp;</td><td>The short address of the node to remove from the table. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="mac__associate_8c-source.html#l00605">605</a> of file <a class="el" href="mac__associate_8c-source.html">mac_associate.c</a>.</p>

<p>References <a class="el" href="mac__associate_8c-source.html#l00093">childNodes</a>, <a class="el" href="mac_8h-source.html#l00285">COORD</a>, <a class="el" href="mac__associate_8h-source.html#l00046">associatedNodes_t::lastRoutedAddress</a>, <a class="el" href="mac__associate_8c-source.html#l00082">MAXCHILDREN</a>, <a class="el" href="mac__associate_8c-source.html#l00079">nodes</a>, <a class="el" href="mac__associate_8h-source.html#l00043">associatedNodes_t::nodeType</a>, <a class="el" href="mac_8h-source.html#l00328">NODETYPE</a>, <a class="el" href="mac__associate_8h-source.html#l00045">associatedNodes_t::parentShortAddress</a>, and <a class="el" href="mac_8h-source.html#l00286">ROUTER</a>.</p>

<p>Referenced by <a class="el" href="rum__application_8c-source.html#l00309">appPacketSendFailed()</a>, <a class="el" href="mac__associate_8c-source.html#l00175">macAssociationResponse()</a>, and <a class="el" href="mac__data_8c-source.html#l00261">macDataIndication()</a>.</p>

</div>
</div><p>
<a class="anchor" name="geac81ec5acd0fa702167c9f8b0ce29b2"></a><!-- doxytag: member="mac_associate.c::macSetLastRoute" ref="geac81ec5acd0fa702167c9f8b0ce29b2" args="(u16 parent, u16 addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void macSetLastRoute           </td>
          <td>(</td>
          <td class="paramtype">u16&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u16&nbsp;</td>
          <td class="paramname"> <em>addr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sets the last routed address for a router node. 
<p>
This code only exists on the coordinator node.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>parent</em>&nbsp;</td><td>Short address of the router node.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>addr</em>&nbsp;</td><td>Short address of the last routed address for a node. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="mac__associate_8c-source.html#l01098">1098</a> of file <a class="el" href="mac__associate_8c-source.html">mac_associate.c</a>.</p>

<p>References <a class="el" href="mac_8h-source.html#l00285">COORD</a>, <a class="el" href="mac__associate_8h-source.html#l00046">associatedNodes_t::lastRoutedAddress</a>, <a class="el" href="mac__associate_8c-source.html#l00079">nodes</a>, and <a class="el" href="mac_8h-source.html#l00328">NODETYPE</a>.</p>

<p>Referenced by <a class="el" href="mac__route_8c-source.html#l00312">macSendRoutingPacket()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g9b4bd3c99bd01a997dfbf36de2db14ae"></a><!-- doxytag: member="mac_event.h::macTask" ref="g9b4bd3c99bd01a997dfbf36de2db14ae" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void macTask           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This is the main loop task for the MAC. 
<p>
Called by the main "forever" loop or by an OS task or thread. This function processes interrupt events that are stored in the event queue by the radio or timer. 
<p>Definition at line <a class="el" href="mac__event_8c-source.html#l00141">141</a> of file <a class="el" href="mac__event_8c-source.html">mac_event.c</a>.</p>

<p>References <a class="el" href="rum__application_8c-source.html#l00298">appPacketSendAccessFail()</a>, <a class="el" href="rum__application_8c-source.html#l00309">appPacketSendFailed()</a>, <a class="el" href="rum__application_8c-source.html#l00273">appPacketSendSucceed()</a>, <a class="el" href="mac_8h-source.html#l00695">macConfig_t::associated</a>, <a class="el" href="mac_8h-source.html#l00285">COORD</a>, <a class="el" href="mac_8h-source.html#l00287">ENDDEVICE</a>, <a class="el" href="mac__event_8h-source.html#l00066">event_object_t::event</a>, <a class="el" href="mac_8h-source.html#l00430">FCF_ASSOC_RESP_DIRECT</a>, <a class="el" href="mac_8c-source.html#l00066">mac_buffer_rx</a>, <a class="el" href="mac__event_8h-source.html#l00053">MAC_EVENT_ACCESS</a>, <a class="el" href="mac__event_8h-source.html#l00051">MAC_EVENT_ACK</a>, <a class="el" href="mac__event_8h-source.html#l00057">MAC_EVENT_ASSOCIATION_REQUEST</a>, <a class="el" href="mac__event_8h-source.html#l00058">MAC_EVENT_ASSOCIATION_RESPONSE</a>, <a class="el" href="mac__event_8h-source.html#l00055">MAC_EVENT_BEACON_REQ</a>, <a class="el" href="mac__event_8h-source.html#l00052">MAC_EVENT_NACK</a>, <a class="el" href="mac__event_8c-source.html#l00077">mac_event_pending()</a>, <a class="el" href="mac__event_8h-source.html#l00059">MAC_EVENT_ROUTE</a>, <a class="el" href="mac__event_8h-source.html#l00050">MAC_EVENT_RX</a>, <a class="el" href="mac__event_8h-source.html#l00054">MAC_EVENT_SCAN</a>, <a class="el" href="mac__event_8h-source.html#l00056">MAC_EVENT_TIMER</a>, <a class="el" href="mac__event_8c-source.html#l00116">mac_get_event()</a>, <a class="el" href="mac__scan_8c-source.html#l00268">mac_logPanDescriptors()</a>, <a class="el" href="mac__associate_8c-source.html#l00147">macAssociationConfirm()</a>, <a class="el" href="mac__associate_8c-source.html#l00175">macAssociationResponse()</a>, <a class="el" href="mac__associate_8c-source.html#l01237">macChildIsAwake()</a>, <a class="el" href="mac_8c-source.html#l00056">macConfig</a>, <a class="el" href="mac__data_8c-source.html#l00261">macDataIndication()</a>, <a class="el" href="mac__route_8c-source.html#l00048">macForwardRoutingPacket()</a>, <a class="el" href="mac__route_8c-source.html#l00225">macRouteData()</a>, <a class="el" href="avr__timer_8c-source.html#l00158">macSetAlarm()</a>, <a class="el" href="mac_8h-source.html#l00328">NODETYPE</a>, <a class="el" href="mac_8h-source.html#l00700">macConfig_t::parentShortAddress</a>, <a class="el" href="radio_8c-source.html#l01044">radioSetShortAddress()</a>, <a class="el" href="mac_8h-source.html#l00286">ROUTER</a>, and <a class="el" href="mac_8h-source.html#l00699">macConfig_t::shortAddress</a>.</p>

<p>Referenced by <a class="el" href="rum__application_8c-source.html#l00932">appTask()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="group__mac__associate_g9b4bd3c99bd01a997dfbf36de2db14ae_cgraph.png" border="0" usemap="#group__mac__associate_g9b4bd3c99bd01a997dfbf36de2db14ae_cgraph_map" alt=""></center>
<map name="group__mac__associate_g9b4bd3c99bd01a997dfbf36de2db14ae_cgraph_map">
<area shape="rect" href="group__app.html#g0686170052677b61bf884357e98354b6" title="Application callback function, called when the MAC fails to send a packet due to..." alt="" coords="128,5,307,32"><area shape="rect" href="group__app.html#gaab9f419d476077682bd9e42b06aad39" title="Application callback function, called when the MAC fails to receive an ACK packet..." alt="" coords="144,56,291,83"><area shape="rect" href="group__timer__module.html#g0155e5192956b3cd498751d8652f7773" title="Sets a general purpose timer." alt="" coords="356,259,455,285"><area shape="rect" href="group__app.html#g165181964bf513258f8c195c36483774" title="Application callback function, called when the MAC receives an ACK packet from a..." alt="" coords="136,157,299,184"><area shape="rect" href="group__mac__event.html#gdd0c24c8a506bc29abe1ec095bb9dbc0" title="Checks for any pending events in the queue." alt="" coords="149,208,285,235"><area shape="rect" href="group__mac__event.html#g80999c6d92ebf45c7cf293881fc6f58f" title="Pulls an event from the event queue." alt="" coords="164,259,271,285"><area shape="rect" href="group__mac__scan.html#gf084f7bb7346b0573dc67e4dea576d6e" title="Record the pan description data from a received beacon frame in the global panDescriptor..." alt="" coords="137,309,297,336"><area shape="rect" href="group__mac__associate.html#g43b554aefc8950ec2c7591a400fb8559" title="This function is called when the MAC receives an association response frame." alt="" coords="139,360,296,387"><area shape="rect" href="group__mac__associate.html#gb66e6617d404824a1be943d829ed0d8e" title="This function is called when an association request is received by this node (and..." alt="" coords="132,411,303,437"><area shape="rect" href="group__mac__associate.html#gc7f2013b75ca11c7e5ca07cec549d708" title="Wake child node by sending it a packet." alt="" coords="156,461,279,488"><area shape="rect" href="group__mac__data.html#gd3e85e09f6dbb0b41c432986a4a17fec" title="This function is called when the MAC receives a packet that is addressed to this..." alt="" coords="153,512,281,539"><area shape="rect" href="group__mac.html#g88d7808a53f2a5b65445f782c75c61e6" title="Send routing packet down the chain, removing own address from the list of addresses..." alt="" coords="129,563,305,589"><area shape="rect" href="group__mac.html#g38eb0657916430780d598411fa5ce9d3" title="Route a data packet." alt="" coords="164,613,271,640"><area shape="rect" href="group__radio.html#g2d1c441755a5b0f6215692474ae36f9f" title="This function will set the short address used by the address filter." alt="" coords="144,664,291,691"></map>
</div>

</div>
</div><p>
<a class="anchor" name="g243906ca038a1601687f0aa66aa63973"></a><!-- doxytag: member="mac_associate.c::macWakeChildNode" ref="g243906ca038a1601687f0aa66aa63973" args="(u16 addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void macWakeChildNode           </td>
          <td>(</td>
          <td class="paramtype">u16&nbsp;</td>
          <td class="paramname"> <em>addr</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set a child node's entry to be woken up. 
<p>
This code runs on both the coordinator and router:<p>
<ul>
<li>On the coordinator, this function causes a wakeup packet to be sent to the sleeping node's parent.</li></ul>
<p>
<ul>
<li>On the router parent node, this function causes an entry to be set in the child node, so that when a packet is received from the sleeping child node, a wakeup packet will immediately be sent.</li></ul>
<p>
See <a class="el" href="group__mac__associate.html#gc7f2013b75ca11c7e5ca07cec549d708">macChildIsAwake</a> for more information about wakeup.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>addr</em>&nbsp;</td><td>Short address of child node. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="mac__associate_8c-source.html#l01151">1151</a> of file <a class="el" href="mac__associate_8c-source.html">mac_associate.c</a>.</p>

<p>References <a class="el" href="mac__associate_8c-source.html#l00093">childNodes</a>, <a class="el" href="mac_8h-source.html#l00285">COORD</a>, <a class="el" href="mac_8h-source.html#l00295">DEFAULT_COORD_ADDR</a>, <a class="el" href="mac__associate_8c-source.html#l00640">macGetParent()</a>, <a class="el" href="mac__data_8c-source.html#l00217">macWakeRequest()</a>, <a class="el" href="mac__associate_8c-source.html#l00082">MAXCHILDREN</a>, <a class="el" href="mac__associate_8c-source.html#l00079">nodes</a>, <a class="el" href="mac_8h-source.html#l00328">NODETYPE</a>, <a class="el" href="mac_8h-source.html#l00286">ROUTER</a>, <a class="el" href="system_8h-source.html#l00522">RUMSLEEP</a>, and <a class="el" href="mac__associate_8h-source.html#l00047">associatedNodes_t::wakeup</a>.</p>

<p>Referenced by <a class="el" href="rum__application_8c-source.html#l00932">appTask()</a>, <a class="el" href="mac__data_8c-source.html#l00261">macDataIndication()</a>, and <a class="el" href="sixlowpan__wake_8c-source.html#l00234">sixlowpanSleep_packetFailed()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="group__mac__associate_g243906ca038a1601687f0aa66aa63973_cgraph.png" border="0" usemap="#group__mac__associate_g243906ca038a1601687f0aa66aa63973_cgraph_map" alt=""></center>
<map name="group__mac__associate_g243906ca038a1601687f0aa66aa63973_cgraph_map">
<area shape="rect" href="group__mac__associate.html#g50c7dc74cfce8901fa59aa34c35f932e" title="Find the parent of a given node." alt="" coords="556,6,660,32"><area shape="rect" href="group__mac__data.html#gda801fb2177a22220f4c3f3c9a8d1db0" title="The macWakeRequest function is called by the coordinator to send a wakeup packet..." alt="" coords="195,31,323,58"><area shape="rect" href="group__mac__data.html#gecb7b33bf7233d79d0a261dca1943c56" title="The macsixlowpanDataRequest function is used to send a frame over the air to another..." alt="" coords="371,31,507,58"></map>
</div>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="g59e1325e646394f38a18a99bc2bd1d82"></a><!-- doxytag: member="mac_associate.c::childNodes" ref="g59e1325e646394f38a18a99bc2bd1d82" args="[50 *(NODETYPE==ROUTER)]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tChildTableItem <a class="el" href="group__mac__associate.html#g59e1325e646394f38a18a99bc2bd1d82">childNodes</a>[50 *(NODETYPE==ROUTER)]<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Table of children nodes, only instantiated for router nodes. 
<p>

<p>Definition at line <a class="el" href="mac__associate_8c-source.html#l00093">93</a> of file <a class="el" href="mac__associate_8c-source.html">mac_associate.c</a>.</p>

<p>Referenced by <a class="el" href="mac__associate_8c-source.html#l00559">macAddChild()</a>, <a class="el" href="mac__associate_8c-source.html#l01237">macChildIsAwake()</a>, <a class="el" href="mac__associate_8c-source.html#l01196">macClearChildWakeFlag()</a>, <a class="el" href="mac__associate_8c-source.html#l01308">macFirstChild()</a>, <a class="el" href="mac__associate_8c-source.html#l00479">macIsChild()</a>, <a class="el" href="mac__associate_8c-source.html#l00520">macIsChildSleeping()</a>, <a class="el" href="mac__associate_8c-source.html#l01325">macNextChild()</a>, <a class="el" href="mac__associate_8c-source.html#l00754">macPrintTree()</a>, <a class="el" href="mac__associate_8c-source.html#l00605">macRemoveChild()</a>, and <a class="el" href="mac__associate_8c-source.html#l01151">macWakeChildNode()</a>.</p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Jun 8 18:39:03 2009 for RUM by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
